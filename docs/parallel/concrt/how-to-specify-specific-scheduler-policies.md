---
title: Практическое руководство. Задание определенных политик планировщика
ms.date: 11/04/2016
helpviewer_keywords:
- specifying scheduler policies [Concurrency Runtime]
- scheduler policies, specifying [Concurrency Runtime]
ms.assetid: 9c5149f9-ac34-4ff3-9e79-0bad103e4e6b
ms.openlocfilehash: bd5edfbdf6b0fda9c7e327dab9538bbf6b5e4b12
ms.sourcegitcommit: a8ef52ff4a4944a1a257bdaba1a3331607fb8d0f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/11/2020
ms.locfileid: "77142452"
---
# <a name="how-to-specify-specific-scheduler-policies"></a>Практическое руководство. Задание определенных политик планировщика

Политики планировщика позволяют управлять стратегией, которую планировщик использует при управлении задачами. В этом разделе показано, как использовать политику планировщика для увеличения приоритета потока задачи, которая выводит индикатор хода выполнения на консоль.

Пример использования настраиваемых политик планировщика вместе с асинхронными агентами см. [в разделе Создание агентов, использующих определенные политики планировщика](../../parallel/concrt/how-to-create-agents-that-use-specific-scheduler-policies.md).

## <a name="example"></a>Пример

В следующем примере выполняются две задачи параллельно. Первая задача выполняет вычисление n-<sup>го</sup> числа Фибоначчи. Вторая задача выводит индикатор хода выполнения на консоль.

Первая задача использует рекурсивную декомпозицию для расчета числа Фибоначчи. То есть каждая задача рекурсивно создает подзадачи для вычисления общего результата. Задача, использующая рекурсивную декомпозицию, может использовать все доступные ресурсы и, следовательно, не будет выполнять другие задачи. В этом примере задача, которая выводит индикатор выполнения, может не получать своевременный доступ к вычислительным ресурсам.

Чтобы предоставить задачу, которая выводит сообщение о ходе выполнения к вычислительным ресурсам, в этом примере используются шаги, описанные в разделе [Управление экземпляром планировщика](../../parallel/concrt/how-to-manage-a-scheduler-instance.md) для создания экземпляра планировщика с настраиваемой политикой. Настраиваемая политика задает приоритет потока в качестве класса с наивысшим приоритетом.

В этом примере используются классы [Concurrency:: Call](../../parallel/concrt/reference/call-class.md) и [Concurrency:: Timer](../../parallel/concrt/reference/timer-class.md) для печати индикатора хода выполнения. Эти классы имеют версии своих конструкторов, которые принимают ссылку на объект [Concurrency:: Scheduler](../../parallel/concrt/reference/scheduler-class.md) , который планирует их. В примере планировщик по умолчанию используется для планирования задачи, которая выполняет вычисление числа Фибоначчи и экземпляра планировщика, чтобы запланировать задачу, которая выводит индикатор хода выполнения.

Чтобы продемонстрировать преимущества использования планировщика, имеющего настраиваемую политику, этот пример выполняет общую задачу два раза. В примере сначала используется планировщик по умолчанию для планирования обеих задач. Затем в примере используется планировщик по умолчанию для планирования первой задачи и планировщик с настраиваемой политикой для планирования второй задачи.

[!code-cpp[concrt-scheduler-policy#1](../../parallel/concrt/codesnippet/cpp/how-to-specify-specific-scheduler-policies_1.cpp)]

В этом примере формируются следующие данные:

```Output
Default scheduler:
...........................................................................done
Scheduler that has a custom policy:
...........................................................................done
```

Несмотря на то, что оба набора задач дают одинаковый результат, версия, использующая пользовательскую политику, позволяет задаче, которая выводит индикатор хода выполнения, выполняться с повышенным приоритетом, чтобы обеспечить более высокую скорость реагирования.

## <a name="compiling-the-code"></a>Компиляция кода

Скопируйте пример кода и вставьте его в проект Visual Studio или вставьте в файл с именем `scheduler-policy.cpp`, а затем выполните следующую команду в окне командной строки Visual Studio.

> **CL. exe/EHsc счедулер-Полици. cpp**

## <a name="see-also"></a>См. также раздел

[Политики планировщика](../../parallel/concrt/scheduler-policies.md)<br/>
[Практическое руководство. Управление экземпляром планировщика](../../parallel/concrt/how-to-manage-a-scheduler-instance.md)<br/>
[Практическое руководство. Создание агентов, использующих определенные политики планировщика](../../parallel/concrt/how-to-create-agents-that-use-specific-scheduler-policies.md)
