---
title: Асинхронные агенты
ms.date: 11/19/2018
helpviewer_keywords:
- asynchronous agents
- agents [Concurrency Runtime]
ms.assetid: 6cf6ccc6-87f1-4e14-af15-ea8ba58fef1a
ms.openlocfilehash: ff6fa851519066c3c399a28557fd8f103d0e94be
ms.sourcegitcommit: 0ab61bc3d2b6cfbd52a16c6ab2b97a8ea1864f12
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/23/2019
ms.locfileid: "62412816"
---
# <a name="asynchronous-agents"></a>Асинхронные агенты

*Асинхронный агент* (или просто *агента*) — это компонент приложения, который работает асинхронно с другими агентами для решения более крупными вычислительными задачами. Агент можно рассматривать как задачу, которая имеет заданный жизненный цикл. Например один агент может считывать данные из устройства ввода вывода (например, клавиатуры, в файл на диске или сетевого подключения), а другой агент может выполнить действие над этими данными, как она станет доступной. Первый агент использует передачу сообщений для информирования второго агента, что доступно больше данных. Планировщик задач среды выполнения с параллелизмом предоставляет эффективный механизм для включения агентов блокировать и разрешать совместное без необходимости вытеснения менее эффективным.

Библиотека агентов определяет [concurrency::agent](../../parallel/concrt/reference/agent-class.md) классу представлять асинхронный агент. `agent` — Это абстрактный класс, объявляющий виртуальный метод [Concurrency::agent:: Run](reference/agent-class.md#run). `run` Метод выполняет задачу, выполняемую агентом. Так как `run` является абстрактным, необходимо реализовать этот метод в каждом классе, унаследованном от `agent`.

## <a name="agent-life-cycle"></a>Жизненный цикл агента

Агенты имеют заданный жизненный цикл. [Concurrency::agent_status](reference/concurrency-namespace-enums.md#agent_status) перечисление определяет различные состояния агента. На следующем рисунке показан диаграмму состояния, который показан переход агентов из одного состояния в другое. На этом рисунке сплошные линии представляют методы, вызываемые из приложения; пунктирные линии обозначают методы, вызываемые из среды выполнения.

![Схема состояния агента](../../parallel/concrt/media/agentstate.png "схема состояния агента")

В следующей таблице описаны каждого штата `agent_status` перечисления.

|Состояние агента|Описание|
|-----------------|-----------------|
|`agent_created`|Агент не был запланирован для выполнения.|
|`agent_runnable`|Среда выполнения планирует агент для выполнения.|
|`agent_started`|Агент запущен и работает.|
|`agent_done`|Выполнение агента завершено.|
|`agent_canceled`|Агент был отменен, прежде чем он введен `started` состояния.|

`agent_created` — Это начальное состояние агента, `agent_runnable` и `agent_started` — активные состояния и `agent_done` и `agent_canceled` , — терминальные.

Используйте [Concurrency::agent:: status](reference/agent-class.md#status) метод для извлечения текущего состояния `agent` объекта. Несмотря на то что `status` метод безопасен в режиме параллелизма, состояние агента может измениться к моменту `status` возвращает метод. Например, агент может быть в `agent_started` состояние при вызове `status` метод, но перемещен `agent_done` состояние сразу после `status` возвращает метод.

## <a name="methods-and-features"></a>Методы и функции

В следующей таблице показаны некоторые важные методы, принадлежащие `agent` класса. Дополнительные сведения обо всех `agent` методы класса, см. в разделе [класс agent](../../parallel/concrt/reference/agent-class.md).

|Метод|Описание|
|------------|-----------------|
|[start](reference/agent-class.md#start)|Расписания `agent` объект для выполнения и заменяет его на `agent_runnable` состояние.|
|[run](reference/agent-class.md#run)|Выполняет задачу, которая должна быть выполнена путем `agent` объекта.|
|[Договорились](reference/agent-class.md#done)|Переводит агент в `agent_done` состояние.|
|[Отмена](../../parallel/concrt/cancellation-in-the-ppl.md#cancel)|Если агент не был запущен, этот метод отменяет выполнение агента и заменяет его на `agent_canceled` состояние.|
|[status](reference/agent-class.md#status)|Извлекает текущее состояние `agent` объекта.|
|[wait](reference/agent-class.md#wait)|Ожидает `agent` перехода объекта `agent_done` или `agent_canceled` состояния.|
|[wait_for_all](reference/agent-class.md#wait_for_all)|Ожидает, пока все предоставленные `agent` объектов `agent_done` или `agent_canceled` состояния.|
|[wait_for_one](reference/agent-class.md#wait_for_one)|Ожидает в течение по крайней мере один из указанных `agent` объектов `agent_done` или `agent_canceled` состояния.|

После создания объекта агента, вызовите [Concurrency::agent:: Start](reference/agent-class.md#start) метод, чтобы запланировать его выполнение. Среда выполнения вызывает `run` метод после планирования агента и заменяет его на `agent_runnable` состояние.

Среда выполнения не управляет исключениями, которые выдают асинхронных агентов. Дополнительные сведения об обработке исключений и агентов, см. в разделе [обработка исключений](../../parallel/concrt/exception-handling-in-the-concurrency-runtime.md).

## <a name="example"></a>Пример

Пример, показывающий, как создать простое приложение на основе агентов, см. в разделе [Пошаговое руководство: Создание приложения с поддержкой агента](../../parallel/concrt/walkthrough-creating-an-agent-based-application.md).

## <a name="see-also"></a>См. также

[Библиотека асинхронных агентов](../../parallel/concrt/asynchronous-agents-library.md)
