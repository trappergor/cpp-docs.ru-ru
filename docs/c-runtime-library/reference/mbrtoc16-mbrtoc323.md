---
title: mbrtoc16, mbrtoc323
ms.date: 10/22/2019
api_name:
- mbrtoc16
- mbrtoc32
api_location:
- msvcrt.dll
- msvcr80.dll
- msvcr90.dll
- msvcr100.dll
- msvcr100_clr0400.dll
- msvcr110.dll
- msvcr110_clr0400.dll
- msvcr120.dll
- msvcr120_clr0400.dll
- ucrtbase.dll
- api-ms-win-crt-convert-l1-1-0.dll
api_type:
- DLLExport
topic_type:
- apiref
f1_keywords:
- mbrtoc16
- mbrtoc32
- uchar/mbrtoc16
- uchar/mbrtoc32
helpviewer_keywords:
- mbrtoc16 function
- mbrtoc32 function
ms.assetid: 099ade4d-56f7-4e61-8b45-493f1d7a64bd
ms.openlocfilehash: 793eadf433f3117d89b4f0dc7c8397762405406b
ms.sourcegitcommit: 0a5518fdb9d87fcc326a8507ac755936285fcb94
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/23/2019
ms.locfileid: "72811133"
---
# <a name="mbrtoc16-mbrtoc32"></a>mbrtoc16, mbrtoc32

Преобразует первый многобайтовый символ UTF-8 в строке в эквивалентный символ UTF-16 или UTF-32.

## <a name="syntax"></a>Синтаксис

```C
size_t mbrtoc16(
   char16_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);

size_t mbrtoc32(
   char32_t* destination,
   const char* source,
   size_t max_bytes,
   mbstate_t* state
);
```

### <a name="parameters"></a>Параметры

\ *назначения*
Указатель на **char16_t** или **char32_t** , эквивалентный символу многобайтовой кодировки UTF-8 для преобразования. Если задано значение null, функция не сохраняет значение.

*исходный*\
Указатель на строку многобайтового символа в кодировке UTF-8 для преобразования.

*max_bytes*\
Максимальное число байтов в *источнике* , которое необходимо проверить для преобразуемого символа. Этот аргумент должен иметь значение от 1 до числа байтов, включая нулевой знак завершения, остающийся в *источнике*.

\ *состояния*
Указатель на объект состояния преобразования **mbstate_t** , используемый для интерпретации многобайтовой строки UTF-8 в один или несколько выходных символов.

## <a name="return-value"></a>Возвращаемое значение

При успешном выполнении возвращает значение первого из этих условий, которое применяется, учитывая текущее значение *состояния* :

|значения|Условие|
|-----------|---------------|
|0|Следующий *max_bytes* или меньше символов, преобразованных из *источника* , соответствует расширенному символу null, который является значением, хранимым, если значение параметра *Destination* не равно null.<br /><br /> *State* содержит начальное состояние сдвига.|
|От 1 до *max_bytes*включительно|Возвращаемое значение — это число байтов *источника* , которые завершают допустимый многобайтовый символ. Преобразованный расширенный символ сохраняется, если *значение Destination* не равно null.|
|-3|Следующий широкий символ, полученный при предыдущем вызове функции, был сохранен в *месте назначения* , если *значение Destination* не равно null. Этот вызов функции не использует байты из *источника* .<br /><br /> Когда *источник* указывает на многобайтовый символ UTF-8, для представления которого требуется более одного расширенного символа (например, суррогатная пара), значение *состояния* обновляется так, чтобы следующий вызов функции записывал дополнительный символ.|
|-2|Следующие *max_bytes* байты представляют неполный, но потенциально допустимый многобайтовый символ UTF-8. В *месте назначения*не хранится значение. Этот результат может произойти, если *max_bytes* равен нулю.|
|-1|Произошла ошибка кодирования. Следующий *max_bytes* или меньше байтов не влияет на полный и допустимый многобайтовый символ UTF-8. В *месте назначения*не хранится значение.<br /><br /> **Еилсек** хранится в состоянии пересчета **, и значение** состояния *преобразования не указано* .|

## <a name="remarks"></a>Заметки

Функция **mbrtoc16** считывает до *max_bytes* байт из *источника* , чтобы найти первый полный, допустимый многобайтовый символ UTF-8, а затем сохраняет эквивалентный символ UTF-16 в *назначении*. Если символ требует более одного выходного символа UTF-16, например суррогатной пары, то значение *состояния* задается для сохранения следующего символа UTF-16 в *месте назначения* при следующем вызове метода **mbrtoc16**. Функция **mbrtoc32** идентична, но выходные данные ХРАНЯТСЯ в кодировке UTF-32.

Если *Source* имеет значение null, эти функции возвращают эквивалент вызова с помощью аргументов **null** для *Destination*, `""` (пустая строка, заканчивающаяся нулем) для *Source*и 1 для *max_bytes*. Переданные значения *Destination* и *max_bytes* игнорируются.

Если *Source* не имеет значение null, функция начинается в начале строки и проверяет до *max_bytes* байт, чтобы определить число байтов, необходимых для завершения следующего многобайтового символа UTF-8, включая любые последовательности сдвигов. Если проверенные байты содержат допустимый и полный многобайтовый символ UTF-8, функция преобразует символ в эквивалентный 16-разрядный или 32-разрядный расширенный символ или символы. Если значение *Destination* не равно null, функция сохраняет первый (и, возможно, только) результирующий символ в месте назначения. Если требуются дополнительные выходные символы, значение задается в *состоянии*, поэтому последующие вызовы функции выводят дополнительные символы и возвращают значение-3. Если больше не требуются выходные символы, то для *State* задается начальное состояние сдвига.

Для преобразования многобайтовых символов, отличных от UTF-8, в символы UTF-16 LE используйте функции [мбртовк](mbrtowc.md), [mbtowc или _mbtowc_l](mbtowc-mbtowc-l.md) .

## <a name="requirements"></a>Требования

|Функция|Заголовок C|Заголовок C++|
|--------------|--------------|------------------|
|**mbrtoc16**, **mbrtoc32**|\<uchar.h>|\<cuchar>|

Дополнительные сведения о совместимости см. в разделе [Compatibility](../compatibility.md).

## <a name="see-also"></a>См. также

\ [преобразования данных](../data-conversion.md)
[Языковой стандарт](../locale.md)\
[Интерпретация последовательностей многобайтовых символов](../interpretation-of-multibyte-character-sequences.md)\
[c16rtomb, c32rtomb](c16rtomb-c32rtomb1.md)\
[mbrtowc](mbrtowc.md)\
[mbsrtowcs](mbsrtowcs.md)\
[mbsrtowcs_s](mbsrtowcs-s.md)
