---
title: Обход механизма сериализации
ms.date: 11/04/2016
helpviewer_keywords:
- archive objects [MFC]
- bypassing serialization
- archives [MFC], serialization
- serialization [MFC], bypassing
- archives [MFC]
- serialization [MFC], role of framework
- serialization [MFC], overriding
ms.assetid: 48d4a279-b51c-4ba5-81cd-ed043312b582
ms.openlocfilehash: f47cac34f6cdbdae01af98ec28be5af17edf0e25
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84620966"
---
# <a name="bypassing-the-serialization-mechanism"></a>Обход механизма сериализации

Как вы видели, платформа предоставляет по умолчанию способ чтения и записи данных в файлы и из них. Сериализация через объект архива подходит для большого числа приложений. Такое приложение считывает файл полностью в память, позволяет пользователю обновить файл, а затем снова записывает обновленную версию на диск.

Однако некоторые приложения работают с данными по-разному, и для этих приложений сериализация с помощью архива не подходит. К примерам относятся программы баз данных, программы, которые изменяют только части больших файлов, программы, которые пишут текстовые файлы, и программы, которые совместно используют файлы данных.

В таких случаях функцию [сериализации](reference/cobject-class.md#serialize) можно переопределить другим способом для выполнения действий с файлами с помощью объекта [кфиле](reference/cfile-class.md) , а не объекта [CArchive](reference/carchive-class.md) .

Вы можете использовать `Open` функции- `Read` члены класса,,, и, `Write` `Close` `Seek` `CFile` чтобы открыть файл, переместить указатель файла (Seek) в определенную точку файла, прочитать запись (заданное число байтов) в этой точке, разрешить пользователю обновить запись, затем повторить поиск до той же точки и записать запись обратно в файл. Платформа откроет файл, и вы можете использовать `GetFile` функцию-член класса, `CArchive` чтобы получить указатель на `CFile` объект. Для еще более сложного и гибкого использования можно переопределить функции члена класса [онсаведокумент](reference/cdocument-class.md#onsavedocument) и [OpenDocument](reference/cdocument-class.md#onopendocument) `CWinApp` . Дополнительные сведения см. в разделе Class [кфиле](reference/cfile-class.md) в *справочнике по MFC*.

В этом сценарии `Serialize` Переопределение не выполняет никаких действий, если, например, требуется, чтобы оно читало и записало заголовок файла, чтобы сохранить его в актуальном состоянии при закрытии документа.

## <a name="see-also"></a>См. также раздел

[Использование документов](using-documents.md)
