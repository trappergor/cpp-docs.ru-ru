---
title: Пример. Отображение диалогового окна через команду меню
ms.date: 09/07/2019
helpviewer_keywords:
- MFC dialog boxes [MFC], examples
- MFC dialog boxes [MFC], displaying
- modeless dialog boxes [MFC], displaying
- dialog boxes [MFC], MFC
- modal dialog boxes [MFC], displaying
- examples [MFC], dialog boxes
- menu items [MFC], examples
ms.assetid: e8692549-acd7-478f-9c5e-ba310ce8cccd
ms.openlocfilehash: ec4e0495519db3e30213d8abb9292409f2110e3c
ms.sourcegitcommit: 8e285a766523e653aeeb34d412dc6f615ef7b17b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/21/2020
ms.locfileid: "80078831"
---
# <a name="example-displaying-a-dialog-box-via-a-menu-command"></a>Пример. Отображение диалогового окна через команду меню

Этот раздел содержит следующие процедуры:

- Отображение модального диалогового окна с помощью команды меню.

- Отображение немодального диалогового окна с помощью команды меню.

Оба образца процедур предназначены для приложений MFC и будут работать в приложении, созданном с помощью [мастера приложений MFC](../mfc/reference/mfc-application-wizard.md).

В процедурах используются следующие имена и значения:

|Элемент|Имя или значение|
|----------|-------------------|
|Приложение|дисплайдиалог|
|Команда меню|Команда "тест" в меню "вид"; Идентификатор команды = ID_VIEW_TEST|
|.|Диалоговое окно "тест"; Класс = Ктестдиалог; Заголовочный файл = Тестдиалог. h; Переменная = тестдлг, птестдлг|
|Обработчик команд|онвиевтест|

### <a name="to-display-a-modal-dialog-box"></a>Отображение модального диалогового окна

1. Создайте команду меню; см. раздел [Создание меню или пунктов меню](../windows/creating-a-menu.md).

1. Создайте диалоговое окно. см. раздел [Запуск редактора диалоговых окон](../windows/creating-a-new-dialog-box.md).

1. Добавьте класс для диалогового окна. Дополнительные сведения см. [в разделе Добавление класса](../ide/adding-a-class-visual-cpp.md) .

1. В **представление классов**выберите класс Document (кдисплайдиалогдок). В окне **Свойства** нажмите кнопку **События**. Дважды щелкните идентификатор команды меню (ID_VIEW_TEST). Затем щелкните стрелку вниз и выберите **\<добавить > онвиевтест**.

   Если вы добавили команду меню в мэйнфрейм приложения MDI, выберите вместо этого класс приложения (Кдисплайдиалогапп).

1. Добавьте следующую инструкцию include в Кдисплайдиалогдок. cpp (или Кдисплайдиалогапп. cpp) после существующих инструкций include:

   ```cpp
   #include "TestDialog.h"
   ```

1. Добавьте следующий код, чтобы `OnViewTest` для реализации функции:

   ```cpp
   CTestDialog testdlg;
   testdlg.DoModal();
   ```

### <a name="to-display-a-modeless-dialog-box"></a>Отображение немодального диалогового окна

1. Выполните первые четыре шага для отображения модального диалогового окна, за исключением выбора класса представления (Кдисплайдиалогвиев) на шаге 4.

1. Изменить Дисплайдиалогвиев. h:

   - Объявите класс диалогового окна перед объявлением первого класса:

   ```cpp
   class CTestDialog;
   ```

   - Объявите указатель на диалоговое окно после открытого раздела Attributes:

   ```cpp
   CTestDialog* m_pTestDlg;
   ```

1. Измените Дисплайдиалогвиев. cpp:

   - Добавьте следующую инструкцию include после существующих операторов Include:

   ```cpp
   #include "TestDialog.h"
   ```

   - Добавьте в конструктор следующий код:

   ```cpp
   m_pTestDlg = NULL;
   ```

   - Добавьте в деструктор следующий код:

   ```cpp
   delete m_pTestDlg;
   ```

   - Добавьте следующий код, чтобы `OnViewTest` для реализации функции:

   ```cpp
   if (NULL == m_pTestDlg)
   {
      m_pTestDlg = new CTestDialog(this);
      m_pTestDlg->Create(CTestDialog::IDD, this);
   }
   m_pTestDlg->ShowWindow(SW_SHOW);
   ```

## <a name="see-also"></a>См. также:

[Диалоговые окна](../mfc/dialog-boxes.md)<br/>
[Модальные и немодальные диалоговые окна](../mfc/modal-and-modeless-dialog-boxes.md)
