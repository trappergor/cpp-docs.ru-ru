---
title: Наследование класса от CObject
ms.date: 11/04/2016
helpviewer_keywords:
- DECLARE_DYNCREATE macro [MFC]
- DECLARE_SERIAL macro [MFC]
- macros [MFC], serialization
- serialization [MFC], macros
- DECLARE_DYNAMIC macro [MFC]
- derived classes [MFC], from CObject
- CObject class [MFC], deriving serializable classes
- CObject class [MFC], deriving from
ms.assetid: 5ea4ea41-08b5-4bd8-b247-c5de8c152a27
ms.openlocfilehash: f4c01538877d8517cf3394d9e0108ce3a9df2900
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84621940"
---
# <a name="deriving-a-class-from-cobject"></a>Наследование класса от CObject

В этой статье описаны минимальные действия, необходимые для получения класса от [CObject](reference/cobject-class.md). `CObject`В других статьях о классах описаны действия, которые необходимо выполнить, чтобы воспользоваться преимуществами конкретных `CObject` функций, таких как сериализация и поддержка отладки диагностики.

В обсуждениях `CObject` термины «файл интерфейса» и «файл реализации» часто используются. Файл интерфейса (часто называемый файлом заголовка или. H-файл) содержит объявление класса и любые другие сведения, необходимые для использования класса. Файл реализации (или. CPP-файл) содержит определение класса, а также код, реализующий функции-члены класса. Например, для класса с именем `CPerson` обычно создается файл интерфейса с именем Person. H и файл реализации с именем PERSON. CPP. Однако для некоторых небольших классов, которые не будут совместно использоваться приложениями, иногда бывает проще объединить интерфейс и реализацию в один. Файл CPP.

При создании производного класса можно выбрать один из четырех уровней функциональности `CObject` :

- Базовая функциональность: не поддерживает сведения о классе времени выполнения или сериализацию, но включает управление памятью диагностики.

- Основные функции и поддержка сведений о классах времени выполнения.

- Базовая функциональность и поддержка сведений о классе времени выполнения и динамическое создание.

- Базовая функциональность и поддержка сведений о классе времени выполнения, динамическом создании и сериализации.

Классы, предназначенные для повторного использования (которые впоследствии будут служить базовыми классами), должны по крайней мере включать поддержку классов времени выполнения и сериализации, если предполагается любая будущая сериализация.

Уровень функциональности выбирается с помощью специальных макросов объявления и реализации в объявлении и реализации классов, из которых производятся наследования `CObject` .

В следующей таблице показана связь между макросами, используемыми для поддержки сериализации и сведениями о времени выполнения.

### <a name="macros-used-for-serialization-and-run-time-information"></a>Макросы, используемые для сериализации и сведения о времени выполнения

|Используемый макрос|CObject:: IsKindOf|Крунтимекласс::<br /><br /> CreateObject|CArchive:: operator>><br /><br /> CArchive:: operator<<|
|----------------|-----------------------|--------------------------------------|-------------------------------------------------------|
|Основные `CObject` функциональные возможности|Нет|Нет|Нет|
|`DECLARE_DYNAMIC`|Да|Нет|Нет|
|`DECLARE_DYNCREATE`|Да|Да|Нет|
|`DECLARE_SERIAL`|Да|Да|Да|

#### <a name="to-use-basic-cobject-functionality"></a>Использование базовой функциональности CObject

1. Используйте стандартный синтаксис C++ для наследования класса от `CObject` (или из класса, производного от `CObject` ).

   В следующем примере показан простейший вариант, производный от класса `CObject` :

   [!code-cpp[NVC_MFCCObjectSample#1](codesnippet/cpp/deriving-a-class-from-cobject_1.h)]

Однако обычно может потребоваться переопределить некоторые `CObject` функции члена, чтобы обрабатывались особенности нового класса. Например, обычно может потребоваться переопределить `Dump` функцию, `CObject` чтобы предоставить выходные данные отладки для содержимого класса. Дополнительные сведения о переопределении см `Dump` . в статье [Настройка дампа объекта](/previous-versions/visualstudio/visual-studio-2010/sc15kz85(v=vs.100))статьи. Также может потребоваться переопределить `AssertValid` функцию, `CObject` чтобы обеспечить настраиваемое тестирование для проверки согласованности элементов данных объектов класса. Описание переопределения см `AssertValid` . в разделе [MFC ASSERT_VALID и CObject:: AssertValid](reference/diagnostic-services.md#assert_valid).

В статье [указание уровней функциональности](specifying-levels-of-functionality.md) описывается, как указать другие уровни функциональности, включая сведения о классе времени выполнения, динамическое создание объектов и сериализацию.

## <a name="see-also"></a>См. также раздел

[Использование CObject](using-cobject.md)
