---
title: Печать по умолчанию
ms.date: 11/04/2016
helpviewer_keywords:
- default printing
- printing [MFC], default
- defaults, printing
ms.assetid: 0f698459-0fc9-4d43-97da-29cf0f65daa2
ms.openlocfilehash: 9ca79ec69037b960e7c455f6ab8abd8833b9a8a0
ms.sourcegitcommit: c21b05042debc97d14875e019ee9d698691ffc0b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/09/2020
ms.locfileid: "84618587"
---
# <a name="how-default-printing-is-done"></a>Печать по умолчанию

В этой статье описывается процесс печати по умолчанию в Windows с точки зрения платформы MFC.

В приложениях MFC класс View имеет функцию-член с именем `OnDraw` , которая содержит весь код рисования. `OnDraw`принимает указатель на объект [CDC](reference/cdc-class.md) в качестве параметра. Этот `CDC` объект представляет контекст устройства для получения образа, созданного `OnDraw` . Когда окно, отображающее документ, получает сообщение [WM_PAINT](/windows/win32/gdi/wm-paint) , платформа вызывает `OnDraw` и передает его контексту устройства для экрана (объект [кпаинтдк](reference/cpaintdc-class.md) , который должен быть особым). Соответственно, `OnDraw` выходные данные попадают на экран.

При программировании для Windows отправка выходных данных на принтер очень напоминает отправку вывода на экран. Это обусловлено тем, что интерфейс графических устройств (GDI) Windows не зависит от оборудования. Вы можете использовать одни и те же функции GDI для отображения экрана или для печати просто с помощью соответствующего контекста устройства. Если `CDC` объект, который `OnDraw` получает, представляет принтер, `OnDraw` выходные данные отправляются на принтер.

Это объясняет, как приложения MFC могут выполнять простую печать, не требуя дополнительных усилий с вашей стороны. Платформа отвечает за отображение диалогового окна Печать и создание контекста устройства для принтера. Когда пользователь выбирает команду "Печать" из меню "файл", представление передает контекст этого устройства в `OnDraw` , который рисует документ на принтере.

Однако существуют значительные различия между печатью и экраном. При печати необходимо разделить документ на отдельные страницы и отображать их по одному за раз, а не отображать какую-либо часть, видимую в окне. В качестве предела необходимо учитывать размер бумаги (будь то размер Letter, допустимый размер или конверт). Может потребоваться печать на различных ориентациях, например в альбомной или портретной ориентации. Библиотека Microsoft Foundation Class не может предсказать, как приложение будет выполнять эти проблемы, поэтому оно предоставляет протокол для добавления этих возможностей.

Этот Протокол описан в статье [многостраничные документы](multipage-documents.md).

## <a name="see-also"></a>См. также раздел

[Вывод на печать](printing.md)
