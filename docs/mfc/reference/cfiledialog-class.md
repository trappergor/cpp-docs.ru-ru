---
title: Класс CFileDialog
ms.date: 11/04/2016
f1_keywords:
- CFileDialog
- AFXDLGS/CFileDialog
- AFXDLGS/CFileDialog::CFileDialog
- AFXDLGS/CFileDialog::AddCheckButton
- AFXDLGS/CFileDialog::AddComboBox
- AFXDLGS/CFileDialog::AddControlItem
- AFXDLGS/CFileDialog::AddEditBox
- AFXDLGS/CFileDialog::AddMenu
- AFXDLGS/CFileDialog::AddPlace
- AFXDLGS/CFileDialog::AddPushButton
- AFXDLGS/CFileDialog::AddRadioButtonList
- AFXDLGS/CFileDialog::AddSeparator
- AFXDLGS/CFileDialog::AddText
- AFXDLGS/CFileDialog::ApplyOFNToShellDialog
- AFXDLGS/CFileDialog::DoModal
- AFXDLGS/CFileDialog::EnableOpenDropDown
- AFXDLGS/CFileDialog::EndVisualGroup
- AFXDLGS/CFileDialog::GetCheckButtonState
- AFXDLGS/CFileDialog::GetControlItemState
- AFXDLGS/CFileDialog::GetControlState
- AFXDLGS/CFileDialog::GetEditBoxText
- AFXDLGS/CFileDialog::GetFileExt
- AFXDLGS/CFileDialog::GetFileName
- AFXDLGS/CFileDialog::GetFileTitle
- AFXDLGS/CFileDialog::GetFolderPath
- AFXDLGS/CFileDialog::GetIFileDialogCustomize
- AFXDLGS/CFileDialog::GetIFileOpenDialog
- AFXDLGS/CFileDialog::GetIFileSaveDialog
- AFXDLGS/CFileDialog::GetNextPathName
- AFXDLGS/CFileDialog::GetOFN
- AFXDLGS/CFileDialog::GetPathName
- AFXDLGS/CFileDialog::GetReadOnlyPref
- AFXDLGS/CFileDialog::GetResult
- AFXDLGS/CFileDialog::GetResults
- AFXDLGS/CFileDialog::GetSelectedControlItem
- AFXDLGS/CFileDialog::GetStartPosition
- AFXDLGS/CFileDialog::HideControl
- AFXDLGS/CFileDialog::IsPickFoldersMode
- AFXDLGS/CFileDialog::MakeProminent
- AFXDLGS/CFileDialog::RemoveControlItem
- AFXDLGS/CFileDialog::SetCheckButtonState
- AFXDLGS/CFileDialog::SetControlItemState
- AFXDLGS/CFileDialog::SetControlItemText
- AFXDLGS/CFileDialog::SetControlLabel
- AFXDLGS/CFileDialog::SetControlState
- AFXDLGS/CFileDialog::SetControlText
- AFXDLGS/CFileDialog::SetDefExt
- AFXDLGS/CFileDialog::SetEditBoxText
- AFXDLGS/CFileDialog::SetProperties
- AFXDLGS/CFileDialog::SetSelectedControlItem
- AFXDLGS/CFileDialog::SetTemplate
- AFXDLGS/CFileDialog::StartVisualGroup
- AFXDLGS/CFileDialog::UpdateOFNFromShellDialog
- AFXDLGS/CFileDialog::OnButtonClicked
- AFXDLGS/CFileDialog::OnCheckButtonToggled
- AFXDLGS/CFileDialog::OnControlActivating
- AFXDLGS/CFileDialog::OnFileNameChange
- AFXDLGS/CFileDialog::OnFileNameOK
- AFXDLGS/CFileDialog::OnFolderChange
- AFXDLGS/CFileDialog::OnInitDone
- AFXDLGS/CFileDialog::OnItemSelected
- AFXDLGS/CFileDialog::OnLBSelChangedNotify
- AFXDLGS/CFileDialog::OnShareViolation
- AFXDLGS/CFileDialog::OnTypeChange
- AFXDLGS/CFileDialog::m_ofn
helpviewer_keywords:
- CFileDialog [MFC], CFileDialog
- CFileDialog [MFC], AddCheckButton
- CFileDialog [MFC], AddComboBox
- CFileDialog [MFC], AddControlItem
- CFileDialog [MFC], AddEditBox
- CFileDialog [MFC], AddMenu
- CFileDialog [MFC], AddPlace
- CFileDialog [MFC], AddPushButton
- CFileDialog [MFC], AddRadioButtonList
- CFileDialog [MFC], AddSeparator
- CFileDialog [MFC], AddText
- CFileDialog [MFC], ApplyOFNToShellDialog
- CFileDialog [MFC], DoModal
- CFileDialog [MFC], EnableOpenDropDown
- CFileDialog [MFC], EndVisualGroup
- CFileDialog [MFC], GetCheckButtonState
- CFileDialog [MFC], GetControlItemState
- CFileDialog [MFC], GetControlState
- CFileDialog [MFC], GetEditBoxText
- CFileDialog [MFC], GetFileExt
- CFileDialog [MFC], GetFileName
- CFileDialog [MFC], GetFileTitle
- CFileDialog [MFC], GetFolderPath
- CFileDialog [MFC], GetIFileDialogCustomize
- CFileDialog [MFC], GetIFileOpenDialog
- CFileDialog [MFC], GetIFileSaveDialog
- CFileDialog [MFC], GetNextPathName
- CFileDialog [MFC], GetOFN
- CFileDialog [MFC], GetPathName
- CFileDialog [MFC], GetReadOnlyPref
- CFileDialog [MFC], GetResult
- CFileDialog [MFC], GetResults
- CFileDialog [MFC], GetSelectedControlItem
- CFileDialog [MFC], GetStartPosition
- CFileDialog [MFC], HideControl
- CFileDialog [MFC], IsPickFoldersMode
- CFileDialog [MFC], MakeProminent
- CFileDialog [MFC], RemoveControlItem
- CFileDialog [MFC], SetCheckButtonState
- CFileDialog [MFC], SetControlItemState
- CFileDialog [MFC], SetControlItemText
- CFileDialog [MFC], SetControlLabel
- CFileDialog [MFC], SetControlState
- CFileDialog [MFC], SetControlText
- CFileDialog [MFC], SetDefExt
- CFileDialog [MFC], SetEditBoxText
- CFileDialog [MFC], SetProperties
- CFileDialog [MFC], SetSelectedControlItem
- CFileDialog [MFC], SetTemplate
- CFileDialog [MFC], StartVisualGroup
- CFileDialog [MFC], UpdateOFNFromShellDialog
- CFileDialog [MFC], OnButtonClicked
- CFileDialog [MFC], OnCheckButtonToggled
- CFileDialog [MFC], OnControlActivating
- CFileDialog [MFC], OnFileNameChange
- CFileDialog [MFC], OnFileNameOK
- CFileDialog [MFC], OnFolderChange
- CFileDialog [MFC], OnInitDone
- CFileDialog [MFC], OnItemSelected
- CFileDialog [MFC], OnLBSelChangedNotify
- CFileDialog [MFC], OnShareViolation
- CFileDialog [MFC], OnTypeChange
- CFileDialog [MFC], m_ofn
ms.assetid: fda4fd3c-08b8-4ce0-8e9d-7bab23f8c6c0
ms.openlocfilehash: 197dec23b4c715b0bca35976f9fa53a055cdd78f
ms.sourcegitcommit: c123cc76bb2b6c5cde6f4c425ece420ac733bf70
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/14/2020
ms.locfileid: "81373905"
---
# <a name="cfiledialog-class"></a>Класс CFileDialog

Инкапсулирует общий диалоговый ящик, который используется для операций по открытию файла или сохранению файлов.

## <a name="syntax"></a>Синтаксис

```
class CFileDialog : public CCommonDialog
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CFileDialog::CFileDialog](#cfiledialog)|Формирует объект `CFileDialog`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CFileДиалог::AddCheckButton](#addcheckbutton)|Добавляет кнопку проверки в диалог.|
|[CFileДиалог::AddComboBox](#addcombobox)|Добавляет комбо-коробку в диалог.|
|[CFileДиалог::AddControlItem](#addcontrolitem)|Добавляет элемент в элемент управления контейнером в диалоге.|
|[CFileDialog::AddEditBox](#addeditbox)|Добавляет в диалог коробку для отосващения.|
|[CFileДиалог::AddMenu](#addmenu)|Добавляет меню в диалог.|
|[CFileДиалог::AddPlace](#addplace)|Перегружен. Добавляет папку в список мест, доступных пользователю для открытия или сохранения элементов.|
|[CFileДиалог::AddPushButton](#addpushbutton)|Добавляет кнопку в диалог.|
|[CFileDialog::AddRadioButtonList](#addradiobuttonlist)|Добавляет кнопку опции (также известную как радиокнопка) в диалог.|
|[CFileDialog:AddSeparator](#addseparator)|Добавляет сепаратор в диалог.|
|[CFileДиалог::AddText](#addtext)|Добавляет текстовое содержимое в диалог.|
|[CFileDialog::ApplyOFNToShellDialog](#applyofntoshelldialog)|Обновляет состояние `CFileDialog` параметра и флагов, хранящихся в переменной `m_ofn` участника.|
|[CFileDialog::DoModal](#domodal)|Отображает диалоговую коробку и позволяет пользователю сделать выбор.|
|[CFileДиалог::EnableOpenDropDown](#enableopendropdown)|Позволяет высадить список на **кнопке Open** или **Сохранить** в диалоге.|
|[CFileДиалог::EndVisualGroup](#endvisualgroup)|Остановка добавления элементов в визуальную группу в диалоге.|
|[CFileДиалог::GetCheckButtonState](#getcheckbuttonstate)|Получает текущее состояние кнопки проверки (чек-бокс) в диалоге.|
|[CFileДиалог::GetControlItemState](#getcontrolitemstate)|Получает текущее состояние элемента в контейнерном контроле, найденном в диалоге.|
|[CFileДиалог:GetControlState](#getcontrolstate)|Получает текущую видимость и включенные состояния заданного элемента управления.|
|[CFileDialog::GetEditBoxText](#geteditboxtext)|Получает текущий текст в элементе управления коробкой редактирования.|
|[CFileДиалог::GetFileExt](#getfileext)|Возвращает расширение выбранного файла.|
|[CFileДиалог::GetFileName](#getfilename)|Возвращает имя файла выбранного файла.|
|[CFileДиалог::GetFileTitle](#getfiletitle)|Возвращает название выбранного файла.|
|[CFileDialog::GetFolderPath](#getfolderpath)|Извлекает путь в настоящее время открытой папки или каталога для Explorer стиле **Открыть** или **Сохранить как** общий диалоговый ящик.|
|[CFileDialog::GetIFileDialogCustomize](#getifiledialogcustomize)|Извлекает внутренний объект COM `CFileDialog` для настраиваемого объекта.|
|[CFileDialog::GetIFileOpenDialog](#getifileopendialog)|Извлекает внутренний объект `CFileDialog` COM для используемого в качестве окна диалога **Open** file.|
|[CFileDialog::GetIFileSaveDialog](#getifilesavedialog)|Извлекает внутренний объект `CFileDialog` COM для файла, используемого в качестве файла **"Сохранить".**|
|[CFileДиалог::GetNextPathName](#getnextpathname)|Возвращает полный путь следующего выбранного файла.|
|[CFileDialog::GetOFN](#getofn)|Извлекает `OPENFILENAME` структуру `CFileDialog` объекта.|
|[CFileДиалог::GetPathName](#getpathname)|Возвращает полный путь выбранного файла.|
|[CFileDialog::GetReadOnlyPref](#getreadonlypref)|Возвращает только для чтения статус выбранного файла.|
|[CFileДиалог::GetResult](#getresult)|Получает выбор, сделанный пользователем в диалоге.|
|[CFileДиалог::GetResults](#getresults)|Получает выбор пользователя в диалоге, который позволяет несколько отбор.|
|[CFileDialog::GetSelectedControlItem](#getselectedcontrolitem)|Получает определенный элемент из заданного управления контейнером в диалоге.|
|[CFileДиалог::GetStartPosition](#getstartposition)|Возвращает положение первого элемента списка имен файла.|
|[CFileДиалог::HideControl](#hidecontrol)|Сохраняет указанный элемент управления в **Open** открытом **или** обычном диалоговом поле в стиле Explorer.|
|[CFileDialog::IsPickFoldersMode](#ispickfoldersmode)|Определяет, является ли текущий диалог в режиме сборщика папок.|
|[CFileДиалог::MakeProminent](#makeprominent)|Размещает элемент управления в диалоге так, чтобы он выдерживается по сравнению с другими дополнительными элементами управления.|
|[CFileДиалог::RemoveControlItem](#removecontrolitem)|Удаляет элемент из элемента управления контейнером в диалоге.|
|[CFileДиалог::SetCheckButtonState](#setcheckbuttonstate)|Устанавливает текущее состояние кнопки проверки (флажка) в диалоге.|
|[CFileДиалог::SetControlItemState](#setcontrolitemstate)|Устанавливает текущее состояние элемента в элементе управления контейнером, найденном в диалоге.|
|[CFileДиалог::SetControlItemText](#setcontrolitemtext)|Устанавливает текст элемента управления. Например, текст, сопровождающий кнопку радио или элемент в меню.|
|[CFileДиалог::SetControlLabel](#setcontrollabel)|Устанавливает текст, связанный с элементом управления, например текст кнопки или метку коробки редактирования.|
|[CFileДиалог::SetControlState](#setcontrolstate)|Устанавливает текущую видимость и включено состояния заданного элемента управления.|
|[CFileДиалог::SetControlText](#setcontroltext)|Устанавливает текст для заданного элемента управления в **открытом** **или** обычном диалоговом поле в стиле Explorer.|
|[CFileДиалог::SetDefExt](#setdefext)|Устанавливает расширение имени файла по умолчанию для **Открытого** **или** общего диалогового окна в стиле Explorer.|
|[CFileDialog::SetEditBoxText](#seteditboxtext)|Устанавливает текущий текст в элемент управления коробкой редактирования.|
|[CFileДиалог::SetСвойства](#setproperties)|Предоставляет хранилище свойств, которое определяет значения по умолчанию для сохраняемого элемента.|
|[CFileDialog:SetSelectedControlItem](#setselectedcontrolitem)|Устанавливает выбранное состояние конкретного элемента в группе кнопок опциона или комбо-поле, найденном в диалоге.|
|[CFileДиалог::SetTemplate](#settemplate)|Устанавливает шаблон диалогового `CFileDialog` окна для объекта.|
|[CFileДиалог::StartVisualGroup](#startvisualgroup)|Объявляет визуальную группу в диалоге. Последующие вызовы к любому методу «добавить» добавляют эти элементы в эту группу.|
|[CFileDialog::UpdateOFNFromShellDialog](#updateofnfromshelldialog)|Обновление данных, `m_ofn` хранящихся в переменной участника, в соответствии с текущим состоянием файла диалогового окна.|

### <a name="protected-methods"></a>Защищенные методы

|Имя|Описание|
|----------|-----------------|
|[CFileDialog::OnButtonClicked](#onbuttonclicked)|Вызывается при нажатии кнопки.|
|[CFileDialog::OnCheckButtonToggled](#oncheckbuttontoggled)|Вызывается, когда флажок проверен/не проверен.|
|[CFileDialog::OnControlActivating](#oncontrolactivating)|Вызывается, когда элемент управления активен.|
|[CFileDialog::OnFileName](#onfilenamechange)|Обрабатывает сообщение CDN_SELCHANGE WM_NOTIFY.|
|[CFileDialog::OnFileNameOK](#onfilenameok)|Проверяет имя файла, внесенное в поле диалога.|
|[CFileDialog::OnFolderChange](#onfolderchange)|Обрабатывает сообщение WM_NOTIFY CDN_FOLDERCHANGE.|
|[CFileDialog::OnInitDone](#oninitdone)|Обрабатывает сообщение WM_NOTIFY CDN_INITDONE.|
|[CFileDialog::OnItemS выбрано](#onitemselected)|Вызывается при выборе элемента контейнера.|
|[CFileDialog::OnLBSelchangedNotify](#onlbselchangednotify)|Позволяет выполнять пользовательские действия при изменении выбора файла.|
|[CFileDialog::OnShareНарушение](#onshareviolation)|Ручки совместного доля нарушений.|
|[CFileDialog::OnTypeChange](#ontypechange)|Обрабатывает сообщение CDN_TYPECHANGE WM_NOTIFY.|

### <a name="public-data-members"></a>Открытые члены данных

|Имя|Описание|
|----------|-----------------|
|[CFileДиалог::m_ofn](#m_ofn)|Структура `OPENFILENAME` Windows. Обеспечивает доступ к основным параметрам файлового диалогового окна.|

## <a name="remarks"></a>Remarks

Общие файлдиалоговые коробки позволяют реализовать диалоговые коробки для выбора файлов, например, **Open File** и **Save As,** в соответствии со стандартами Windows.

Вы можете `CFileDialog` использовать, как это с конструктором при условии, `CFileDialog` или вы можете получить свой собственный класс диалоговые окна и написать конструктор в соответствии с вашими потребностями. В любом случае, эти диалоговые коробки будут вести себя как стандартные диалоговые коробки MFC, потому что они получены из [класса CCommonDialog.](../../mfc/reference/ccommondialog-class.md) `CFileDialog`опирается на COMMDLG. DLL файл, который включен в Windows.

И внешний вид и `CFileDialog` функциональность с Windows Vista или позже отличаются от более ранних версий Windows. По `CFileDialog` умолчанию автоматически используется новая Windows Vista или более поздний стиль без изменений кода, если программа компилируется и запускается под Windows Vista или позже. Используйте параметр *bVistaStyle* в конструкторе, чтобы вручную переопределить это автоматическое обновление. Исключением из автоматического обновления являются индивидуальные диалоговые коробки. Они не будут преобразованы в новый стиль. Для получения дополнительной информации о конструкторе, [см. CFileDialog::CFileDialog](#cfiledialog).

> [!NOTE]
> Система идентификатора управления отличается в Windows Vista `CFileDialog`или позже от более ранних версий Windows при использовании . Прежде чем можно будет `CFileDialog` портить проект из более ранней версии Windows, необходимо обновить все ссылки на элементы управления в коде.

Некоторые `CFileDialog` методы не поддерживаются в Windows Vista или позже. Проверьте тему индивидуального метода для получения информации о том, поддерживается ли метод. Кроме того, следующие унаследованные функции не поддерживаются в Windows Vista или позже:

- [CDialog::OnInitDialog](../../mfc/reference/cdialog-class.md#oninitdialog)

- [CDialog::OnSetFont](../../mfc/reference/cdialog-class.md#onsetfont)

Сообщения окон для `CFileDialog` класса варьируются в зависимости от того, какую операционную систему вы используете. Например, Windows XP не поддерживает [CDialog::OnCancel](../../mfc/reference/cdialog-class.md#oncancel) и [CDialog::OnOK](../../mfc/reference/cdialog-class.md#onok) для `CFileDialog` класса. Тем не менее, Windows Vista и более поздние операционные системы поддерживают их. Для получения дополнительной информации о различных сообщениях, которые генерируются и порядок, в котором они получены, [см.](../../overview/visual-cpp-samples.md)

Чтобы использовать `CFileDialog` объект, сначала создайте `CFileDialog` объект с помощью конструктора. После построения диалогового окна можно установить или изменить любые значения в [CFileDialog::m_ofn](#m_ofn) структуру для инициализации значений или состояний элементов управления диалоговым полем. Структура `m_ofn` типа `OPENFILENAME`. Для получения дополнительной [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) информации см.

После инициализации элементов управления диалоговым полем позвоните в [метод CFileDialog::DoModal](#domodal) для отображения диалогового окна, чтобы пользователь мог ввести путь и имя файла. `DoModal`возвращается ли пользователь нажат кнопку OK (IDOK) или кнопку Cancel (IDCANCEL). При `DoModal` возврате IDOK можно использовать `CFileDialog` одну из функций публичного участника для получения информации, введенной пользователем.

> [!NOTE]
> Под Windows Vista или позже, несколько вызовов [в IFileDialog::SetFileTypes](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ifiledialog-setfiletypes) вызывает ошибку. Второй вызов `SetFileTypes` для любого `CFileDialog` экземпляра вернется E_UNEXPECTED в Windows Vista или позже. Некоторые `CFileDialog` функции `SetFileTypes`метода вызова . Например, два `CFileDialog::DoModal` вызова для одного `CFileDialog` и того же экземпляра генерирует [ASSERT.](diagnostic-services.md#assert)

`CFileDialog`включает в себя несколько защищенных членов, которые позволяют выполнять пользовательские действия по устранению нарушений общего обмена, проверке имен файлов и уведомлению об изменении списка. Эти защищенные участники являются функциями обратного вызова, которые большинство приложений не должны использовать, поскольку обработка по умолчанию выполняется автоматически. Записи на карте сообщений для этих функций не требуются, поскольку они являются стандартными виртуальными функциями.

Вы можете использовать функцию Windows [CommDlgExtendedError,](/windows/win32/api/commdlg/nf-commdlg-commdlgextendederror) чтобы определить, произошла ли ошибка во время инициализации диалогового окна, и узнать больше об ошибке.

Уничтожение объектов `CFileDialog` обрабатывается автоматически. Вам не нужно звонить [cDialog::EndDialog](../../mfc/reference/cdialog-class.md#enddialog).

Чтобы позволить пользователю выбрать несколько файлов, `DoModal`установите флаг OFN_ALLOWMULTISELECT перед вызовом. Для размещения возвращенного списка нескольких имен необходимо предоставить свой собственный буфер имени файла. Сделайте это, `m_ofn.lpstrFile` заменив указателем на выделенный буфер, `CFileDialog`после того `DoModal`как вы построите, но прежде чем вы позвоните.

Кроме того, необходимо `m_ofn.nMaxFile` установить, используя количество символов в `m_ofn.lpstrFile`буфере, на который указывается. При установлении максимального количества `n`файлов, которые будут выбраны, требуемый размер буфера находится `n * (_MAX_PATH + 1) + 1`в. Первым элементом, возвращенным в буфер, является путь к папке, в которой были выбраны файлы. Для Windows Vista или коробок диалогов в более позднем стиле строки каталога и имена файлов аннулируются, с дополнительным нулевым символом после последнего имени файла. Этот формат позволяет диалоговым коробкам в стиле Explorer возвращать длинные имена файлов, включающие пробелы. Для старых диалоговых коробок строки каталога и строки имени файла разделены пробелами, а функция использует короткие имена файлов для имен файлов с пробелами.

В следующем примере показано, как использовать буфер для извлечения и списка нескольких имен файлов.

[!code-cpp[NVC_MFCFiles#23](../../atl-mfc-shared/reference/codesnippet/cpp/cfiledialog-class_1.cpp)]

Чтобы изменить размер буфера в ответ на то, что пользователь выберет несколько имен файлов, необходимо получить новый класс из `CFileDialog` метода [CFileDialog::OnFileNameChange.](#onfilenamechange)

Если вы получаете `CFileDialog`новый класс из, вы можете использовать карту сообщений для обработки любых сообщений. Чтобы расширить обработку сообщений по `CFileDialog`умолчанию, вывести класс из, добавить карту сообщений в новый класс и предоставить функции членов для новых сообщений. Вам не нужно предоставлять функцию крючка, чтобы настроить диалоговую коробку.

Чтобы настроить диалоговое окно, вывежьте класс из, `CFileDialog`предоставьте пользовательский шаблон диалогового окна и добавьте карту сообщений для обработки сообщений уведомлений из расширенных элементов управления. Передайте все необработанные сообщения базовому классу. Вам не нужно настраивать функцию крючка.

При использовании Windows Vista или более `CFileDialog`позднего стиля, вы не можете использовать карты сообщений и шаблоны диалоговых коробок. Вместо этого необходимо использовать интерфейсы COM для аналогичной функциональности.

Для получения дополнительной информации о том, как использовать, `CFileDialog`см. [Common Dialog Classes](../../mfc/common-dialog-classes.md)

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CDialog](../../mfc/reference/cdialog-class.md)

[CCommonDialog](../../mfc/reference/ccommondialog-class.md)

`CFileDialog`

## <a name="requirements"></a>Требования

**Заголовок:** afxdlgs.h

## <a name="cfiledialogaddcheckbutton"></a><a name="addcheckbutton"></a>CFileДиалог::AddCheckButton

Добавляет кнопку проверки в диалог.

```
HRESULT AddCheckButton(
    DWORD dwIDCtl,
    const CString& strLabel,
    BOOL bChecked);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор кнопки проверки для добавления.

*strLabel*<br/>
Имя кнопки проверки.

*bChecked*<br/>
Boolean, указывающий текущее состояние кнопки проверки. TRUE, если проверено; FALSE в противном случае

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddcombobox"></a><a name="addcombobox"></a>CFileДиалог::AddComboBox

Добавляет комбо-коробку в диалог.

```
HRESULT AddComboBox(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Id комбо-бокс, чтобы добавить.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddcontrolitem"></a><a name="addcontrolitem"></a>CFileДиалог::AddControlItem

Добавляет элемент в элемент управления контейнером в диалоге.

```
HRESULT AddControlItem(
    DWORD dwIDCtl,
    DWORD dwIDItem,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор управления контейнером для добавления элемента.

*dwIDItem*<br/>
Идентификатор элемента.

*strLabel*<br/>
Текст предмета.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddeditbox"></a><a name="addeditbox"></a>CFileDialog::AddEditBox

Добавляет в диалог коробку для отосващения.

```
HRESULT AddEditBox(
    DWORD dwIDCtl,
    const CString& strText);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор для добавления окна для отсылки.

*strText*<br/>
Название коробки для отсечения.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddmenu"></a><a name="addmenu"></a>CFileДиалог::AddMenu

Добавляет меню в диалог.

```
HRESULT AddMenu(
    DWORD dwIDCtl,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор меню для добавления.

*strLabel*<br/>
Название меню.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddplace"></a><a name="addplace"></a>CFileДиалог::AddPlace

Добавляет папку в список мест, доступных пользователю для открытия или сохранения элементов.

```
void AddPlace(
    LPCWSTR lpszFolder,
    FDAP fdap = FDAP_TOP) throw();

void AddPlace(
    IShellItem* psi,
    FDAP fdap = FDAP_TOP) throw();
```

### <a name="parameters"></a>Параметры

*lpszFolder*<br/>
Путь к папке, которая будет доступна пользователю. Это может быть только папка.

*fdap*<br/>
Указывает, где папка находится в списке.

*psi*<br/>
Указатель на IShellItem, представляющий папку, которая будет доступна пользователю. Это может быть только папка.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddpushbutton"></a><a name="addpushbutton"></a>CFileДиалог::AddPushButton

Добавляет кнопку в диалог.

```
HRESULT AddPushButton(
    DWORD dwIDCtl,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор кнопки для добавления.

*strLabel*<br/>
Имя кнопки.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddradiobuttonlist"></a><a name="addradiobuttonlist"></a>CFileDialog::AddRadioButtonList

Добавляет кнопку опции (также известную как радиокнопка) в диалог.

```
HRESULT AddRadioButtonList(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор группы кнопок опции для добавления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddseparator"></a><a name="addseparator"></a>CFileDialog:AddSeparator

Добавляет сепаратор в диалог.

```
HRESULT AddSeparator(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Id сепаратора добавить.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogaddtext"></a><a name="addtext"></a>CFileДиалог::AddText

Добавляет текст в диалог.

```
HRESULT AddText(
    DWORD dwIDCtl,
    const CString& strText);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор текста для добавления.

*strText*<br/>
Текстовое имя.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogapplyofntoshelldialog"></a><a name="applyofntoshelldialog"></a>CFileDialog::ApplyOFNToShellDialog

Обновляет текущее состояние [CFileDialog](../../mfc/reference/cfiledialog-class.md) на основе значений, хранящихся в структуре `m_ofn` данных.

```
void ApplyOFNToShellDialog();
```

### <a name="remarks"></a>Remarks

В версиях Windows до Windows Vista структура данных [OPENFILENAME](/previous-versions/windows/embedded/ms911906\(v=msdn.10\)) непрерывно синхронизировалась с состоянием `CFileDialog`. Любые [m_ofn](#m_ofn) изменения в переменной члена немедленно были отражены в состоянии диалогового окна. Кроме того, любые изменения состояния диалогового `m_ofn` окна немедленно обновляют переменную участника.

В Windows Vista или позже `m_ofn` значения в переменной `CFileDialog` члена и состоянии не гарантированно синхронизируются. Эта функция заставляет состояние `CFileDialog` обновления в соответствии со структурой. `m_ofn` Windows вызывает эту функцию автоматически во время [CFileDialog::DoModal](#domodal).

Для получения дополнительной информации `CFileDialog` о том, как использовать класс под Windows Vista или позже, см. [CFileDialog Class](../../mfc/reference/cfiledialog-class.md)

### <a name="example"></a>Пример

  Смотрите пример [для CFileDialog::UpdateOFNFromShellDialog](#updateofnfromshelldialog).

## <a name="cfiledialogcfiledialog"></a><a name="cfiledialog"></a>CFileДиалог::CFileДиалог

Назовите эту функцию для построения стандартного окна диалога файлов Windows.

```
explicit CFileDialog(
    BOOL bOpenFileDialog,
    LPCTSTR lpszDefExt = NULL,
    LPCTSTR lpszFileName = NULL,
    DWORD dwFlags = OFN_HIDEREADONLY | OFN_OVERWRITEPROMPT,
    LPCTSTR lpszFilter = NULL,
    CWnd* pParentWnd = NULL,
    DWORD dwSize = 0,
    BOOL bVistaStyle = TRUE);
```

### <a name="parameters"></a>Параметры

*bOpenFileДиалог*<br/>
(в) Параметр, который определяет, какой тип диалогового окна для создания. Установите его в TRUE, чтобы построить поле диалога **File Open.** Установите его на FALSE, чтобы построить **файл Сохранить как** диалоговый ящик.

*lpszDefExt*<br/>
(в) Расширение имени файла по умолчанию. Если пользователь не включает известное расширение (одно, имевавемое связь на компьютере пользователя) в поле Filename, расширение, указанное *lpszDefExt,* автоматически прикладывается к имени файла. Если этот параметр NULL, расширение не придатилось.

*lpszFileName*<br/>
(в) Начальное имя файла, которое отображается в поле Filename. Если NULL, первоначальное имя файла не отображается.

*dwFlags*<br/>
(в) Сочетание одного или нескольких флагов, которые можно использовать для настройки диалогового окна. Для описания этих флагов [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) см. Если вы `m_ofn.Flags` измените член структуры, используйте оператора bitwise-OR в своих изменениях, чтобы сохранить поведение по умолчанию нетронутым.

*lpszFilter*<br/>
(в) Серия пар строк, которые указывают фильтры, которые можно применить к файлу. Если указать фильтры файлов, в списке файлов будут отображаться только файлы, которые соответствуют критериям фильтра. Более подробную информацию о работе с файловыми фильтрами можно осмотреть в разделе «Замечания».

*pParentWnd*<br/>
(в) Указатель на родительское или владельца окна файла диалогового окна.

*dwSize*<br/>
(в) Размер конструкции. `OPENFILENAME` Это значение зависит от версии операционной системы. MFC использовал этот параметр для определения соответствующего типа диалогового окна для создания. Размер по умолчанию 0 означает, что код MFC будет определять правильный размер диалогового окна для использования на основе версии операционной системы, на которой программа запущена.

*bVistaStyle*<br/>
(в) **Заметка** Этот параметр доступен в Visual Studio 2008 и позже и вызывает диалог нового стиля, который будет использоваться только в том случае, если вы работаете в Windows Vista или позже.

Параметр, означающие стиль диалога файлов. Установите его в истинном, чтобы использовать новый стиль Vista диалогов. В противном случае будет использоваться старый стиль диалоговых коробок. Более подробную информацию о запуске под Vista можно посмотреть в разделе «Замечания».

### <a name="remarks"></a>Remarks

Либо **файл Открыть** или **файл сохранить как** диалоговый ящик построен, в зависимости от значения *bOpenFileDialog*.

Определение расширения по умолчанию с помощью *lpszDefExt* может не привести к поведению, которое вы ожидаете, потому что это редко предсказуемо, какие расширения имеют ассоциации файлов на компьютере пользователя. Если вам нужно больше контроля над приложением расширения по умолчанию, вы можете получить свой собственный класс из, `CFileDialog`и переопределить `CFileDialog::OnFileNameOK` метод для выполнения собственной обработки расширения.

Чтобы пользователь мог выбрать несколько файлов, установите OFN_ALLOWMULTISELECT флаг перед вызовом [DoModal.](#domodal) Для хранения возвращенного списка нескольких имен необходимо предоставить свой собственный буфер имени файла. Сделайте это, `m_ofn.lpstrFile` заменив указателем на выделенный буфер, после создания [CFileDialog,](../../mfc/reference/cfiledialog-class.md)но прежде чем позвонить. `DoModal` Кроме того, необходимо `m_ofn.nMaxFile` установить количество символов в `m_ofn.lpstrFile`буфере, на который указывается. Если вы установите максимальное количество файлов, которые будут выбраны в *n,* то необходимый размер буфера составляет `n`_MAX_PATH 1 евро. Пример:

[!code-cpp[NVC_MFCFiles#23](../../atl-mfc-shared/reference/codesnippet/cpp/cfiledialog-class_1.cpp)]

Чтобы пользователь мог изменить размер диалогового окна в стиле Explorer, используя мышь или клавиатуру, установите OFN_ENABLESIZING флаг. Установка этого флага необходима только в том случае, если вы предоставляете процедуру крючка или пользовательский шаблон. Флаг работает только с диалоговой коробкой в стиле Explorer; старомодные диалоговые коробки не могут быть уменьшены.

Параметр *lpszFilter* используется для определения типа имени файла, который должен отображаться в списке файлов. Первая строка в строке пары описывает фильтр; вторая строка указывает на расширение имени файла для использования. Несколько расширений могут быть определены с помощью запятой (символ ';) в качестве делимитеда. Строка заканчивается двумя символами «&#124;», за которыми следует null.) персонаж. Для этого параметра также можно использовать объект [CString.](../../atl-mfc-shared/using-cstring.md)

Например, Microsoft Excel позволяет пользователям открывать файлы с расширениями .xlc (диаграмма) или .xls (лист), среди других. Фильтр для Excel может быть написан следующим:

[!code-cpp[NVC_MFCFiles#24](../../atl-mfc-shared/reference/codesnippet/cpp/cfiledialog-class_2.cpp)]

Однако, если вы планируете использовать `OPENFILENAME` эту строку для непосредственного обновления структуры, следует разграничить строки с нулевым символом, '0', вместо вертикальных баров ('&#124;').

Параметр *bVistaStyle* применим только при запуске под Windows Vista или позже. В более ранних версиях Windows этот параметр игнорируется. Если *bVistaStyle* установлен на истину, когда вы составите программу с Visual Studio 2008 или позже, новый стиль Vista **Файл Диалог** будет использоваться. В противном случае будет использоваться предыдущий стиль MFC **File Dialog.**

Шаблоны Dialog не поддерживаются в диалогах на основе *bVistaStyle*

### <a name="example"></a>Пример

  Смотрите пример [Для CFileDialog::DoModal](#domodal).

## <a name="cfiledialogdomodal"></a><a name="domodal"></a>CFileDialog::DoModal

Вызовите эту функцию для отображения общего файла windows диалоговое окно и позволить пользователю просматривать файлы и каталоги и вводить имя файла.

```
virtual INT_PTR DoModal();
```

### <a name="return-value"></a>Возвращаемое значение

IDOK или IDCANCEL. Если IDCANCEL возвращается, позвоните в функцию Windows [CommDlgExtendedError,](/windows/win32/api/commdlg/nf-commdlg-commdlgextendederror) чтобы определить, произошла ли ошибка.

IDOK и IDCANCEL являются константами, указывающими на то, выбрал ли пользователь кнопку OK или Cancel.

### <a name="remarks"></a>Remarks

Если вы хотите инициализировать различные параметры диалогового ящика файлов, установив члены `m_ofn` структуры, вы должны сделать это перед вызовом, `DoModal`но после построения объекта диалога.

Например, если вы хотите разрешить пользователю выбрать несколько файлов, установите OFN_ALLOWMULTISELECT флаг перед вызовом, `DoModal`как показано на примере кода в этой теме.

Когда пользователь нажимает кнопки OK или Cancel от диалогового окна или выбирает опцию Close из меню управления диалогового окна, управление возвращается в приложение. Затем можно вызвать другие функции участника, чтобы получить настройки или информацию, вводимые пользователем в диалоговую будку.

`DoModal`является виртуальной функцией, `CDialog`перекрываемых из класса.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCFiles#25](../../atl-mfc-shared/reference/codesnippet/cpp/cfiledialog-class_3.cpp)]

## <a name="cfiledialogenableopendropdown"></a><a name="enableopendropdown"></a>CFileДиалог::EnableOpenDropDown

Позволяет высадить список на кнопке Open или Сохранить в диалоге.

```
HRESULT EnableOpenDropDown(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор списка выпадающих.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogendvisualgroup"></a><a name="endvisualgroup"></a>CFileДиалог::EndVisualGroup

Остановка добавления элементов в визуальную группу в диалоге.

```
HRESULT EndVisualGroup();
```

### <a name="return-value"></a>Возвращаемое значение

Возвращает S_OK в случае успеха; значение ошибки в противном случае.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetcheckbuttonstate"></a><a name="getcheckbuttonstate"></a>CFileДиалог::GetCheckButtonState

Извлекает текущее состояние кнопки проверки (чек-бокс) в диалоге.

```
HRESULT GetCheckButtonState(
    DWORD dwIDCtl,
    BOOL& bChecked);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор флажка.

*bChecked*<br/>
Состояние флажка. TRUE указывает проверенные; FALSE указывает на беспрепятственное.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetcontrolitemstate"></a><a name="getcontrolitemstate"></a>CFileДиалог::GetControlItemState

Извлекает текущее состояние элемента в элементе управления контейнера, найденного в диалоге.

```
HRESULT GetControlItemState(
    DWORD dwIDCtl,
    DWORD dwIDItem,
    CDCONTROLSTATEF& dwState);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента.

*dwState*<br/>
Ссылка на переменную, которая получает одно из дополнительных значений из перечисления CDCONTROLSTATE, которое указывает текущее состояние элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetcontrolstate"></a><a name="getcontrolstate"></a>CFileДиалог:GetControlState

Извлекает текущую видимость и включенные состояния заданного элемента управления.

```
HRESULT GetControlState(
    DWORD dwIDCtl,
    CDCONTROLSTATEF& dwState);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор элемента управления.

*dwState*<br/>
Ссылка на переменную, которая получает одно или несколько значений из перечисления CDCONTROLSTATE, которое указывает текущее состояние элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggeteditboxtext"></a><a name="geteditboxtext"></a>CFileDialog::GetEditBoxText

Извлекает текущий текст в элемент управления коробкой редактирования.

```
HRESULT GetEditBoxText(
    DWORD dwIDCtl,
    CString& strText);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор коробки для отсылки.

*strText*<br/>
Текстовое значение.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetfileext"></a><a name="getfileext"></a>CFileДиалог::GetFileExt

Вызовите эту функцию, чтобы получить расширение имени файла, внесенного в диалоговое окно.

```
CString GetFileExt() const;
```

### <a name="return-value"></a>Возвращаемое значение

Расширение имени файла.

### <a name="remarks"></a>Remarks

Например, если имя ввода файла data. TXT, `GetFileExt` возвращает "TXT".

Если `m_ofn.Flags` есть набор OFN_ALLOWMULTISELECT флага, эта строка содержит последовательность нулевых строк, при этом первой строкой является выбранный путь каталога выбранной группы файлов, за которым следуют имена всех файлов, выбранных пользователем. Для получения имен файлов используйте функции участников [GetStartPosition](#getstartposition) и [GetNextPathName.](#getnextpathname)

## <a name="cfiledialoggetfilename"></a><a name="getfilename"></a>CFileДиалог::GetFileName

Вызовите эту функцию, чтобы получить имя имени файла, внесенного в поле диалога.

```
CString GetFileName() const;
```

### <a name="return-value"></a>Возвращаемое значение

Имя файла.

### <a name="remarks"></a>Remarks

Название файла включает в себя как префикс, так и расширение. Например, `GetFileName` вернется "TEXT. DAT" для файла C: (FILES-TEXT.DAT.

Если `m_ofn.Flags` у `OFN_ALLOWMULTISELECT` него есть набор флагов, вы должны позвонить [getStartPosition](#getstartposition) и [GetNextPathName,](#getnextpathname) чтобы получить имя пути файла.

## <a name="cfiledialoggetfiletitle"></a><a name="getfiletitle"></a>CFileДиалог::GetFileTitle

Вызовите эту функцию, чтобы получить название файла, введанном в поле диалога.

```
CString GetFileTitle() const;
```

### <a name="return-value"></a>Возвращаемое значение

Название файла.

### <a name="remarks"></a>Remarks

Название файла включает в себя только его префикс, без пути или расширения. Например, `GetFileTitle` будет возвращена "TEXT" для файла C: (FILES-TEXT.DAT).

Если `m_ofn.Flags` есть набор OFN_ALLOWMULTISELECT флага, эта строка содержит последовательность нулевых строк, при этом первой строкой является выбранный путь каталога выбранной группы файлов, за которым следуют имена всех файлов, выбранных пользователем. По этой причине используйте функции участника [GetStartPosition](#getstartposition) и [GetNextPathName](#getnextpathname) для получения следующего имени файла в списке.

### <a name="example"></a>Пример

  Смотрите пример [Для CFileDialog::DoModal](#domodal).

## <a name="cfiledialoggetfolderpath"></a><a name="getfolderpath"></a>CFileDialog::GetFolderPath

Вызов исчерпайте эту функцию участника, чтобы получить путь открытой папки или каталога для открытого или общего диалогового окна в стиле Explorer.

```
CString GetFolderPath() const;
```

### <a name="return-value"></a>Возвращаемое значение

Объект [CString,](../../atl-mfc-shared/reference/cstringt-class.md) содержащий в настоящее время открытую папку или каталог.

### <a name="remarks"></a>Remarks

Коробка диалога должна быть создана в стиле OFN_EXPLORER; в противном случае метод не сможет сделать утверждение.

Этот метод можно назвать только при отображении диалогового окна. После того, как диалоговая будка будет закрыта, эта функция больше не будет работать, и метод выйдет из строя с утверждением.

## <a name="cfiledialoggetifiledialogcustomize"></a><a name="getifiledialogcustomize"></a>CFileDialog::GetIFileDialogCustomize

Извлекает указатель на внутренний объект COM для данного [CFileDialog.](../../mfc/reference/cfiledialog-class.md)

```
IFileDialogCustomize* GetIFileDialogCustomize();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на внутренний объект `CFileDialog`COM для . Это ваша ответственность, чтобы освободить этот указатель надлежащим образом.

### <a name="remarks"></a>Remarks

Используйте эту функцию только под Windows Vista или позже с объектом, который *bVistaStyle* установлен на TRUE. Если вы используете эту функцию, когда *bVistaStyle* является FALSE, он будет возвращатьNULL в режиме выпуска и бросить утверждение в режиме отладки.

Для получения дополнительной `IFileDialogCustomize` информации об интерфейсе, см. [IFileDialogCustomize](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialogcustomize)

### <a name="example"></a>Пример

Этот пример извлекает внутренний объект COM. Чтобы запустить этот пример кода, необходимо компилировать его под Windows Vista или позже.

[!code-cpp[NVC_MFC_CFileDialog#4](../../mfc/reference/codesnippet/cpp/cfiledialog-class_4.cpp)]

## <a name="cfiledialoggetifileopendialog"></a><a name="getifileopendialog"></a>CFileDialog::GetIFileOpenDialog

Извлекает указатель на внутренний объект `CFileDialog`COM для данного.

```
IFileOpenDialog* GetIFileOpenDialog();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на внутренний объект `CFileDialog`COM для . Это ваша ответственность, чтобы освободить этот указатель надлежащим образом.

### <a name="remarks"></a>Remarks

Используйте эту функцию только под Windows Vista или позже с объектом, который *bVistaStyle* установлен на TRUE. Эта функция возвращает `CFileDialog` NULL, если это не **открытое** поле диалога или если *bVistaStyle* настроен на FALSE. В этом последнем случае функция возвращает null только в режиме выпуска - в режиме отладки она будет бросать утверждение.

Для получения дополнительной `IFileOpenDialog` информации об интерфейсе, см. [IFileOpenDialog](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifileopendialog)

### <a name="example"></a>Пример

Этот пример извлекает внутренний объект COM. Чтобы запустить этот код, необходимо компилировать его под Windows Vista или позже.

[!code-cpp[NVC_MFC_CFileDialog#2](../../mfc/reference/codesnippet/cpp/cfiledialog-class_5.cpp)]

## <a name="cfiledialoggetifilesavedialog"></a><a name="getifilesavedialog"></a>CFileDialog::GetIFileSaveDialog

Извлекает указатель на внутренний объект `CFileDialog`COM для данного.

```
IFileSaveDialog* GetIFileSaveDialog();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на внутренний объект `CFileDialog`COM для . Это ваша ответственность, чтобы освободить этот указатель надлежащим образом.

### <a name="remarks"></a>Remarks

Используйте эту функцию только под Windows Vista или позже с объектом, который *bVistaStyle* установлен на TRUE. Эта функция будет возвращатьnull, если `CFileDialog` не является диалоговая коробка **Сохранить** или если *bVistaStyle* установлен на FALSE. В этом последнем случае функция возвращает null только в режиме выпуска - в режиме отладки она будет бросать утверждение.

Для получения дополнительной `IFileSaveDialog` информации об интерфейсе, см. [IFileSaveDialog](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifilesavedialog)

### <a name="example"></a>Пример

Этот пример извлекает внутренний объект COM. Чтобы запустить этот пример кода, необходимо компилировать его под Windows Vista или позже.

[!code-cpp[NVC_MFC_CFileDialog#3](../../mfc/reference/codesnippet/cpp/cfiledialog-class_6.cpp)]

## <a name="cfiledialoggetnextpathname"></a><a name="getnextpathname"></a>CFileДиалог::GetNextPathName

Вызовите эту функцию, чтобы получить следующее имя файла из группы, выбранной в диалоговом поле.

```
CString GetNextPathName(POSITION& pos) const;
```

### <a name="parameters"></a>Параметры

*pos*<br/>
Ссылка на значение POSITION, `GetNextPathName` возвращенное предыдущим или `GetStartPosition` функциональным вызовом. NULL, если конец списка был достигнут.

### <a name="return-value"></a>Возвращаемое значение

Полный путь к файлу.

### <a name="remarks"></a>Remarks

Путь имени файла включает в себя название файла плюс весь путь каталога. Например, `GetNextPathName` вернется "C:-FILES-TEXT. DAT" для файла C: (FILES-TEXT.DAT. Вы можете `GetNextPathName` использовать в цикле передних итерации, если `GetStartPosition`установить исходное положение с вызовом.

Если выбор состоит только из одного файла, это имя файла будет возвращено.

## <a name="cfiledialoggetofn"></a><a name="getofn"></a>CFileDialog::GetOFN

Извлекает связанную `OPENFILENAME` структуру.

```
const OPENFILENAME& GetOFN() const;

OPENFILENAME& GetOFN();
```

### <a name="return-value"></a>Возвращаемое значение

Структура [OPENFILENAME.](/windows/win32/api/commdlg/ns-commdlg-openfilenamew)

### <a name="remarks"></a>Remarks

Используйте вторую версию этой функции, чтобы инициализировать внешний вид **файла Open** или Файл `DoModal` сохранить как диалоговый ящик после того, **как** он построен, но прежде чем он отображается с функцией члена. Например, можно установить `lpstrTitle` `m_ofn` участника в заголовок, который вы хотите иметь в диалоговом поле.

## <a name="cfiledialoggetpathname"></a><a name="getpathname"></a>CFileДиалог::GetPathName

Вызов исключите эту функцию, чтобы получить полный путь файла, введанный в диалоговый ящик.

```
CString GetPathName() const;
```

### <a name="return-value"></a>Возвращаемое значение

Полный путь к файлу.

### <a name="remarks"></a>Remarks

Путь имени файла включает в себя название файла плюс весь путь каталога. Например, `GetPathName` вернется "C:-FILES-TEXT. DAT" для файла C: (FILES-TEXT.DAT.

Если `m_ofn.Flags` у него есть набор OFN_ALLOWMULTISELECT флага, эта строка содержит последовательность строк с нулевыми тями, при этом первой строкой является выбранный путь каталога выбранной группы файлов, за которым следуют имена всех файлов, выбранных пользователем. По этой причине используйте функции участника [GetStartPosition](#getstartposition) и [GetNextPathName](#getnextpathname) для получения следующего имени файла в списке.

### <a name="example"></a>Пример

  Смотрите пример [Для CFileDialog::DoModal](#domodal).

## <a name="cfiledialoggetreadonlypref"></a><a name="getreadonlypref"></a>CFileDialog::GetReadOnlyPref

Позвоните в эту функцию, чтобы определить, был ли выбран флажок Read Only в стандартных файлах Windows Open и File Save As как диалоговые коробки.

```
BOOL GetReadOnlyPref() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ненулевой, если выбранчекфлайта Read Only в диалоговом поле; в противном случае 0.

### <a name="remarks"></a>Remarks

Вы можете скрыть флажок Read Only, `CFileDialog` установив OFN_HIDEREADONLY стиль в конструкторе.

> [!NOTE]
> Объекты Windows `CFileDialog` Vista или более поздние объекты стиля не поддерживают эту функцию. Попытка использовать эту функцию на Windows `CFileDialog` Vista или более поздний стиль будет бросать [CNotSupportedException](../../mfc/reference/cnotsupportedexception-class.md).

## <a name="cfiledialoggetresult"></a><a name="getresult"></a>CFileДиалог::GetResult

Получает выбор, сделанный пользователем в диалоге.

```
IShellItem* GetResult() throw();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на IShellItem, представляющий выбор пользователя.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetresults"></a><a name="getresults"></a>CFileДиалог::GetResults

Извлекает выбор пользователя в диалоге, который позволяет многократно ею выбирать.

```
IShellItemArray* GetResults() throw();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на IShellItemArray, через который можно получить доступ к элементам, выбранным в диалоге.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetselectedcontrolitem"></a><a name="getselectedcontrolitem"></a>CFileDialog::GetSelectedControlItem

Извлекает определенный элемент из указанного элемента управления контейнером в диалоге.

```
HRESULT GetSelectedControlItem(
    DWORD dwIDCtl,
    DWORD& dwIDItem);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента, выбранного пользователем в элементе управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialoggetstartposition"></a><a name="getstartposition"></a>CFileДиалог::GetStartPosition

Вызов исчисляйте эту функцию участника, чтобы получить `m_ofn.Flags` положение первого имени пути файла в списке, если есть OFN_ALLOWMULTISELECT набор флага.

```
POSITION GetStartPosition() const;
```

### <a name="return-value"></a>Возвращаемое значение

Значение POSITION, которое может быть использовано для итерации; NULL, если список пуст.

## <a name="cfiledialoghidecontrol"></a><a name="hidecontrol"></a>CFileДиалог::HideControl

Вызов исчерпнив эту функцию участника, чтобы скрыть указанный элемент управления в открытом стиле Explorer или сохранить как общий диалоговый ящик.

```
void HideControl(int nID);
```

### <a name="parameters"></a>Параметры

*nID*<br/>
Идентификатор элемента управления, чтобы скрыть.

### <a name="remarks"></a>Remarks

Коробка диалога должна быть создана в стиле OFN_EXPLORER; в противном случае функция не сработает с утверждением.

## <a name="cfiledialogispickfoldersmode"></a><a name="ispickfoldersmode"></a>CFileDialog::IsPickFoldersMode

Определяет, находится ли текущий диалог в режиме сборщика папок.

```
BOOL IsPickFoldersMode() const;
```

### <a name="return-value"></a>Возвращаемое значение

TRUE, если диалог находится в режиме сборщика папок; в противном случае FALSE.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogm_ofn"></a><a name="m_ofn"></a>CFileДиалог::m_ofn

`m_ofn`представляет собой структуру типа `OPENFILENAME`. Данные в этой структуре представляют `CFileDialog`текущее состояние .

### <a name="remarks"></a>Remarks

Используйте эту структуру, чтобы инициализировать внешний вид **файла Open** или **Файл сохранить как** диалоговый ящик после того, как построить его, но прежде чем отображать его с методом [DoModal.](#domodal) Например, можно установить член *lpstrTitle* `m_ofn` в заголовок, который вы хотите иметь в диалоговом поле.

С Windows Vista или более поздний `m_ofn` стиль [CFileDialog](../../mfc/reference/cfiledialog-class.md), не гарантируется, всегда соответствуют состоянию диалогового окна. Он синхронизируется с диалоговым окном в более ранних версиях Windows. Смотрите [CFileDialog::ApplyOFNToShellDialog](#applyofntoshelldialog) и [CFileDialog::UpdateOFNFromShellDialog](#updateofnfromshelldialog) для получения дополнительной `m_ofn` информации `CFileDialog` о синхронизации структуры и состояния под Windows Vista или позже.

Windows Vista или более поздние диалоги файлов стиля `CFileDialog`не поддерживают определенных членов и флаги . В результате, они не будут иметь никакого эффекта.

Ниже приводится список участников, которые не поддерживаются Windows Vista или позже:

- `lpstrCustomFilter`

- `lpstrInitialDir`

- `lCustData`

- `lpfnHook`

- `lpTemplateName`

Следующие флаги не поддерживаются и, следовательно, не имеют `CFileDialog`никакого эффекта при использовании Windows Vista или более позднего стиля:

- OFN_ENABLEHOOK

- OFN_ENABLEINCLUDENOTIFY

- OFN_ENABLETEMPLATE

- OFN_ENABLETEMPLATEHANDLE

- OFN_EXPLORER

- OFN_EXTENSIONDIFFERENT

- OFN_HIDEREADONLY

- OFN_LONGNAMES - эффективно всегда в Windows Vista или позже

- OFN_NOLONGNAMES - эффективно всегда выключен в Windows Vista или позже

- OFN_NONETWORKBUTTON - эффективно всегда в Windows Vista или позже

- OFN_READONLY

- OFN_SHOWHELP

Более подробную информацию об этой структуре можно узнать в структуре [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) в SDK Windows.

## <a name="cfiledialogmakeprominent"></a><a name="makeprominent"></a>CFileДиалог::MakeProminent

Размещает элемент управления в диалоге так, чтобы он выдерживается по сравнению с другими элементами управления.

```
HRESULT MakeProminent(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogonbuttonclicked"></a><a name="onbuttonclicked"></a>CFileDialog::OnButtonClicked

Вызывается при нажатии кнопки.

```
virtual void OnButtonClicked(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор кнопки.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogoncheckbuttontoggled"></a><a name="oncheckbuttontoggled"></a>CFileDialog::OnCheckButtonToggled

Вызывается, когда флажок проверен или беспрепятственно.

```
virtual void OnCheckButtonToggled(
    DWORD dwIDCtl,
    BOOL bChecked);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор флажка.

*bChecked*<br/>
Проверено или беспрепятственно.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogoncontrolactivating"></a><a name="oncontrolactivating"></a>CFileDialog::OnControlActivating

Вызывается при активации элемента управления.

```
virtual void OnControlActivating(DWORD dwIDCtl);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogonfilenamechange"></a><a name="onfilenamechange"></a>CFileDialog::OnFileName

Переопределить этот метод, если вы хотите обрабатывать сообщение CDN_SELCHANGE WM_NOTIFY.

```
virtual void OnFileNameChange();
```

### <a name="remarks"></a>Remarks

Система отправляет CDN_SELCHANGE сообщение, когда пользователь выбирает новый файл или папку в списке файлов **Open** или **Сохранить как** диалоговое окно. Переопределить этот метод, если вы хотите выполнить какие-либо действия в ответ на это сообщение.

Система отправляет это сообщение только в том случае, если диалоговое окно было создано с включенным OFN_EXPLORER флагом. Для получения дополнительной информации об уведомлении [CDN_SELCHANGE](/windows/win32/dlgbox/cdn-selchange)см. Для получения информации о [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) флаге OFN_EXPLORER [Open and Save As Dialog Boxes](/windows/win32/dlgbox/open-and-save-as-dialog-boxes)см.

## <a name="cfiledialogonfilenameok"></a><a name="onfilenameok"></a>CFileDialog::OnFileNameOK

Переопределить эту функцию только в том случае, если вы хотите обеспечить пользовательскую проверку имен файлов, которые вводятся в общий файл диалоговый ящик.

```
virtual BOOL OnFileNameOK();
```

### <a name="return-value"></a>Возвращаемое значение

1, если имя файла не является действительным именем файла; в противном случае 0.

### <a name="remarks"></a>Remarks

Эта функция позволяет отклонить имя файла по любой конкретной причине приложения. Обычно эта функция не требуется, поскольку фреймворк обеспечивает проверку имен файлов по умолчанию и отображает поле сообщения при входе недействительного имени файла.

При возврате 1 диалоговое поле будет отображаться для пользователя для ввода другого имени файла. Процедура диалога отклоняет диалог, если возврат 0. Другие значения ненулевой доходности в настоящее время зарезервированы и не должны использоваться.

## <a name="cfiledialogonfolderchange"></a><a name="onfolderchange"></a>CFileDialog::OnFolderChange

Переопределить эту функцию для обработки WM_NOTIFYCDN_FOLDERCHANGE сообщения.

```
virtual void OnFolderChange();
```

### <a name="remarks"></a>Remarks

Сообщение об уведомлении отправляется при открытии новой папки в поле "Открыть" или "Сохранить как диалог".

Уведомление отправляется только в том случае, если диалоговый ящик был создан с OFN_EXPLORER стилем. Для получения дополнительной информации об уведомлении с [CDN_FOLDERCHANGEм.](/windows/win32/dlgbox/cdn-folderchange) Для получения информации о [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) стиле OFN_EXPLORER см. [Open and Save As Dialog Boxes](/windows/win32/dlgbox/open-and-save-as-dialog-boxes)

## <a name="cfiledialogoninitdone"></a><a name="oninitdone"></a>CFileDialog::OnInitDone

Переопределить эту функцию для обработки сообщения WM_NOTIFY CDN_INITDONE.

```
virtual void OnInitDone();
```

### <a name="remarks"></a>Remarks

Система отправляет это сообщение о уведомлении, когда система закончила организацию управления в **поле Open** или Save As **As as** dialog, чтобы освободить место для управления детской диалоговой будкой.

Система отправляет это только в том случае, если диалоговый ящик был создан с OFN_EXPLORER стилем. Для получения дополнительной информации об уведомлении [CDN_INITDONE](/windows/win32/dlgbox/cdn-initdone)см. Для получения информации о [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) стиле OFN_EXPLORER см. [Open and Save As Dialog Boxes](/windows/win32/dlgbox/open-and-save-as-dialog-boxes)

> [!NOTE]
> Windows Vista или более поздние диалоги файлов стиля не поддерживают эту функцию. Попытка использовать эту функцию на Windows Vista или более поздний диалог файла стиля будет бросать [CNotSupportedException](../../mfc/reference/cnotsupportedexception-class.md).

## <a name="cfiledialogonitemselected"></a><a name="onitemselected"></a>CFileDialog::OnItemS выбрано

Вызывается при выборе элемента контейнера.

```
virtual void OnItemSelected(
    DWORD dwIDCtl,
    DWORD dwIDItem);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogonlbselchangednotify"></a><a name="onlbselchangednotify"></a>CFileDialog::OnLBSelchangedNotify

Эта функция вызывается всякий раз, когда текущий выбор в поле списка собирается измениться.

```
virtual void OnLBSelChangedNotify(
    UINT nIDBox,
    UINT iCurSel,
    UINT nCode);
```

### <a name="parameters"></a>Параметры

*nIDBox*<br/>
Идентификатор коробки списка или комбо-бокса, в котором произошел выбор.

*iCurSel*<br/>
Индекс текущего выбора.

*nКод*<br/>
Код уведомления управления. Этот параметр должен иметь одно из следующих значений:

- CD_LBSELCHANGE Определяет *iCurSel* является выбранным элементом в поле списка с одним выбором.

- CD_LBSELSUB указывает, что *iCurSel* больше не выбирается в поле списка нескольких выборов.

- CD_LBSELADD указывает, что *iCurSel* выбран в поле списка нескольких выборов.

- CD_LBSELNOITEMS указывает, что в поле списка многовыборных нет выбора.

### <a name="remarks"></a>Remarks

Переопределить эту функцию, чтобы обеспечить пользовательскую обработку изменений выбора в поле списка. Например, эту функцию можно использовать для отображения прав доступа или изменения даты каждого файла, выбранного пользователем.

## <a name="cfiledialogonshareviolation"></a><a name="onshareviolation"></a>CFileDialog::OnShareНарушение

Переизобить эту функцию, чтобы обеспечить пользовательскую обработку нарушений доли.

```
virtual UINT OnShareViolation(LPCTSTR lpszPathName);
```

### <a name="parameters"></a>Параметры

*lpszPathName*<br/>
Путь файла, на котором произошло нарушение доли.

### <a name="return-value"></a>Возвращаемое значение

Одно из следующих значений:

- OFN_SHAREFALLTHROUGH Имя файла возвращается из окна диалога.

- OFN_SHARENOWARN Никаких дальнейших действий предпринимать не требуется.

- OFN_SHAREWARN Пользователь получает стандартное предупреждение за эту ошибку.

### <a name="remarks"></a>Remarks

Обычно эта функция не требуется, поскольку система обеспечивает проверку нарушений общего пользования по умолчанию и отображает окно сообщений в случае нарушения общего сообщения.

Если вы хотите отключить проверку нарушения доли, используйте bitwise OR `m_ofn.Flags`оператора, чтобы объединить OFN_SHAREAWARE флага с .

## <a name="cfiledialogontypechange"></a><a name="ontypechange"></a>CFileDialog::OnTypeChange

Переопределить эту функцию для обработки WM_NOTIFYCDN_TYPECHANGE сообщения.

```
virtual void OnTypeChange();
```

### <a name="remarks"></a>Remarks

Сообщение об уведомлении отправляется, когда пользователь выбирает новый тип файла из списка типов файлов в поле "Открытый" или "Сохранить как диалоговый".

Уведомление отправляется только в том случае, если диалоговый ящик был создан с OFN_EXPLORER стилем. Для получения дополнительной информации об уведомлении [CDN_TYPECHANGE](/windows/win32/dlgbox/cdn-typechange)см. Для получения информации о [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew) стиле OFN_EXPLORER см. [Open and Save As Dialog Boxes](/windows/win32/dlgbox/open-and-save-as-dialog-boxes)

## <a name="cfiledialogremovecontrolitem"></a><a name="removecontrolitem"></a>CFileДиалог::RemoveControlItem

Удаляет элемент из элемента управления контейнером в диалоге.

```
HRESULT RemoveControlItem(
    DWORD dwIDCtl,
    DWORD dwIDItem);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор управления контейнером для удаления элемента.

*dwIDItem*<br/>
Идентификатор элемента.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcheckbuttonstate"></a><a name="setcheckbuttonstate"></a>CFileДиалог::SetCheckButtonState

Устанавливает текущее состояние кнопки проверки (флажка) в диалоге.

```
HRESULT SetCheckButtonState(
    DWORD dwIDCtl,
    BOOL bChecked);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор флажка.

*bChecked*<br/>
Состояние флажка. TRUE указывает проверенные; FALSE указывает на неконтролируемый.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcontrolitemstate"></a><a name="setcontrolitemstate"></a>CFileДиалог::SetControlItemState

Устанавливает текущее состояние элемента в элементе управления контейнером, найденном в диалоге.

```
HRESULT SetControlItemState(
    DWORD dwIDCtl,
    DWORD dwIDItem,
    CDCONTROLSTATEF dwState);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента.

*dwState*<br/>
Одно или несколько значений из перечисления CDCONTROLSTATESTATE, указывающие на новое состояние элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcontrolitemtext"></a><a name="setcontrolitemtext"></a>CFileДиалог::SetControlItemText

Устанавливает текст элемента управления. Например, текст, сопровождающий кнопку радио или элемент в меню.

```
HRESULT SetControlItemText(
    DWORD dwIDCtl,
    DWORD dwIDItem,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента.

*strLabel*<br/>
Текст предмета.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcontrollabel"></a><a name="setcontrollabel"></a>CFileДиалог::SetControlLabel

Устанавливает текст, связанный с элементом управления, например текст кнопки или метку коробки редактирования.

```
HRESULT SetControlLabel(
    DWORD dwIDCtl,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор элемента управления.

*strLabel*<br/>
Имя элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcontrolstate"></a><a name="setcontrolstate"></a>CFileДиалог::SetControlState

Устанавливает текущую видимость и включено состояния заданного элемента управления.

```
HRESULT SetControlState(
    DWORD dwIDCtl,
    CDCONTROLSTATEF dwState);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор элемента управления.

*dwState*<br/>
Одно или несколько значений из перечисления CDCONTROLSTATESTATE, которые указывают текущее состояние элемента управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetcontroltext"></a><a name="setcontroltext"></a>CFileДиалог::SetControlText

Вызовите этот метод, чтобы настроить текст для указанного элемента управления в **поле «Открытый»** в стиле Explorer или **«Сохранить как** диалог».

```
void SetControlText(
    int nID,
    LPCSTR lpsz);

void SetControlText(
    int nID,
    const wchar_t *lpsz);
```

### <a name="parameters"></a>Параметры

*nID*<br/>
(в) Идентификатор элемента управления, для которого можно установить текст.

*lpsz*<br/>
(в) Указатель на строку, содержащую текст для управления.

### <a name="remarks"></a>Remarks

Обе версии этой функции действительны для приложений, которые используют Unicode. Однако для приложений, используючих ANSI, действительна только версия с типом LPCSTR.

Чтобы использовать этот метод, необходимо создать диалоговую коробку со стилем OFN_EXPLORER. В противном случае функция не сработает с утверждением.

## <a name="cfiledialogsetdefext"></a><a name="setdefext"></a>CFileДиалог::SetDefExt

Вызовите эту функцию, чтобы установить расширение имени файла по умолчанию для Открытого поля в стиле Explorer или Сохранить как обычное диалоговое поле.

```
void SetDefExt(LPCSTR lpsz);
```

### <a name="parameters"></a>Параметры

*lpsz*<br/>
Указатель на строку, содержащую расширение по умолчанию, для использования для объекта поле диалога. Эта строка не должна содержать период (.).

### <a name="remarks"></a>Remarks

Коробка диалога должна быть создана в стиле OFN_EXPLORER; в противном случае функция не сработает с утверждением.

## <a name="cfiledialogseteditboxtext"></a><a name="seteditboxtext"></a>CFileDialog::SetEditBoxText

Устанавливает текущий текст в элемент управления коробкой редактирования.

```
HRESULT SetEditBoxText(
    DWORD dwIDCtl,
    const CString& strText);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор коробки для отсылки.

*strText*<br/>
Текстовое значение.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetproperties"></a><a name="setproperties"></a>CFileДиалог::SetСвойства

Предоставляет хранилище свойств, которое определяет значения по умолчанию для сохраняемого элемента.

```
BOOL SetProperties(LPCWSTR lpszPropList);
```

### <a name="parameters"></a>Параметры

*lpszPropList*<br/>
Список предварительно заданных свойств, разделенных точкой с запятой (";"). Список флагов можно узнать в разделе **Флаги** [OPENFILENAME](/windows/win32/api/commdlg/ns-commdlg-openfilenamew).

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsetselectedcontrolitem"></a><a name="setselectedcontrolitem"></a>CFileDialog:SetSelectedControlItem

Устанавливает выбранное состояние конкретного элемента в группе кнопок опциона или комбо-поле, найденном в диалоге.

```
HRESULT SetSelectedControlItem(
    DWORD dwIDCtl,
    DWORD dwIDItem);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор контейнерного элемента управления.

*dwIDItem*<br/>
Идентификатор элемента, выбранного пользователем в элементе управления.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogsettemplate"></a><a name="settemplate"></a>CFileДиалог::SetTemplate

Устанавливает шаблон диалогового окна для объекта [CFileDialog.](../../mfc/reference/cfiledialog-class.md)

```
void SetTemplate(
    UINT nWin3ID,
    UINT nWin4ID);

void SetTemplate(
    LPCTSTR lpWin3ID,
    LPCTSTR lpWin4ID);
```

### <a name="parameters"></a>Параметры

*nWin3ID*<br/>
(в) Содержит идентификационный номер ресурса шаблона `CFileDialog` для объекта, не являющейся исследователем. Этот шаблон используется только на Windows NT 3.51 или когда OFN_EXPLORER стиля нет.

*nWin4ID*<br/>
(в) Содержит идентификационный номер ресурса `CFileDialog` шаблона для объекта Explorer. Этот шаблон используется только на Windows NT 4.0 и более поздних версиях, Windows 95 и более поздних версиях, или когда присутствует OFN_EXPLORER стиль.

*lpWin3ID*<br/>
(в) Содержит имя ресурса шаблона для `CFileDialog` объекта, не являющейся исследователем. Этот шаблон используется только на Windows NT 3.51 или когда OFN_EXPLORER стиля нет.

*lpWin4ID*<br/>
(в) Содержит имя ресурса шаблонов `CFileDialog` объекта Explorer. Этот шаблон используется только на Windows NT 4.0 и более поздних версиях, Windows 95 и более поздних версиях, или когда присутствует OFN_EXPLORER стиль.

### <a name="remarks"></a>Remarks

Система будет использовать только один из указанных шаблонов. Система определяет, какой шаблон использовать на основе наличия стиля OFN_EXPLORER и операционной системы, на которой работает приложение. Указывая как шаблон в стиле не-Explorer, так и шаблон в стиле Explorer, легко поддерживать Windows NT 3.51, Windows NT 4.0 и более поздние версии, а также Windows 95 и более поздние версии.

> [!NOTE]
> Windows Vista или более поздние диалоговые файлы стиля не поддерживают эту функцию. Попытка использовать эту функцию на Windows Vista или более поздний стиль файл диалоговое окно будет бросать [CNotSupportedException](../../mfc/reference/cnotsupportedexception-class.md). Альтернативой является использование индивидуального диалога. Для получения дополнительной информации об использовании пользовательского, `CFileDialog`см. [IFileDialogCustomize](/windows/win32/api/shobjidl_core/nn-shobjidl_core-ifiledialogcustomize)

## <a name="cfiledialogstartvisualgroup"></a><a name="startvisualgroup"></a>CFileДиалог::StartVisualGroup

Объявляет визуальную группу в диалоге. Последующие вызовы к любому методу «добавить» добавляют эти элементы в эту группу.

```
HRESULT StartVisualGroup(
    DWORD dwIDCtl,
    const CString& strLabel);
```

### <a name="parameters"></a>Параметры

*dwIDCtl*<br/>
Идентификатор визуальной группы.

*strLabel*<br/>
Имя группы.

### <a name="remarks"></a>Remarks

## <a name="cfiledialogupdateofnfromshelldialog"></a><a name="updateofnfromshelldialog"></a>CFileDialog::UpdateOFNFromShellDialog

Обновляет `m_ofn` структуру данных [CFileDialog](../../mfc/reference/cfiledialog-class.md) на основе текущего состояния внутреннего объекта.

```
void UpdateOFNFromShellDialog();
```

### <a name="remarks"></a>Remarks

В версиях Windows до Windows Vista структура данных [OPENFILENAME](/previous-versions/windows/embedded/ms911906\(v=msdn.10\)) непрерывно синхронизировалась с состоянием `CFileDialog`. Любые [m_ofn](#m_ofn) изменения в переменной участника непосредственно влияют на состояние диалогового окна. Кроме того, любые изменения состояния диалога немедленно обновили переменную m_ofn члена.

В Windows Vista или `m_ofn` позже структура данных не обновляется автоматически. Чтобы гарантировать точность данных `m_ofn` в переменной члена, `UpdateOFNFromShellDialog` необходимо вызвать функцию перед доступом к данным. Windows автоматически вызывает эту функцию во время обработки [IFileDialog::OnFileOK](/windows/win32/api/shobjidl_core/nf-shobjidl_core-ifiledialogevents-onfileok).

Для получения дополнительной информации `CFileDialog` о том, как использовать класс под Windows Vista или позже, см. [CFileDialog Class](../../mfc/reference/cfiledialog-class.md)

### <a name="example"></a>Пример

Этот пример `CFileDialog` обновляет перед отображением. Прежде чем `m_ofn` обновить переменную участника, необходимо синхронизировать ее с текущим состоянием диалогового окна.

[!code-cpp[NVC_MFC_CFileDialog#1](../../mfc/reference/codesnippet/cpp/cfiledialog-class_7.cpp)]

## <a name="see-also"></a>См. также раздел

[Класс CCommonДиалог](../../mfc/reference/ccommondialog-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)
