---
title: Класс CToolBar | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: reference
f1_keywords:
- CToolBar
- AFXEXT/CToolBar
- AFXEXT/CToolBar::CToolBar
- AFXEXT/CToolBar::CommandToIndex
- AFXEXT/CToolBar::Create
- AFXEXT/CToolBar::CreateEx
- AFXEXT/CToolBar::GetButtonInfo
- AFXEXT/CToolBar::GetButtonStyle
- AFXEXT/CToolBar::GetButtonText
- AFXEXT/CToolBar::GetItemID
- AFXEXT/CToolBar::GetItemRect
- AFXEXT/CToolBar::GetToolBarCtrl
- AFXEXT/CToolBar::LoadBitmap
- AFXEXT/CToolBar::LoadToolBar
- AFXEXT/CToolBar::SetBitmap
- AFXEXT/CToolBar::SetButtonInfo
- AFXEXT/CToolBar::SetButtons
- AFXEXT/CToolBar::SetButtonStyle
- AFXEXT/CToolBar::SetButtonText
- AFXEXT/CToolBar::SetHeight
- AFXEXT/CToolBar::SetSizes
dev_langs:
- C++
helpviewer_keywords:
- CToolBar [MFC], CToolBar
- CToolBar [MFC], CommandToIndex
- CToolBar [MFC], Create
- CToolBar [MFC], CreateEx
- CToolBar [MFC], GetButtonInfo
- CToolBar [MFC], GetButtonStyle
- CToolBar [MFC], GetButtonText
- CToolBar [MFC], GetItemID
- CToolBar [MFC], GetItemRect
- CToolBar [MFC], GetToolBarCtrl
- CToolBar [MFC], LoadBitmap
- CToolBar [MFC], LoadToolBar
- CToolBar [MFC], SetBitmap
- CToolBar [MFC], SetButtonInfo
- CToolBar [MFC], SetButtons
- CToolBar [MFC], SetButtonStyle
- CToolBar [MFC], SetButtonText
- CToolBar [MFC], SetHeight
- CToolBar [MFC], SetSizes
ms.assetid: e868da26-5e07-4607-9651-e2f863ad9059
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: bf8f66dbd6455686fb856337485e5a38da4f31c1
ms.sourcegitcommit: 799f9b976623a375203ad8b2ad5147bd6a2212f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/19/2018
ms.locfileid: "46400488"
---
# <a name="ctoolbar-class"></a>Класс CToolBar

Панели элементов управления, имеющие строку растровых кнопок и необязательные разделители.

## <a name="syntax"></a>Синтаксис

```
class CToolBar : public CControlBar
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CToolBar::CToolBar](#ctoolbar)|Создает объект `CToolBar`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CToolBar::CommandToIndex](#commandtoindex)|Возвращает индекс кнопки с заданному идентификатору команды.|
|[CToolBar::Create](#create)|На панели инструментов Windows создает и присоединяет его к `CToolBar` объекта.|
|[CToolBar::CreateEx](#createex)|Создает `CToolBar` объект с дополнительные стили для встроенного `CToolBarCtrl` объекта.|
|[CToolBar::GetButtonInfo](#getbuttoninfo)|Извлекает идентификатор, стиль и количество изображения кнопки.|
|[CToolBar::GetButtonStyle](#getbuttonstyle)|Получает стиль для кнопки.|
|[CToolBar::GetButtonText](#getbuttontext)|Извлекает текст, который будет отображаться на кнопке.|
|[CToolBar::GetItemID](#getitemid)|Возвращает идентификатор команды кнопки или разделитель по указанному индексу.|
|[CToolBar::GetItemRect](#getitemrect)|Извлекает прямоугольник отображения для элемента по указанному индексу.|
|[CToolBar::GetToolBarCtrl](#gettoolbarctrl)|Обеспечивает прямой доступ к базовой общего элемента управления.|
|[CToolBar::LoadBitmap](#loadbitmap)|Загружает растровое изображение, содержащая изображения кнопка с рисунком.|
|[CToolBar::LoadToolBar](#loadtoolbar)|Загружает ресурс панели инструментов, созданные с помощью редактора ресурсов.|
|[CToolBar::SetBitmap](#setbitmap)|Задает растровый рисунок.|
|[CToolBar::SetButtonInfo](#setbuttoninfo)|Задает идентификатор, стиль и количество изображения кнопки.|
|[CToolBar::SetButtons](#setbuttons)|Стили и индексом изображения кнопки внутри точечного рисунка, нажмите кнопку наборов.|
|[CToolBar::SetButtonStyle](#setbuttonstyle)|Задает стиль для кнопки.|
|[CToolBar::SetButtonText](#setbuttontext)|Задает текст, который будет отображаться на кнопке.|
|[CToolBar::SetHeight](#setheight)|Задает высоту элемента панели инструментов.|
|[CToolBar::SetSizes](#setsizes)|Задает размеры кнопки и их точечными рисунками.|

## <a name="remarks"></a>Примечания

Кнопки может действовать как кнопок, -флажков или переключателей. `CToolBar` Эти объекты объединены обычно внедренных объектов окна фрейма, производных от класса [CFrameWnd](../../mfc/reference/cframewnd-class.md) или [CMDIFrameWnd](../../mfc/reference/cmdiframewnd-class.md).

[CToolBar::GetToolBarCtrl](#gettoolbarctrl), функция-член новые MFC 4.0, позволяет воспользоваться преимуществами поддержки Windows распространенных элемента управления для настройки панели инструментов и дополнительную функциональность. `CToolBar` функции-члены обеспечивают большинство функций Windows стандартных элементов управления; Тем не менее, при вызове `GetToolBarCtrl`, можно предоставить панелей инструментов даже несколько характеристик панелей инструментов Windows 95/98. При вызове `GetToolBarCtrl`, он возвращает ссылку на `CToolBarCtrl` объекта. См. в разделе [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) Дополнительные сведения о разработке с помощью стандартных элементов управления Windows. Более общие сведения о стандартных элементах управления см. в разделе [стандартные элементы управления](/windows/desktop/Controls/common-controls-intro) в пакете Windows SDK.

Visual C++ предоставляет два способа создания панели инструментов. Создание ресурса панели инструментов в редакторе ресурсов, выполните следующие действия.

1. Создание ресурса панели инструментов.

1. Создать `CToolBar` объекта.

1. Вызовите [создать](#create) (или [CreateEx](#createex)) функция для создания панели инструментов Windows и присоединить его к `CToolBar` объекта.

1. Вызовите [LoadToolBar](#loadtoolbar) для загрузки ресурса панели инструментов.

В противном случае выполните следующие действия.

1. Создать `CToolBar` объекта.

1. Вызовите [создать](#create) (или [CreateEx](#createex)) функция для создания панели инструментов Windows и присоединить его к `CToolBar` объекта.

1. Вызовите [LoadBitmap](#loadbitmap) для загрузки точечного рисунка, который содержит изображения кнопки панели инструментов.

1. Вызовите [SetButtons](#setbuttons) для задания стиля кнопки и связать каждая кнопка с изображением в точечном рисунке.

Все изображения кнопки на панели инструментов, взяты из одного точечного рисунка, который должен содержать один образ для каждой кнопки. Все изображения должны быть одинакового размера; значение по умолчанию — 16 пикселей в ширину и 15 пикселей в высоту. Образы должны быть в точечном рисунке рядом друг с другом.

`SetButtons` Функция принимает указатель на массив идентификаторов элементов управления и целое число, указывающее количество элементов в массиве. Функция присваивает идентификатор каждой кнопки значение соответствующего элемента массива и присваивает каждой кнопки индекс изображения, который указывает положение изображение кнопки в точечном рисунке. Если элемент массива имеет значение ID_SEPARATOR, назначается не индекс изображения.

Порядок изображения в точечном рисунке обычно является порядок, в котором они отображаются на экране, но можно использовать [SetButtonInfo](#setbuttoninfo) функции, чтобы изменить связь между заказами образа и рисования.

Все кнопки на панели инструментов, имеют одинаковый размер. Значение по умолчанию — 24 x 22 пикселя в соответствии с *интерфейс Windows, касающиеся разработки программного обеспечения*. Любое дополнительное пространство между измерениями образ и кнопка используется для формирования границы вокруг изображения.

Каждая кнопка имеет один образ. Различные кнопки состояния и стили (нажатом вверх, Стрелка вниз, отключено, отключенные работу и не определено), создаются из этого одного образа. Несмотря на то, что точечные рисунки могут быть любой цвет, можно достичь наилучших результатов с изображениями в черный цвет и оттенков серого цвета.

> [!WARNING]
> `CToolBar` поддерживает растровые изображения, не более 16 цветов. После загрузки изображения в редактор панелей инструментов, в Visual Studio автоматически преобразует изображение точечного рисунка 16 цветов, при необходимости и выводит предупреждение, если образ был преобразован. Если вы используете образ с более чем 16 цветов (используя внешний редактор для редактирования изображения), приложение может работать непредсказуемым образом.

Кнопки панели инструментов имитации кнопок по умолчанию. Тем не менее кнопки панели инструментов также можно имитировать-флажков или переключателей. Установите флажок кнопки имеют три состояния: установлен, снят и не определено. Переключатели иметь только два состояния: установлен и очищен.

Чтобы задать отдельные кнопки или стиль разделителя, не указывает на массив, вызовите [GetButtonStyle](#getbuttonstyle) для извлечения стиля и затем вызвать [SetButtonStyle](#setbuttonstyle) вместо `SetButtons`. `SetButtonStyle` может пригодиться, если вы хотите изменить стиль кнопки во время выполнения.

Чтобы назначить текст, отображаемый на кнопке, вызовите [GetButtonText](#getbuttontext) извлекаемого текст, отображаемый на кнопке, а затем вызвать [SetButtonText](#setbuttontext) для задания текста.

Для создания кнопки "флажок", назначить его стиль TBBS_CHECKBOX или использовать `CCmdUI` объекта `SetCheck` функция-член в обработчике ON_UPDATE_COMMAND_UI. Вызов `SetCheck` превращается в кнопку флажок кнопки. Передайте `SetCheck` аргумент 0 для 1 — этот флажок снят, установлен или 2 для неопределенное.

Чтобы создать типа "переключатель", вызовите [CCmdUI](../../mfc/reference/ccmdui-class.md) объекта [SetRadio](../../mfc/reference/ccmdui-class.md#setradio) функция-член из обработчика ON_UPDATE_COMMAND_UI. Передайте `SetRadio` аргумент 0 для неустановленным или ненулевое значение, для проверки. Чтобы предоставить группе переключателя взаимно исключают друг друга поведение, необходимо иметь ON_UPDATE_COMMAND_UI обработчики для всех кнопок в группе.

Дополнительные сведения об использовании `CToolBar`, см. в статье [реализация панели инструментов MFC](../../mfc/mfc-toolbar-implementation.md) и [Технические примечания 31: панелей элементов управления](../../mfc/tn031-control-bars.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CControlBar](../../mfc/reference/ccontrolbar-class.md)

`CToolBar`

## <a name="requirements"></a>Требования

**Заголовок:** afxext.h

##  <a name="commandtoindex"></a>  CToolBar::CommandToIndex

Эта функция-член возвращает индекс первой кнопки панели инструментов, начиная с позиции 0, чей идентификатор команды совпадает `nIDFind`.

```
int CommandToIndex(UINT nIDFind) const;
```

### <a name="parameters"></a>Параметры

*nIDFind*<br/>
Идентификатор команды кнопки панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Индекс кнопки, или -1, если кнопка "Нет" имеет идентификатор данной команды.

##  <a name="create"></a>  CToolBar::Create

Эта функция-член создает панель инструментов Windows (дочернего окна) и связывает его с `CToolBar` объекта.

```
virtual BOOL Create(
    CWnd* pParentWnd,
    DWORD dwStyle = WS_CHILD | WS_VISIBLE | CBRS_TOP,
    UINT nID = AFX_IDW_TOOLBAR);
```

### <a name="parameters"></a>Параметры

*pParentWnd*<br/>
Указатель на окно, являющейся родительским элементом панели инструментов.

*dwStyle*<br/>
Стиль панели инструментов. Существуют следующие стили дополнительных инструментов, которые поддерживаются:

- Панель элементов управления CBRS_TOP — в верхней части фрейма окна.

- Панель элементов управления CBRS_BOTTOM — в нижней части окна фрейма.

- При изменении размера родительской панели элементов управления CBRS_NOALIGN не перемещен.

- Панель элементов управления CBRS_TOOLTIPS отображает всплывающие подсказки.

- Панель элементов управления CBRS_SIZE_DYNAMIC является динамическим.

- Панель элементов управления CBRS_SIZE_FIXED является фиксированным.

- Панель элементов управления CBRS_FLOATING с плавающей запятой.

- Строка состояния CBRS_FLYBY отображает сведения о кнопке.

- Панель элементов управления CBRS_HIDE_INPLACE не отображается для пользователя.

*nID*<br/>
Идентификатор элемента управления панель инструментов дочернего окна.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Он также задает высоту панели инструментов на значение по умолчанию.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#179](../../mfc/codesnippet/cpp/ctoolbar-class_1.cpp)]

##  <a name="createex"></a>  CToolBar::CreateEx

Вызывайте эту функцию для создания панели инструментов Windows (дочернего окна) и связать его с `CToolBar` объекта.

```
virtual BOOL CreateEx(
    CWnd* pParentWnd,
    DWORD dwCtrlStyle = TBSTYLE_FLAT,
    DWORD dwStyle = WS_CHILD | WS_VISIBLE | CBRS_ALIGN_TOP,
    CRect rcBorders = CRect(
    0,
    0,
    0,
    0),
    UINT nID = AFX_IDW_TOOLBAR);
```

### <a name="parameters"></a>Параметры

*pParentWnd*<br/>
Указатель на окно, являющейся родительским элементом панели инструментов.

*dwCtrlStyle*<br/>
Дополнительные стили для создания внедренных [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) объекта. По умолчанию это значение присваивается TBSTYLE_FLAT. Полный список стили панели инструментов, см. в разделе *dwStyle*.

*dwStyle*<br/>
Стиль панели инструментов. См. в разделе [панели инструментов и стили кнопок](/windows/desktop/Controls/toolbar-control-and-button-styles) в пакете SDK Windows для получения списка подходящие стили.

*rcBorders*<br/>
Объект [CRect](../../atl-mfc-shared/reference/crect-class.md) , определяющий ширину границы окна инструментов. Эти границы задаются 0,0,0,0 по умолчанию, таким образом, окно инструментов с нет границ.

*nID*<br/>
Идентификатор элемента управления панель инструментов дочернего окна.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Он также задает высоту панели инструментов на значение по умолчанию.

Используйте `CreateEx`, а не [создать](#create), при определенных стилей должен указываться во время создания внедренного панели инструментов. Например, задать *dwCtrlStyle* для TBSTYLE_FLAT &#124; TBSTYLE_TRANSPARENT для создания панели инструментов, похожий на панели инструментов Internet Explorer 4.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocView#180](../../mfc/codesnippet/cpp/ctoolbar-class_2.cpp)]

##  <a name="ctoolbar"></a>  CToolBar::CToolBar

Эта функция-член создает `CToolBar` и устанавливает размеры по умолчанию.

```
CToolBar();
```

### <a name="remarks"></a>Примечания

Вызовите [создать](#create) функция-член для создания окна инструментов.

##  <a name="getbuttoninfo"></a>  CToolBar::GetButtonInfo

Эта функция-член извлекает идентификатор элемента управления, стиль и индексом изображения кнопки панели инструментов или разделитель в расположении, указанном по *nIndex.*

```
void GetButtonInfo(
    int nIndex,
    UINT& nID,
    UINT& nStyle,
    int& iImage) const;
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс кнопки панели инструментов или разделитель, сведения о которой требуется извлечь.

*nID*<br/>
Ссылка на целое число без знака, ей присваивается идентификатор команды кнопки.

*nStyle*<br/>
Ссылка на целое число без знака, которой присваивается стиль кнопки.

*iImage*<br/>
Ссылка на целое число, равное индекс изображения, кнопки внутри точечного рисунка.

### <a name="remarks"></a>Примечания

Эти значения присваиваются переменным, ссылается *nID*, *nStyle*, и *iImage*. Индекс изображения — это положение изображения в точечного рисунка, который содержит изображения для кнопки панели инструментов. Первое изображение находится в позиции 0.

Если *nIndex* указывает разделитель, *iImage* присваивается ширину разделителя в пикселях.

##  <a name="getbuttonstyle"></a>  CToolBar::GetButtonStyle

Вызовите эту функцию-член для извлечения стиля кнопки или разделителя на панели инструментов.

```
UINT GetButtonStyle(int nIndex) const;
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс стиля кнопки или разделителя панели инструментов требуется получить.

### <a name="return-value"></a>Возвращаемое значение

Стиль кнопки или разделителя, определяемое *nIndex*.

### <a name="remarks"></a>Примечания

Стиль кнопки определяет, как появляется кнопка «» и как он реагирует на ввод данных пользователем. См. в разделе [SetButtonStyle](#setbuttonstyle) примеры стили кнопок.

##  <a name="getbuttontext"></a>  CToolBar::GetButtonText

Вызовите эту функцию-член для извлечения текст, отображаемый на кнопке.

```
CString GetButtonText(int nIndex) const;

void GetButtonText(
    int nIndex,
    CString& rString) const;
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс извлекаемого текста.

*rString*<br/>
Ссылку на [CString](../../atl-mfc-shared/reference/cstringt-class.md) объект, который будет содержать текст, который требуется получить.

### <a name="return-value"></a>Возвращаемое значение

Объект `CString` объект, содержащий текст кнопки.

### <a name="remarks"></a>Примечания

Вторая форма этого члена функции заливки `CString` с текстом строки.

##  <a name="getitemid"></a>  CToolBar::GetItemID

Эта функция-член возвращает идентификатор команды кнопки или разделителя, определяемое *nIndex*.

```
UINT GetItemID(int nIndex) const;
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс элемента, идентификатор которого — должны быть получены.

### <a name="return-value"></a>Возвращаемое значение

Идентификатор команды кнопки или разделителя, определяемое *nIndex*.

### <a name="remarks"></a>Примечания

Разделители возвращают ID_SEPARATOR.

##  <a name="getitemrect"></a>  CToolBar::GetItemRect

Эта функция-член заполняет `RECT` , адрес которого содержится в структуре *lpRect* с координатами кнопку или разделитель, определяемое *nIndex*.

```
virtual void GetItemRect(
    int nIndex,
    LPRECT lpRect) const;
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс элемента (кнопку или разделителя), должны быть получены, координаты прямоугольника.

*lpRect*<br/>
Адрес [RECT](../../mfc/reference/rect-structure1.md) структуру, которая будет содержать координаты элемента.

### <a name="remarks"></a>Примечания

Координаты указываются в пикселях относительно верхнего левого угла панели инструментов.

Используйте `GetItemRect` для получения координат разделитель, который вы хотите заменить поле со списком или другой элемент управления.

### <a name="example"></a>Пример

  См. в примере [CToolBar::SetSizes](#setsizes).

##  <a name="gettoolbarctrl"></a>  CToolBar::GetToolBarCtrl

Эта функция-член обеспечивает прямой доступ к базовой общего элемента управления.

```
CToolBarCtrl& GetToolBarCtrl() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ссылка на объект `CToolBarCtrl`.

### <a name="remarks"></a>Примечания

Используйте `GetToolBarCtrl` преимуществами функциональные возможности стандартного элемента управления панели инструментов Windows и пользоваться преимуществами поддержки [CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md) предоставляет для настройки панели инструментов.

Дополнительные сведения об использовании стандартных элементов управления см. в статье [элементов управления](../../mfc/controls-mfc.md) и [стандартные элементы управления](/windows/desktop/Controls/common-controls-intro) в пакете Windows SDK.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCDocViewSDI#15](../../mfc/codesnippet/cpp/ctoolbar-class_3.cpp)]

##  <a name="loadbitmap"></a>  CToolBar::LoadBitmap

Вызовите эту функцию-член для загрузки точечного рисунка, определяемое `lpszResourceName` или `nIDResource`.

```
BOOL LoadBitmap(LPCTSTR lpszResourceName);
BOOL LoadBitmap(UINT nIDResource);
```

### <a name="parameters"></a>Параметры

*lpszResourceName*<br/>
Указатель на имя ресурса точечного рисунка для загрузки.

*nIDResource*<br/>
Идентификатор ресурса растрового изображения для загрузки.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Точечный рисунок должен содержать один образ для каждой кнопки панели инструментов. Если образы не принадлежащих к стандартному размеру (16 пикселей в ширину и 15 пикселей в высоту), вызов [SetSizes](#setsizes) задать размеры кнопки и соответствующих образов.

> [!WARNING]
> `CToolBar` поддерживает растровые изображения, не более 16 цветов. После загрузки изображения в редактор панелей инструментов, в Visual Studio автоматически преобразует изображение точечного рисунка 16 цветов, при необходимости и выводит предупреждение, если образ был преобразован. Если вы используете образ с более чем 16 цветов (используя внешний редактор для редактирования изображения), приложение может работать непредсказуемым образом.

##  <a name="loadtoolbar"></a>  CToolBar::LoadToolBar

Вызовите эту функцию-член для загрузки панели инструментов, определяемое *lpszResourceName* или *nIDResource*.

```
BOOL LoadToolBar(LPCTSTR lpszResourceName);
BOOL LoadToolBar(UINT nIDResource);
```

### <a name="parameters"></a>Параметры

*lpszResourceName*<br/>
Указатель на имя ресурса панели инструментов, необходимо загрузить.

*nIDResource*<br/>
Идентификатор ресурса панели инструментов для загрузки.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

См. в разделе [редактор панелей инструментов](../../windows/toolbar-editor.md) в Дополнительные сведения о создании ресурса панели инструментов.

### <a name="example"></a>Пример

  См. в примере [CToolBar::CreateEx](#createex).

##  <a name="setbitmap"></a>  CToolBar::SetBitmap

Эта функция члена для задания растровое изображение для панели инструментов.

```
BOOL SetBitmap(HBITMAP hbmImageWell);
```

### <a name="parameters"></a>Параметры

*hbmImageWell*<br/>
Дескриптор точечного рисунка, который связан с панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Например, вызвать `SetBitmap` изменение растровый рисунок, после пользователь предпринимает действие на документ, который изменяет действие кнопки.

##  <a name="setbuttoninfo"></a>  CToolBar::SetButtonInfo

Вызывайте эту функцию члена, чтобы задать идентификатор команды, стиль и количество изображения кнопки.

```
void SetButtonInfo(
    int nIndex,
    UINT nID,
    UINT nStyle,
    int iImage);
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Отсчитываемый от нуля индекс кнопки или разделителя, для которого будет устанавливаться сведения.

*nID*<br/>
Значение, задаваемое для кнопки идентификатор команды.

*nStyle*<br/>
Новый стиль кнопки. Поддерживаются следующие стили кнопок:

- Стандартный TBBS_BUTTON pushbutton (по умолчанию)

- Разделитель TBBS_SEPARATOR

- Кнопка "флажок" автоматически TBBS_CHECKBOX

- TBBS_GROUP отмечает начало группу кнопок

- TBBS_CHECKGROUP отмечает начало группу кнопок "флажок"

- TBBS_DROPDOWN создает кнопку раскрывающегося списка.

- TBBS_AUTOSIZE Ширина кнопки будет вычисляться на основе текста кнопки, а не на размер образа.

- TBBS_NOPREFIX на кнопке отображается надпись не будет иметь префикс сочетаний клавиш, связанные с ней.

*iImage*<br/>
Новый индекс для изображения кнопки внутри точечного рисунка.

### <a name="remarks"></a>Примечания

Для разделителей, имеющих стиль TBBS_SEPARATOR, эта функция задает ширину разделителя в пикселях для значения, хранящегося в *iImage*.

> [!NOTE]
>  Можно также задать с помощью состояния кнопки *nStyle* параметр; тем не менее, так как управляются состояния кнопки [ON_UPDATE_COMMAND_UI](message-map-macros-mfc.md#on_update_command_ui) обработчик, любое состояние, заданный с помощью `SetButtonInfo` будут потеряны во время следующей обработки простоя. См. в разделе [обновление объектов пользовательского интерфейса](../../mfc/how-to-update-user-interface-objects.md) и [TN031: панелей элементов управления](../../mfc/tn031-control-bars.md) Дополнительные сведения.

Сведения о растровых изображений и кнопок, см. в разделе [CToolBar](../../mfc/reference/ctoolbar-class.md) Обзор и [CToolBar::LoadBitmap](#loadbitmap).

##  <a name="setbuttons"></a>  CToolBar::SetButtons

Эта функция-член задает идентификатор команды для каждой кнопки панели инструментов к значению, заданному в соответствующий элемент массива *lpIDArray*.

```
BOOL SetButtons(
    const UINT* lpIDArray,
    int nIDCount);
```

### <a name="parameters"></a>Параметры

*lpIDArray*<br/>
Указатель на массив идентификаторов команд. Он может иметь значение NULL для выделения пустой кнопок.

*nIDCount*<br/>
Число элементов в массиве, на которые указывают *lpIDArray*.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Примечания

Если элемент массива имеет значение ID_SEPARATOR, разделитель будет создан в соответствующей позиции на панели инструментов. Эта функция также задает стиль каждой кнопки TBBS_BUTTON и стиль каждого разделителя TBBS_SEPARATOR и назначает индекс изображения для каждой кнопки. Индекс изображения указывает положение изображение кнопки внутри точечного рисунка.

Необходимо учетной записи для разделителей в битовой карте, так как эта функция не назначает индексы изображения для разделителей. Если кнопки панели инструментов в позициях 0, 1, 3 и разделитель в позиции 2, изображения с позиции 0, 1 и 2 в точечного рисунка назначаются на кнопках в позиции 0, 1 и 3, соответственно.

Если *lpIDArray* имеет значение NULL, эта функция выделяет пространство для числа элементов, определяемое *nIDCount*. Используйте [SetButtonInfo](#setbuttoninfo) для задания атрибутов каждого элемента.

##  <a name="setbuttonstyle"></a>  CToolBar::SetButtonStyle

Вызывайте эту функцию элемента требуется задать стиль кнопки или разделителя или группа кнопок.

```
void SetButtonStyle(
    int nIndex,
    UINT nStyle);
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс кнопки или разделителя, сведения о которой — задать.

*nStyle*<br/>
Стиль кнопки. Поддерживаются следующие стили кнопок:

- Стандартный TBBS_BUTTON pushbutton (по умолчанию)

- Разделитель TBBS_SEPARATOR

- Кнопка "флажок" автоматически TBBS_CHECKBOX

- TBBS_GROUP отмечает начало группу кнопок

- TBBS_CHECKGROUP отмечает начало группу кнопок "флажок"

- TBBS_DROPDOWN создает кнопку раскрывающегося списка

- TBBS_AUTOSIZE Ширина кнопки будет вычисляться на основе текста кнопки, а не на размер образа

- TBBS_NOPREFIX на кнопке отображается надпись не будет иметь префикс сочетаний клавиш, связанные с ним

### <a name="remarks"></a>Примечания

Стиль кнопки определяет, как появляется кнопка «» и как он реагирует на ввод данных пользователем.

Перед вызовом `SetButtonStyle`, вызовите [GetButtonStyle](#getbuttonstyle) функция-член для извлечения стиля кнопки или разделителя.

> [!NOTE]
>  Можно также задать с помощью состояния кнопки *nStyle* параметр; тем не менее, так как управляются состояния кнопки [ON_UPDATE_COMMAND_UI](message-map-macros-mfc.md#on_update_command_ui) обработчик, любое состояние, заданный с помощью `SetButtonStyle` будут потеряны во время следующей обработки простоя. См. в разделе [обновление объектов пользовательского интерфейса](../../mfc/how-to-update-user-interface-objects.md) и [TN031: панелей элементов управления](../../mfc/tn031-control-bars.md) Дополнительные сведения.

##  <a name="setbuttontext"></a>  CToolBar::SetButtonText

Вызывайте эту функцию для задания текста на кнопке.

```
BOOL SetButtonText(
    int nIndex,
    LPCTSTR lpszText);
```

### <a name="parameters"></a>Параметры

*nIndex*<br/>
Индекс кнопки, в которых указано устанавливаемое значение.

*lpszText*<br/>
Указывает на текст на кнопке.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

  См. в примере [CToolBar::GetToolBarCtrl](#gettoolbarctrl).

##  <a name="setheight"></a>  CToolBar::SetHeight

Эта функция-член задает высоту элемента управления панель инструментов к значению, в пикселях, указанный в *cyHeight*.

```
void SetHeight(int cyHeight);
```

### <a name="parameters"></a>Параметры

*cyHeight*<br/>
Высота в пикселях на панели инструментов.

### <a name="remarks"></a>Примечания

После вызова метода [SetSizes](#setsizes), использовать эту функцию-член для переопределения высота стандартной панели инструментов. Если высота слишком мал, будет обрезана кнопок в нижней.

Если эта функция не вызывается, инфраструктура использует размер кнопки для определения высоты панели инструментов.

##  <a name="setsizes"></a>  CToolBar::SetSizes

Вызывайте эту функцию члена присвоено кнопки панели инструментов размер в пикселях, указанный в *sizeButton*.

```
void SetSizes(
    SIZE sizeButton,
    SIZE sizeImage);
```

### <a name="parameters"></a>Параметры

*sizeButton*<br/>
Размер в пикселях для каждой кнопки.

*sizeImage*<br/>
Размер в пикселях каждого изображения.

### <a name="remarks"></a>Примечания

*SizeImage* параметр должен содержать размер в пикселях изображения в точечном рисунке панели инструментов. Измерения в *sizeButton* должны быть достаточными для хранения образа плюс 7 точек, лишние в ширину и 6 точек, лишние в высоту. Эта функция также задает высоту панели инструментов, чтобы вместить кнопок.

Вызовите эту функцию-член только для панели инструментов, которые не соответствуют *интерфейс Windows, касающиеся разработки программного обеспечения* рекомендации для размеров кнопки и изображения.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCListView#8](../../atl/reference/codesnippet/cpp/ctoolbar-class_4.cpp)]

## <a name="see-also"></a>См. также

[Пример MFC CTRLBARS](../../visual-cpp-samples.md)<br/>
[Образец DLGCBR32 MFC](../../visual-cpp-samples.md)<br/>
[Пример MFC DOCKTOOL ПОКАЗАНА](../../visual-cpp-samples.md)<br/>
[Класс CControlBar](../../mfc/reference/ccontrolbar-class.md)<br/>
[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Класс CToolBarCtrl](../../mfc/reference/ctoolbarctrl-class.md)<br/>
[Класс CControlBar](../../mfc/reference/ccontrolbar-class.md)
