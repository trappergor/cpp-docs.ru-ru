---
title: Структура WSADATA | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: reference
f1_keywords:
- WSADATA
dev_langs:
- C++
helpviewer_keywords:
- WSADATA structure [MFC]
ms.assetid: 80cc60e5-f9ae-4290-8ed5-07003136627d
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 75baf04ff1a380af8371f2d44a5295a3be65dc7e
ms.sourcegitcommit: 799f9b976623a375203ad8b2ad5147bd6a2212f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/19/2018
ms.locfileid: "46446658"
---
# <a name="wsadata-structure"></a>Структура WSADATA

`WSADATA` Структура используется для хранения сведений о инициализации Windows Sockets, возвращенный вызовом к `AfxSocketInit` глобальной функции.

## <a name="syntax"></a>Синтаксис

```
struct WSAData {
    WORD wVersion;
    WORD wHighVersion;
    char szDescription[WSADESCRIPTION_LEN+1];
    char szSystemStatus[WSASYSSTATUS_LEN+1];
    unsigned short iMaxSockets;
    unsigned short iMaxUdpDg;
    char FAR* lpVendorInfo;
};
```

#### <a name="parameters"></a>Параметры

*wVersion*<br/>
Версия спецификации Windows Sockets, что Windows Sockets DLL ожидает, что вызывающий объект для использования.

*wHighVersion*<br/>
Самый высокий версию спецификации Windows Sockets, может поддерживать эту библиотеку DLL, в (также кодируется как описано выше). Как правило, это так же, как *wVersion*.

*szDescription*<br/>
Завершающаяся нулем ASCII строка, в который Windows Sockets DLL копирует описание реализации Windows Sockets, включая код поставщика. Текст (до 256 символов в длину) может содержать любые символы, но поставщиков предупреждение от включения элемента управления и форматирование символов: скорее всего, приложение будет помещен на это используется для отображения его (возможно, обрезанное) в сообщение о состоянии.

*szSystemStatus*<br/>
Завершающаяся нулем ASCII строка, в которую Windows Sockets DLL Копирует релевантную информацию о состоянии или конфигурации. Windows Sockets DLL следует использовать это поле только в том случае, если сведения могут пригодиться для пользователя или технический персонал; он не должен рассматриваться как расширение *szDescription* поля.

*iMaxSockets*<br/>
Максимальное число процессоров, которые единый процесс потенциально может открыть. Реализация Windows Sockets может предоставить глобальный пул памяти для выделения к любому процессу; Кроме того его можно распределить ресурсы на уровне процесса для сокетов. Номер также может отражать способом, в котором был настроен Windows Sockets DLL или сетевое программное обеспечение. Авторы приложений можно использовать это число как грубый значение, указывающее является ли реализация Windows Sockets может использоваться приложением. Например, может проверить сервер Windows X *iMaxSockets* при первом запуске: Если это меньше, чем 8, приложение будет отображаться сообщение об ошибке требованием для перенастройки сетевое программное обеспечение. (Это ситуация, в котором *szSystemStatus* текст может использоваться.) Очевидно, что нет никакой гарантии, что определенное приложение фактически можно выделить *iMaxSockets* сокеты, так как могут быть другие приложения используют Windows Sockets.

*iMaxUdpDg*<br/>
Размер в байтах самой крупной датаграммы протокола UDP (User Datagram), который может быть отправлено или полученные приложением Windows Sockets. Если реализация не предусмотрено ограничение, *iMaxUdpDg* равно нулю. В многие реализации сокетов Беркли есть неявное ограничение 8192 байт на UDP-датаграмм (который фрагментированы, при необходимости). Реализация Windows Sockets можно наложить ограничение, например, на основе выделения буферов сборки фрагмента. Минимальное значение *iMaxUdpDg* для соответствующих сокетов Windows реализации составляет 512. Обратите внимание, что независимо от значения *iMaxUdpDg*, это этом не задействуются, чтобы попытаться отправить датаграмму вещания, большего, чем максимальное данных (MTU) сети. (API сокетов Windows предоставляет механизм для обнаружения MTU, но он должен быть не менее 512 байт).

*lpVendorInfo*<br/>
Дальний указатель на структуру данных конкретных поставщиков. Определение этой структуры (Если указано) выходит за рамки спецификации Windows Sockets.

> [!NOTE]
>  В MFC `WSADATA` структура возвращается `AfxSocketInit` функцию, которая при вызове в вашей `InitInstance` функции. Можно получить структуру и сохраните его в программе, если вам нужно использовать сведения из его позже.

## <a name="requirements"></a>Требования

**Заголовок:** winsock2.h

## <a name="see-also"></a>См. также

[Структуры, стили, обратные вызовы и схемы сообщений](../../mfc/reference/structures-styles-callbacks-and-message-maps.md)<br/>
[AfxSocketInit](../../mfc/reference/application-information-and-management.md#afxsocketinit)

