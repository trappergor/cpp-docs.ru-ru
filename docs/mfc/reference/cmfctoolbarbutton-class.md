---
title: Класс CMFCToolBarButton
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CMFCToolBarButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeDropped
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStored
- AFXTOOLBARBUTTON/CMFCToolBarButton::CanBeStretched
- AFXTOOLBARBUTTON/CMFCToolBarButton::CompareWith
- AFXTOOLBARBUTTON/CMFCToolBarButton::CopyFrom
- AFXTOOLBARBUTTON/CMFCToolBarButton::CreateFromOleData
- AFXTOOLBARBUTTON/CMFCToolBarButton::EnableWindow
- AFXTOOLBARBUTTON/CMFCToolBarButton::ExportToMenuButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetClipboardFormat
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetHwnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetInvalidateRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::GetTextSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::HasFocus
- AFXTOOLBARBUTTON/CMFCToolBarButton::HaveHotBorder
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDrawText
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsDroppedDown
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsEditable
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsExtraSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsFirstInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHidden
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsHorizontal
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLastInGroup
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsLocked
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsOwnerOf
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::IsWindowVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::NotifyCommand
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnAddToCustomizePage
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnBeforeDrop
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCalculateSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCancelMode
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnChangeParentWnd
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClick
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnClickUp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnContextHelp
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCtlColor
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnCustomizeMenu
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDblClk
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDraw
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnDrawOnCustomizeList
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGetCustomToolTipText
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnGlobalFontsChanged
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnMove
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnShow
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnSize
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnToolHitTest
- AFXTOOLBARBUTTON/CMFCToolBarButton::OnUpdateToolTip
- AFXTOOLBARBUTTON/CMFCToolBarButton::PrepareDrag
- AFXTOOLBARBUTTON/CMFCToolBarButton::Rect
- AFXTOOLBARBUTTON/CMFCToolBarButton::ResetImageToDefault
- AFXTOOLBARBUTTON/CMFCToolBarButton::SaveBarState
- AFXTOOLBARBUTTON/CMFCToolBarButton::Serialize
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetACCData
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetClipboardFormatName
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetProtectedCommands
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRadio
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetRect
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::SetVisible
- AFXTOOLBARBUTTON/CMFCToolBarButton::Show
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bImage
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bTextBelow
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bUserButton
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWholeText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrap
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_bWrapText
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nID
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_nStyle
- AFXTOOLBARBUTTON/CMFCToolBarButton::m_strText
helpviewer_keywords:
- CMFCToolBarButton [MFC], CMFCToolBarButton
- CMFCToolBarButton [MFC], CanBeDropped
- CMFCToolBarButton [MFC], CanBeStored
- CMFCToolBarButton [MFC], CanBeStretched
- CMFCToolBarButton [MFC], CompareWith
- CMFCToolBarButton [MFC], CopyFrom
- CMFCToolBarButton [MFC], CreateFromOleData
- CMFCToolBarButton [MFC], EnableWindow
- CMFCToolBarButton [MFC], ExportToMenuButton
- CMFCToolBarButton [MFC], GetClipboardFormat
- CMFCToolBarButton [MFC], GetHwnd
- CMFCToolBarButton [MFC], GetImage
- CMFCToolBarButton [MFC], GetInvalidateRect
- CMFCToolBarButton [MFC], GetParentWnd
- CMFCToolBarButton [MFC], GetProtectedCommands
- CMFCToolBarButton [MFC], GetTextSize
- CMFCToolBarButton [MFC], HasFocus
- CMFCToolBarButton [MFC], HaveHotBorder
- CMFCToolBarButton [MFC], IsDrawImage
- CMFCToolBarButton [MFC], IsDrawText
- CMFCToolBarButton [MFC], IsDroppedDown
- CMFCToolBarButton [MFC], IsEditable
- CMFCToolBarButton [MFC], IsExtraSize
- CMFCToolBarButton [MFC], IsFirstInGroup
- CMFCToolBarButton [MFC], IsHidden
- CMFCToolBarButton [MFC], IsHorizontal
- CMFCToolBarButton [MFC], IsLastInGroup
- CMFCToolBarButton [MFC], IsLocked
- CMFCToolBarButton [MFC], IsOwnerOf
- CMFCToolBarButton [MFC], IsVisible
- CMFCToolBarButton [MFC], IsWindowVisible
- CMFCToolBarButton [MFC], NotifyCommand
- CMFCToolBarButton [MFC], OnAddToCustomizePage
- CMFCToolBarButton [MFC], OnBeforeDrag
- CMFCToolBarButton [MFC], OnBeforeDrop
- CMFCToolBarButton [MFC], OnCalculateSize
- CMFCToolBarButton [MFC], OnCancelMode
- CMFCToolBarButton [MFC], OnChangeParentWnd
- CMFCToolBarButton [MFC], OnClick
- CMFCToolBarButton [MFC], OnClickUp
- CMFCToolBarButton [MFC], OnContextHelp
- CMFCToolBarButton [MFC], OnCtlColor
- CMFCToolBarButton [MFC], OnCustomizeMenu
- CMFCToolBarButton [MFC], OnDblClk
- CMFCToolBarButton [MFC], OnDraw
- CMFCToolBarButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarButton [MFC], OnGetCustomToolTipText
- CMFCToolBarButton [MFC], OnGlobalFontsChanged
- CMFCToolBarButton [MFC], OnMove
- CMFCToolBarButton [MFC], OnShow
- CMFCToolBarButton [MFC], OnSize
- CMFCToolBarButton [MFC], OnToolHitTest
- CMFCToolBarButton [MFC], OnUpdateToolTip
- CMFCToolBarButton [MFC], PrepareDrag
- CMFCToolBarButton [MFC], Rect
- CMFCToolBarButton [MFC], ResetImageToDefault
- CMFCToolBarButton [MFC], SaveBarState
- CMFCToolBarButton [MFC], Serialize
- CMFCToolBarButton [MFC], SetACCData
- CMFCToolBarButton [MFC], SetClipboardFormatName
- CMFCToolBarButton [MFC], SetImage
- CMFCToolBarButton [MFC], SetProtectedCommands
- CMFCToolBarButton [MFC], SetRadio
- CMFCToolBarButton [MFC], SetRect
- CMFCToolBarButton [MFC], SetStyle
- CMFCToolBarButton [MFC], SetVisible
- CMFCToolBarButton [MFC], Show
- CMFCToolBarButton [MFC], m_bImage
- CMFCToolBarButton [MFC], m_bText
- CMFCToolBarButton [MFC], m_bTextBelow
- CMFCToolBarButton [MFC], m_bUserButton
- CMFCToolBarButton [MFC], m_bWholeText
- CMFCToolBarButton [MFC], m_bWrap
- CMFCToolBarButton [MFC], m_bWrapText
- CMFCToolBarButton [MFC], m_nID
- CMFCToolBarButton [MFC], m_nStyle
- CMFCToolBarButton [MFC], m_strText
ms.assetid: 8a6ecffb-86b0-4f5c-8211-a9146b463efd
ms.openlocfilehash: 8e96740ba6755f489be07fbf8996cfa8b049314a
ms.sourcegitcommit: 7a6116e48c3c11b97371b8ae4ecc23adce1f092d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81754030"
---
# <a name="cmfctoolbarbutton-class"></a>Класс CMFCToolBarButton

Предоставляет функцию кнопки для панели инструментов.

## <a name="syntax"></a>Синтаксис

```
class CMFCToolBarButton : public CObject
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarButton::CMFCToolBarButton](#cmfctoolbarbutton)|Создает и инициализирует объект `CMFCToolBarButton`.|
|`CMFCToolBarButton::~CMFCToolBarButton`|Деструктор.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarButton::Canbedropped](#canbedropped)|Уточняется, может ли пользователь расположить кнопку на панели инструментов или меню во время настройки.|
|[CMFCToolBarButton::CanBeStored](#canbestored)|Определяет, можно ли хранить кнопку.|
|[CMFCToolBarButton::CanbeStretched](#canbestretched)|Уточняется, может ли пользователь растягивать кнопку во время настройки.|
|[CMFCToolBarButton::CompareWith](#comparewith)|Сравнивает этот экземпляр `CMFCToolBarButton` с предоставленным объектом.|
|[CMFCToolBarButton::CopyFrom](#copyfrom)|Копирует свойства другой кнопки панели инструментов на текущую кнопку.|
|[CMFCToolBarButton::CreateFromOleData](#createfromoledata)|Создает `CMFCToolBarButton` объект из `COleDataObject` предоставленного объекта.|
|`CMFCToolBarButton::CreateObject`|Используется платформой для создания динамического экземпляра этого типа класса.|
|[CMFCToolBarButton::EnableWindow](#enablewindow)|Разрешает или запрещает ввод с помощью мыши и клавиатуры.|
|[CMFCToolBarButton::ExporttoMenuButton](#exporttomenubutton)|Копирует текст из кнопки панели инструментов в меню.|
|[CMFCToolBarButton::GetClipboardФормат](#getclipboardformat)|Извлекает глобальный формат буфера обмена для приложения.|
|[CMFCToolBarButton::GetHwnd](#gethwnd)|Извлекает ручку окна, связанную с кнопкой панели инструментов.|
|[CMFCToolBarButton::GetImage](#getimage)|Извлекает индекс изображения кнопки.|
|[CMFCToolBarButton::GetInvalidateRect](#getinvalidaterect)|Извлекает область клиентской области кнопки, которая должна быть перерисована.|
|[CMFCToolBarButton::GetParentWnd](#getparentwnd)|Извлекает родительское окно кнопки.|
|[CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands)|Извлекает список команд, которые пользователь не может настроить.|
|[CMFCToolBarButton::GetTextSize](#gettextsize)|Извлекает размер текста кнопки.|
|[CMFCToolBarButton::HasFocus](#hasfocus)|Определяет, имеет ли кнопка текущий входно-сфокус.|
|[CMFCToolBarButton::HaveHotBorder](#havehotborder)|Определяет, отображается ли граница кнопки при выборе кнопки пользователем.|
|[CMFCToolBarButton::IsdrawImage](#isdrawimage)|Определяет, отображается ли изображение на кнопке.|
|[CMFCToolBarButton::IsdrawText](#isdrawtext)|Определяет, отображается ли текстовая метка на кнопке.|
|[CMFCToolBarButton::IsdroppedDown](#isdroppeddown)|Определяет, отображает ли кнопка подменю.|
|[CMFCToolBarButton:: Это невозможно](#iseditable)|Определяет, можно ли настроить кнопку.|
|[CMFCToolBarButton::IsExtraSize](#isextrasize)|Определяет, может ли кнопка отображаться с расширенной границей.|
|[CMFCToolBarButton::IsFirstinGroup](#isfirstingroup)|Определяет, находится ли кнопка в первой позиции в своей группе кнопок.|
|[CMFCToolBarButton::IsHidden](#ishidden)|Определяет, скрыта ли кнопка.|
|[CMFCToolBarButton::Горизонтальный](#ishorizontal)|Определяет, находится ли кнопка на горизонтальной панели инструментов.|
|[CMFCToolBarButton::IslastinGroup](#islastingroup)|Определяет, находится ли кнопка в последней позиции в своей группе кнопок.|
|[CMFCToolBarButton::Islocked](#islocked)|Определяет, находится ли кнопка на заблокированной (не настраиваемой) панели инструментов.|
|[CMFCToolBarButton::Isownerof](#isownerof)|Определяет, является ли кнопка владельцем предоставленной ручки окна.|
|[CMFCToolBarButton::Видимо](#isvisible)|Определяет, видна ли кнопка панели инструментов.|
|[CMFCToolBarButton::ОкноВидимо](#iswindowvisible)|Определяет, видна ли основная ручка окна кнопки.|
|[CMFCToolBarButton:NotifyCommand](#notifycommand)|Уточняется, обрабатывает ли кнопка [WM_COMMAND](/windows/win32/menurc/wm-command) сообщение.|
|[CMFCToolBarButton::OnAddTo CustomizePage](#onaddtocustomizepage)|Вызывается по фреймворку при добавлении кнопки в поле **настраиваемых** диалогов.|
|[CMFCToolBarButton::Onbeforedrag](#onbeforedrag)|Уточняется, можно ли перетащить кнопку.|
|[CMFCToolBarButton::Onbeforedrop](#onbeforedrop)|Определяет, может ли пользователь сбросить кнопку на панель целевых инструментов.|
|[CMFCToolBarButton::OncalculateSize](#oncalculatesize)|Вызывается фреймворком для расчета размера кнопки для заданного контекста устройства и состояния стыковки.|
|[CMFCToolBarButton::OnCancelmode](#oncancelmode)|Вызывается по системе для обработки [сообщения WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode)|
|[CMFCToolBarButton::OnChangeParentWnd](#onchangeparentwnd)|Вызывается по фрейму, когда кнопка вставляется в новую панель инструментов.|
|[CMFCToolBarButton::OnClick](#onclick)|Вызывается по фреймворку, когда пользователь нажимает кнопку мыши.|
|[CMFCToolBarButton::OnClickUp](#onclickup)|Вызывается по фреймворку, когда пользователь выпускает кнопку мыши.|
|[CMFCToolBarButton::OnContextHelp](#oncontexthelp)|Вызывается в фреймворке, когда панель родительских инструментов обрабатывает WM_HELPHITTEST сообщение.|
|[CMFCToolBarButton::OnctlColor](#onctlcolor)|Вызывается по системе, когда панель родительских инструментов обрабатывает WM_CTLCOLOR сообщение.|
|[CMFCToolBarButton::OnCustomizeMenu](#oncustomizemenu)|Позволяет кнопке изменять предоставленное меню, когда приложение отображает меню ярлыка на панели родительских инструментов.|
|[CMFCToolBarButton::OnDblClk](#ondblclk)|Вызывается в фреймворке, когда панель родительских инструментов обрабатывает [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) сообщение.|
|[CMFCToolBarButton::Ondraw](#ondraw)|Вызывается в рамках, чтобы нарисовать кнопку с помощью указанных стилей и опций.|
|[CMFCToolBarButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Вызывается фреймворком, чтобы нарисовать кнопку в панели **команд** в поле **настраивания** диалогов.|
|[CMFCToolBarButton::OngetCustomtoolTipText](#ongetcustomtooltiptext)|Вызывается рамки для получения пользовательского текста tooltip для кнопки.|
|[CMFCToolBarButton::OnGlobalFontsChanged](#onglobalfontschanged)|Вызывается рамками, когда глобальный шрифт изменился.|
|[CMFCToolBarButton::Onmove](#onmove)|Вызывается по фреймворку при движении родительской панели инструментов.|
|[CMFCToolBarButton::Onshow](#onshow)|Вызывается по фрейму, когда кнопка становится видимой или невидимой.|
|[CMFCToolBarButton::Onsize](#onsize)|Вызывается в рамках, когда панель родительских инструментов изменяет свой размер или положение, и это изменение требует, чтобы кнопка изменила размер.|
|[CMFCToolBarButton::Ontoolhittest](#ontoolhittest)|Вызывается фреймворком, когда панель родительских инструментов должна определить, находится ли точка в связующего прямоугольнике кнопки.|
|[CMFCToolBarButton::OnUpdateToolTip](#onupdatetooltip)|Вызывается по фреймворку, когда панель родительских инструментов обновляет свой текст инструментария.|
|[CMFCToolBarButton::PrepareDrag](#preparedrag)|Вызывается по фрейму, когда кнопка собирается выполнить операцию перетаскивания.|
|[CMFCToolBarButton::Rect](#rect)|Извлекает прямоугольник кнопки.|
|[CMFCToolBarButton::ResetImageToDefault](#resetimagetodefault)|Наборы значения по умолчанию изображения, связанного с кнопкой.|
|[CMFCToolBarButton::SaveBarState](#savebarstate)|Сохраняет состояние кнопки панели инструментов.|
|[CMFCToolBarButton::Serialize](#serialize)|Читает этот объект из архива или запишет его в архив. (Переопределяет [CObject::Serialize](../../mfc/reference/cobject-class.md#serialize).)|
|[CMFCToolBarButton::SetACCData](#setaccdata)|Заполняет предоставленный `CAccessibilityData` объект данными о доступности из кнопки панели инструментов.|
|[CMFCToolBarButton::SetClipboardFormatName](#setclipboardformatname)|Переименованите глобальный формат буфера обмена.|
|[CMFCToolBarButton::SetImage](#setimage)|Устанавливает индекс изображения кнопки.|
|[CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands)|Устанавливает список команд, которые пользователь не может настроить.|
|[CMFCToolBarButton::SetRadio](#setradio)|Вызывается фреймворком при изменении кнопки проверенного состояния.|
|[CMFCToolBarButton::SetRect](#setrect)|Устанавливает прямоугольник кнопки.|
|[CMFCToolBarButton::SetStyle](#setstyle)|Устанавливает стиль кнопки.|
|[CMFCToolBarButton::SetVisible](#setvisible)|Определяет, видна ли кнопка.|
|[CMFCToolBarButton::Show](#show)|Показывает или скрывает кнопку.|

### <a name="data-members"></a>Элементы данных

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarButton::m_bImage](#m_bimage)|Определяет, отображается ли изображение на кнопке.|
|[CMFCToolBarButton::m_bText](#m_btext)|Определяет, отображается ли текстовая метка на кнопке.|
|[CMFCToolBarButton::m_bTextBelow](#m_btextbelow)|Определяет, отображается ли текстовая метка под изображением на кнопке.|
|[CMFCToolBarButton::m_bUserButton](#m_buserbutton)|Определяет, имеет ли кнопка изображение, определяемое пользователем.|
|[CMFCToolBarButton::m_bWholeText](#m_bwholetext)|Уточняется, отображает ли кнопка полную текстовую метку, даже если она не вписывается в прямоугольник.|
|[CMFCToolBarButton::m_bWrap](#m_bwrap)|Уточняется, будет ли кнопка рядом с сепаратором помещена в следующий ряд.|
|[CMFCToolBarButton::m_bWrapText](#m_bwraptext)|Определяет, включены ли многолинейные текстовые метки.|
|[CMFCToolBarButton::m_nID](#m_nid)|Идентификатор команды кнопки.|
|[CMFCToolBarButton::m_nStyle](#m_nstyle)|Стиль кнопки.|
|[CMFCToolBarButton::m_strText](#m_strtext)|Текстовая метка кнопки.|

## <a name="remarks"></a>Remarks

Объект `CMFCToolbarButton` — это элемент управления, который находится на панели инструментов. Его поведение напоминает обычное поведение. Вы можете назначить изображение и текстовую метку этому объекту. Кнопка панели инструментов также может иметь идентификатор команды. Когда пользователь нажимает кнопку панели инструментов, фреймворк выполняет команду, которую определяет этот идентификатор.

Как правило, кнопки панели инструментов могут быть настроены: пользователь может перетаскивать кнопки с одной панели инструментов на другую, а также копировать, вставить, удалять и отстранять текстовые метки и изображения. Чтобы пользователь не настраивал панель инструментов, можно заблокировать панель инструментов одним из двух способов. Либо установите `bLocked` флаг на ИСТИНу при вызове [CMFCToolBar::LoadToolBar](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar), или добавить идентификатор команды отдельной кнопки в глобальный список защищенных команд с помощью метода [CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands) метод.

`CMFCToolBarButton`объекты отображают изображения из глобальных коллекций изображений панели инструментов в приложении. Эти коллекции поддерживаются родительской панелью инструментов, [классом CMFCToolBar.](../../mfc/reference/cmfctoolbar-class.md) Для получения дополнительной информации [см.](../../mfc/reference/cmfctoolbarimages-class.md)

Когда пользователь нажимает кнопку панели инструментов, его родительская панель инструментов обрабатывает сообщение мыши и передает соответствующие действия кнопке. Если у кнопки есть действительный идентификатор команды, панель родительских инструментов отправляет WM_COMMAND сообщение в родительский кадр.

Класс `CMFCToolBarButton` является базовым классом для других классов кнопок панели инструментов, таких как [CMFCToolBarMenuButton класса,](../../mfc/reference/cmfctoolbarmenubutton-class.md) [CMFCToolBarEditButtonButton класса](../../mfc/reference/cmfctoolbareditboxbutton-class.md), и [CMFCToolBarComboButton класса](../../mfc/reference/cmfctoolbarcomboboxbutton-class.md).

## <a name="example"></a>Пример

В следующем примере показано, `CMFCToolBarButton` как настроить объект с `CMFCToolBarButton` помощью различных методов в классе. Пример иллюстрирует, как включить мышь и клавиатуру ввода, установить индекс изображения кнопки, установить прямоугольник кнопки, и сделать кнопку видимой. Этот фрагмент кода является частью [образца Tab Control.](../../overview/visual-cpp-samples.md)

[!code-cpp[NVC_MFC_TabControl#1](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_1.cpp)]
[!code-cpp[NVC_MFC_TabControl#2](../../mfc/reference/codesnippet/cpp/cmfctoolbarbutton-class_2.cpp)]

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

## <a name="requirements"></a>Требования

**Заголовок:** afxtoolbarbutton.h

## <a name="cmfctoolbarbuttoncanbedropped"></a><a name="canbedropped"></a>CMFCToolBarButton::Canbedropped

Уточняется, может ли пользователь расположить кнопку на панели инструментов или меню во время настройки.

```
virtual BOOL CanBeDropped(CMFCToolBar* pToolbar);
```

### <a name="parameters"></a>Параметры

*pToolbar*<br/>
[in] Не используется.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает TRUE.

### <a name="remarks"></a>Remarks

По умолчанию кнопка панели инструментов может быть сброшена на каждую настраиваемую (т.е. не заблокированную) панель инструментов.

Реализация этого метода по умолчанию возвращает TRUE. Переопределить этот метод и вернуть FALSE, если вы хотите, чтобы предотвратить пользователя от перепозиционирования кнопки.

## <a name="cmfctoolbarbuttoncanbestored"></a><a name="canbestored"></a>CMFCToolBarButton::CanBeStored

Определяет, можно ли хранить кнопку.

```
virtual BOOL CanBeStored() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает TRUE.

### <a name="remarks"></a>Remarks

Платформа использует этот метод, чтобы определить, может ли кнопка участвовать в операции перетаскивания и падения.

Реализация по умолчанию возвращает TRUE. Переопределить этот метод, если кнопка не может храниться в рамках операции перетаскивания и падения. Для получения дополнительной информации об операциях перетаскивания, [см.](../../mfc/drag-and-drop-ole.md)

## <a name="cmfctoolbarbuttoncanbestretched"></a><a name="canbestretched"></a>CMFCToolBarButton::CanbeStretched

Уточняется, может ли пользователь растягивать кнопку во время настройки.

```
virtual BOOL CanBeStretched() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Этот метод используется фреймворком для определения того, можно ли растянуть кнопку в режиме настройки.

Реализация этого метода по умолчанию возвращает FALSE. Переизбь этот метод, чтобы вернуть TRUE для управления переменной шириной, таких как комбо-бокс или ползунок.

Для получения дополнительной информации о режиме [настройки, см. CMFCToolBar::SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode).

## <a name="cmfctoolbarbuttoncmfctoolbarbutton"></a><a name="cmfctoolbarbutton"></a>CMFCToolBarButton::CMFCToolBarButton

Создает и инициализирует объект `CMFCToolBarButton`.

```
CMFCToolBarButton(
    UINT uiID,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE,
    BOOL bLocked=FALSE);
```

### <a name="parameters"></a>Параметры

*uiID*<br/>
(в) Идентификатор команды кнопки.

*iImage*<br/>
(в) Индекс изображения кнопки в коллекции изображений.

*lpszText*<br/>
(в) Текстовая метка кнопки. Может иметь значение NULL.

*bUserButton*<br/>
(в) Значение Boolean, определяющее, определяется ли кнопка пользователем. Если этот параметр является правдой, кнопка определяется пользователем. В противном случае изображение кнопки загружается с ресурса.

*Заблокирован*<br/>
(в) Значение Boolean, определяющее, можно ли настроить кнопку. Если этот параметр является правдой, кнопка не может быть настроена. В противном случае, кнопка может быть настроена.

## <a name="cmfctoolbarbuttoncomparewith"></a><a name="comparewith"></a>CMFCToolBarButton::CompareWith

Сравнивает этот экземпляр `CMFCToolBarButton` с предоставленным объектом.

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Параметры

*Других*<br/>
(в) Ссылка на объект для сравнения с этим экземпляром.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если предоставленный объект равен значению данного экземпляра; в противном случае, 0.

### <a name="remarks"></a>Remarks

Реализация по умолчанию определяет, равен ли идентификатор команды предоставленного объекта идентификатору команды этого экземпляра. Переопределить этот метод, если необходимо выполнить `CMFCToolBarButton` дополнительную обработку, чтобы определить, являются ли два объекта равными.

## <a name="cmfctoolbarbuttoncopyfrom"></a><a name="copyfrom"></a>CMFCToolBarButton::CopyFrom

Копирует свойства другой кнопки панели инструментов на текущую кнопку.

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Параметры

*src*<br/>
(в) Ссылка на кнопку исходного кода, из которой можно скопировать.

### <a name="remarks"></a>Remarks

Вызовите этот метод, чтобы скопировать другую кнопку панели инструментов на эту кнопку панели инструментов.

## <a name="cmfctoolbarbuttoncreatefromoledata"></a><a name="createfromoledata"></a>CMFCToolBarButton::CreateFromOleData

Создает `CMFCToolBarButton` объект из `COleDataObject` предоставленного объекта.

```
static CMFCToolBarButton* __stdcall CreateFromOleData(COleDataObject* pDataObject);
```

### <a name="parameters"></a>Параметры

*pDataObject*<br/>
(в) Объект исходных данных OLE.

### <a name="return-value"></a>Возвращаемое значение

Созданный объект `CMFCToolBarButton`.

### <a name="remarks"></a>Remarks

Этот метод используется платформой для выполнения передачи данных в различных форматах. Например, `CMFCOutlookBarPane::OnDragOver` метод использует этот метод для выполнения операций перетаскивания и падения.

## <a name="cmfctoolbarbuttonenablewindow"></a><a name="enablewindow"></a>CMFCToolBarButton::EnableWindow

Разрешает или запрещает ввод с помощью мыши и клавиатуры.

```
virtual void EnableWindow(BOOL bEnable = TRUE);
```

### <a name="parameters"></a>Параметры

*bEnable*<br/>
(в) Установите этот параметр для true, чтобы включить вход, или FALSE отключить вход.

### <a name="remarks"></a>Remarks

Этот метод `EnableWindow` вызывает функцию для включения или отключать входные данные. Для получения дополнительной информации [см.](/windows/win32/api/winuser/nf-winuser-enablewindow)

## <a name="cmfctoolbarbuttonexporttomenubutton"></a><a name="exporttomenubutton"></a>CMFCToolBarButton::ExporttoMenuButton

Копирует текст из кнопки панели инструментов в меню.

```
virtual BOOL ExportToMenuButton(CMFCToolBarMenuButton& menuButton) const;
```

### <a name="parameters"></a>Параметры

*менюButton*<br/>
(в) Ссылка на кнопку целевого меню.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает TRUE.

### <a name="remarks"></a>Remarks

Платформа призывает этот метод скопировать текст с кнопки панели инструментов на кнопку меню. Реализация по умолчанию копирует текстовую метку кнопки. Если текстовая метка пуста, этот метод копирует текст кнопки tooltip.

Реализация этого метода по умолчанию возвращает TRUE. Переопределить этот метод, если вы хотите предпринять дополнительные действия, когда фреймворк преобразует объект, полученный из [CMFCToolbarButton,](../../mfc/reference/cmfctoolbarbutton-class.md) в кнопку меню.

## <a name="cmfctoolbarbuttongetclipboardformat"></a><a name="getclipboardformat"></a>CMFCToolBarButton::GetClipboardФормат

Извлекает глобальный формат буфера обмена для приложения.

```
static CLIPFORMAT __stdcall GetClipboardFormat();
```

### <a name="return-value"></a>Возвращаемое значение

Глобальное значение CLIPFORMAT для приложения.

### <a name="remarks"></a>Remarks

Платформа вызывает этот метод для получения формата буфера обмена для операций передачи данных OLE. Например, метод [CMFCToolBarButton::CreateFromOleData](#createfromoledata) использует этот метод для копирования данных из исходного объекта данных OLE.

Этот метод устанавливает глобальное значение CLIPFORMAT при первом вызове этого метода. Все последующие вызовы к этому методу возвращают это значение.

Чтобы разрешить операции перетаскивания между приложениями, позвоните по методу [CMFCToolBarButton::SetClipboardFormatName.](#setclipboardformatname)

Для получения дополнительной информации о [Clipboard](../../mfc/clipboard.md)буферах обмена в МФЦ см.

## <a name="cmfctoolbarbuttongethwnd"></a><a name="gethwnd"></a>CMFCToolBarButton::GetHwnd

Извлекает ручку окна, связанную с кнопкой панели инструментов.

```
virtual HWND GetHwnd();
```

### <a name="return-value"></a>Возвращаемое значение

Ручка окна, связанная с кнопкой панели инструментов или NULL, если кнопка панели инструментов не имеет связанной ручки окна.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию возвращает NULL. Переизвейдийте этот метод, чтобы вернуть ручку окна вашего конкретного элемента управления.

## <a name="cmfctoolbarbuttongetimage"></a><a name="getimage"></a>CMFCToolBarButton::GetImage

Извлекает индекс изображения кнопки.

```
int GetImage() const;
```

### <a name="return-value"></a>Возвращаемое значение

Индекс изображения, связанный с этой кнопкой.

### <a name="remarks"></a>Remarks

Если кнопка имеет пользовательское изображение (т.е. если *bUserButton* был правдив в конструкторе), то возвращенный индекс определяет изображение в коллекции пользовательских изображений (см. [CMFCToolBar::GetUserImages](../../mfc/reference/cmfctoolbar-class.md#getuserimages)). В противном случае индекс определяет изображение в коллекции изображений, загруженных из файла ресурса (см. [CMFCToolBar::GetImages](../../mfc/reference/cmfctoolbar-class.md#getimages)). Для получения дополнительной информации о файлах ресурсов [см.](../../windows/working-with-resource-files.md)

## <a name="cmfctoolbarbuttongetinvalidaterect"></a><a name="getinvalidaterect"></a>CMFCToolBarButton::GetInvalidateRect

Извлекает область клиентской области кнопки, которая должна быть перерисована.

```
virtual const CRect GetInvalidateRect() const;
```

### <a name="return-value"></a>Возвращаемое значение

Объект, `CRect` опознававший область, который должен быть перерисован.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию возвращает всю область клиента. Переопределить этот метод, если вы хотите, чтобы другая область была перерисована.

## <a name="cmfctoolbarbuttongetparentwnd"></a><a name="getparentwnd"></a>CMFCToolBarButton::GetParentWnd

Извлекает родительское окно кнопки.

```
CWnd* GetParentWnd() const;
```

### <a name="return-value"></a>Возвращаемое значение

Родительское окно кнопки.

## <a name="cmfctoolbarbuttongetprotectedcommands"></a><a name="getprotectedcommands"></a>CMFCToolBarButton::GetProtectedCommands

Извлекает список команд, которые пользователь не может настроить.

```
static const CList<UINT,UINT>& GetProtectedCommands();
```

### <a name="return-value"></a>Возвращаемое значение

Список защищенных команд.

### <a name="remarks"></a>Remarks

В режиме настройки фреймворк отсутсвивает команды кнопки панели инструментов, которые защищены. Пользователь не может выполнять операции перетаскивания и отображения на отключенных кнопках панели инструментов.

Используйте метод [CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands) для определения списка защищенных команд.

## <a name="cmfctoolbarbuttongettextsize"></a><a name="gettextsize"></a>CMFCToolBarButton::GetTextSize

Извлекает размер текста кнопки.

```
SIZE GetTextSize() const;
```

### <a name="return-value"></a>Возвращаемое значение

Объект СИЗЕ, содержащий размер в пикселях текста кнопки.

## <a name="cmfctoolbarbuttonhasfocus"></a><a name="hasfocus"></a>CMFCToolBarButton::HasFocus

Определяет, имеет ли кнопка текущий входно-сфокус.

```
virtual BOOL HasFocus() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка имеет вхотворный фокус; в противном случае 0.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию возвращается ненулевой, если кнопка имеет фокус ввода или является окном окна ребенка или потомка, которое имеет фокус ввода. Эту функцию можно переопределить, чтобы настроить это поведение.

## <a name="cmfctoolbarbuttonhavehotborder"></a><a name="havehotborder"></a>CMFCToolBarButton::HaveHotBorder

Определяет, отображается ли граница кнопки при выборе кнопки пользователем.

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает TRUE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, чтобы определить, должна ли кнопка панели инструментов отображать свою границу, когда пользователь выбирает ее.

Реализация по умолчанию возвращает TRUE. Этот метод можно переопределить, чтобы настроить это поведение.

## <a name="cmfctoolbarbuttonisdrawimage"></a><a name="isdrawimage"></a>CMFCToolBarButton::IsdrawImage

Определяет, отображается ли изображение на кнопке.

```
BOOL IsDrawImage() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если изображение отображается на кнопке; в противном случае 0.

### <a name="remarks"></a>Remarks

Этот метод возвращает FALSE, если кнопка панели инструментов не имеет связанного изображения [(CMFCToolBarButton::GetImage](#getimage) возвращается -1) или если [CMFCToolBarButton::m_bImage](#m_bimage) установлен на FALSE.

## <a name="cmfctoolbarbuttonisdrawtext"></a><a name="isdrawtext"></a>CMFCToolBarButton::IsdrawText

Определяет, отображается ли текстовая метка на кнопке.

```
BOOL IsDrawText() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если отображается текстовая метка; в противном случае 0.

### <a name="remarks"></a>Remarks

Этот метод возвращает FALSE, если кнопка панели инструментов не имеет связанного текстового ярлыка [(CMFCToolBarButton::m_strText](#m_strtext) пуста) или [CMFCToolBarButton::m_bText](#m_btext) установлен на FALSE.

## <a name="cmfctoolbarbuttonisdroppeddown"></a><a name="isdroppeddown"></a>CMFCToolBarButton::IsdroppedDown

Определяет, отображает ли кнопка подменю.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию возвращает FALSE. Переопределить этот метод, чтобы вернуть правду, если ваш элемент управления отображает подменю.

## <a name="cmfctoolbarbuttoniseditable"></a><a name="iseditable"></a>CMFCToolBarButton:: Это невозможно

Определяет, можно ли настроить кнопку.

```
virtual BOOL IsEditable() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка может быть настроена пользователем; в противном случае 0.

### <a name="remarks"></a>Remarks

Платформа вызывает этот метод, чтобы определить, может ли пользователь настроить кнопку панели инструментов, используя операции перетаскивания или отсвагивания или отобрасывания.

Реализация по умолчанию возвращает FALSE, если идентификатор команды кнопки `IsStandardCommand` является стандартной командой (вы можете определить это, вызовив функцию) или если идентификатор команды находится в списке защищенных команд. Для получения дополнительной информации о защищенных команд, см [CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands) и [CMFCToolBarButton::SetProtectedCommands](#setprotectedcommands).

Переопределить этот метод, чтобы настроить его поведение.

## <a name="cmfctoolbarbuttonisextrasize"></a><a name="isextrasize"></a>CMFCToolBarButton::IsExtraSize

Определяет, может ли кнопка отображаться с расширенной границей.

```
virtual BOOL IsExtraSize() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка панели инструментов может отображаться с расширенной границей; в противном случае 0.

### <a name="remarks"></a>Remarks

Несколько скинов используют дополнительный размер для границ кнопок панели инструментов (например, круглые кнопки).

Если пользователь перемещает эту кнопку с одной панели инструментов на другую, фреймворк называет метод [CMFCToolBarButton::OnChangeParentWnd.](#onchangeparentwnd) [CmFCToolBarButton::OnChangeParentWnd](#onchangeparentwnd) метод устанавливает дополнительный размер флага, что из новой панели родительских инструментов (для получения дополнительной информации, [см. CMFCToolBar::IsButtonExtraSizeAvailable](../../mfc/reference/cmfctoolbar-class.md#isbuttonextrasizeavailable)).

## <a name="cmfctoolbarbuttonisfirstingroup"></a><a name="isfirstingroup"></a>CMFCToolBarButton::IsFirstinGroup

Определяет, находится ли кнопка в первой позиции в своей группе кнопок.

```
virtual BOOL IsFirstInGroup() const;
```

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если кнопка является первой кнопкой в своей группе кнопок; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Этот метод определяет *группу кнопок* как соседний набор кнопок, которые расположены на одном ряду и ограничены сепараторами или границей панели инструментов. Этот метод возвращает FALSE, если кнопка панели инструментов относится к кнопке **Настройка.** Для получения дополнительной информации о кнопке **настройки,** см [CMFCToolBar::GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton).

Позвоните в метод [CMFCToolBarButton::IsLastInGroup,](#islastingroup) чтобы определить, находится ли кнопка в последней позиции в своей группе кнопок.

## <a name="cmfctoolbarbuttonishidden"></a><a name="ishidden"></a>CMFCToolBarButton::IsHidden

Определяет, скрыта ли кнопка.

```
BOOL IsHidden() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка скрыта (невидимая); в противном случае 0.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, когда панель родительских инструментов растягивается, чтобы определить, видна ли кнопка панели инструментов.

Если вы установите кнопку, чтобы быть невидимым с помощью [CMFCToolBarButton::SetVisible](#setvisible) метод, используйте [CMFCToolBarButton::Видимо,](#isvisible) чтобы определить, является ли кнопка панели инструментов видна.

По умолчанию все кнопки панели инструментов видны. Используйте [CMFCToolBarButton::Показать](#show) метод, чтобы скрыть или показать кнопки панели инструментов.

## <a name="cmfctoolbarbuttonishorizontal"></a><a name="ishorizontal"></a>CMFCToolBarButton::Горизонтальный

Определяет, находится ли кнопка на горизонтальной панели инструментов.

```
BOOL IsHorizontal() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка панели инструментов расположена на горизонтальной панели инструментов; в противном случае 0.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод для определения компоновки кнопок панели инструментов.

Этот метод `m_bHorz` возвращает член данных. Значение по умолчанию участника `m_bHorz` данных является правдой; он сбросируется при каждом вызове на [метод CMFCToolBarButton::OnDraw.](#ondraw)

## <a name="cmfctoolbarbuttonislastingroup"></a><a name="islastingroup"></a>CMFCToolBarButton::IslastinGroup

Определяет, находится ли кнопка в последней позиции в своей группе кнопок.

```
virtual BOOL IsLastInGroup() const;
```

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если кнопка является последней кнопкой в своей группе кнопок; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Этот метод определяет *группу кнопок* как соседний набор кнопок, которые расположены на той же строке и ограничены сепараторами или границей панели инструментов Этот метод возвращает FALSE, если кнопка панели инструментов не имеет родительской панели инструментов или кнопка панели инструментов относится к кнопке **Настройка.** Для получения дополнительной информации о кнопке **настройки,** см [CMFCToolBar::GetCustomizeButton](../../mfc/reference/cmfctoolbar-class.md#getcustomizebutton).

Позвоните в [CMFCToolBarButton::IsFirstInGroup](#isfirstingroup) метод, чтобы определить, является ли кнопка в первой позиции в своей группе кнопок.

## <a name="cmfctoolbarbuttonislocked"></a><a name="islocked"></a>CMFCToolBarButton::Islocked

Определяет, находится ли кнопка на заблокированной (не настраиваемой) панели инструментов.

```
BOOL IsLocked() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка находится на заблокированной панели инструментов; в противном случае 0.

### <a name="remarks"></a>Remarks

Платформа вызывает этот метод, чтобы определить, может ли пользователь настроить кнопку панели инструментов, используя операции перетаскивания или отсвагивания или отобрасывания. Установите заблокированный атрибут на панели родительских инструментов с помощью метода [CMFCToolBar:LoadToolBar.](../../mfc/reference/cmfctoolbar-class.md#loadtoolbar) Рамочная платформа передает значение этого атрибута конструктору каждой кнопки панели инструментов [(CMFCToolbarButton),](../../mfc/reference/cmfctoolbarbutton-class.md)которую он вставляет в родительскую панель инструментов.

## <a name="cmfctoolbarbuttonisownerof"></a><a name="isownerof"></a>CMFCToolBarButton::Isownerof

Определяет, является ли кнопка владельцем предоставленной ручки окна.

```
virtual BOOL IsOwnerOf(HWND hwnd);
```

### <a name="parameters"></a>Параметры

*Hwnd*<br/>
(в) Ручка окна.

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка является владельцем предоставленной ручки окна; в противном случае 0.

### <a name="remarks"></a>Remarks

Этот метод возвращается ненулевой, если *hwnd* либо относится к прямой ручке окна или является ребенком ручки окна, которая связана с кнопкой. Этот метод возвращает 0, если *hwnd* является NULL.

## <a name="cmfctoolbarbuttonisvisible"></a><a name="isvisible"></a>CMFCToolBarButton::Видимо

Определяет, видна ли кнопка панели инструментов.

```
BOOL IsVisible() const;
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если кнопка панели инструментов видна; в противном случае 0.

### <a name="remarks"></a>Remarks

Вы можете показать или скрыть кнопку панели инструментов с помощью [CMFCToolBarButton::SetVisible](#setvisible) метод. Позвоните в [CPane::AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate) метод на панели родительских инструментов после вызова [CMFCToolBarButton::SetVisible](#setvisible) для перерасчета макета панели родительских инструментов.

## <a name="cmfctoolbarbuttoniswindowvisible"></a><a name="iswindowvisible"></a>CMFCToolBarButton::ОкноВидимо

Определяет, видна ли основная ручка окна кнопки.

```
virtual BOOL IsWindowVisible();
```

### <a name="return-value"></a>Возвращаемое значение

Nonzero, если основная ручка окна кнопки видна; в противном случае 0.

### <a name="remarks"></a>Remarks

Этот метод возвращается ненулевой, если атрибут стили основной ручки окна содержит WS_VISIBLE стиль. Этот метод возвращает FALSE, если основная ручка окна кнопки NULL.

## <a name="cmfctoolbarbuttonm_bimage"></a><a name="m_bimage"></a>CMFCToolBarButton::m_bImage

Определяет, отображается ли изображение на кнопке.

```
BOOL m_bImage;
```

### <a name="remarks"></a>Remarks

Если этот участник данных настроен на ИСТИНу, фреймворк отображает изображение, связанное с кнопкой панели инструментов; в противном случае фреймворк не отображает изображение. Этот участник влияет на значение возврата [CMFCToolBarButton::m_bImage](#m_bimage) метод.

## <a name="cmfctoolbarbuttonm_btext"></a><a name="m_btext"></a>CMFCToolBarButton::m_bText

Определяет, отображается ли текстовая метка на кнопке.

```
BOOL m_bText;
```

### <a name="remarks"></a>Remarks

Если этот участник данных настроен на ИСТИНу, в рамках отображается текстовая метка кнопки панели инструментов; в противном случае фреймворк не отображает текстовую метку. Этот участник влияет на значение возврата [CMFCToolBarButton::m_bText](#m_btext) метод.

## <a name="cmfctoolbarbuttonm_btextbelow"></a><a name="m_btextbelow"></a>CMFCToolBarButton::m_bTextBelow

Определяет, отображается ли текстовая метка под изображением на кнопке.

```
BOOL m_bTextBelow;
```

### <a name="remarks"></a>Remarks

Если эта переменная участника установлена на ИСТИНу, фреймворк отображает текст кнопки под изображением. Значение этого участника по умолчанию FALSE.

## <a name="cmfctoolbarbuttonm_buserbutton"></a><a name="m_buserbutton"></a>CMFCToolBarButton::m_bUserButton

Определяет, имеет ли кнопка изображение, определяемое пользователем

```
BOOL m_bUserButton;
```

### <a name="remarks"></a>Remarks

Этот участник данных настроен на истину, когда кнопка имеет пользователь-определенный образ, связанный с ним.

## <a name="cmfctoolbarbuttonm_bwholetext"></a><a name="m_bwholetext"></a>CMFCToolBarButton::m_bWholeText

Уточняется, отображает ли кнопка полную текстовую метку, даже если она не вписывается в прямоугольник.

```
BOOL m_bWholeText;
```

### <a name="remarks"></a>Remarks

Если этот участник данных настроен на ИСТИНу, фреймворк отображает полную текстовую метку, расширяя кнопку. В противном случае, фреймворк усечения и придатки эллипсис **(...**) к текстовой этикетке.

## <a name="cmfctoolbarbuttonm_bwrap"></a><a name="m_bwrap"></a>CMFCToolBarButton::m_bWrap

Уточняется, будет ли кнопка рядом с сепаратором помещена в следующий ряд.

```
BOOL m_bWrap;
```

### <a name="remarks"></a>Remarks

Платформа устанавливает этот член данных в TRUE, когда кнопка панели инструментов не помещается в текущую строку или когда вы указываете макет (например, определенное количество кнопок панели инструментов в строке).

Рамочная платформа помещает эту кнопку в следующий ряд, если этот участник данных настроен на ИСТИНу, а панель инструментов пристыкована горизонтально или плавающей.

Значение этого участника данных по умолчанию является FALSE.

## <a name="cmfctoolbarbuttonm_bwraptext"></a><a name="m_bwraptext"></a>CMFCToolBarButton::m_bWrapText

Определяет, включены ли многолинейные текстовые метки.

```
AFX_IMPORT_DATA static BOOL m_bWrapText;
```

### <a name="remarks"></a>Remarks

Если эта статическая переменная члена является истинной, фреймворк позволяет всем панели инструментов отображать многолинейные текстовые метки на кнопках панели инструментов.

Значение этого участника данных по умолчанию является FALSE.

## <a name="cmfctoolbarbuttonm_nid"></a><a name="m_nid"></a>CMFCToolBarButton::m_nID

Идентификатор команды кнопки.

```
UINT m_nID;
```

### <a name="remarks"></a>Remarks

Идентификатор команды -1 указывает, что кнопка является сепаратором. Все сепараторы кнопок имеют TBBS_SEPARATOR стиль. Смотрите [CMFCToolBarButton::m_nStyle](#m_nstyle) для получения дополнительной информации о стилях кнопок.

## <a name="cmfctoolbarbuttonm_nstyle"></a><a name="m_nstyle"></a>CMFCToolBarButton::m_nStyle

Стиль кнопки.

```
UINT m_nStyle;
```

### <a name="remarks"></a>Remarks

Ознакомиться со [стилами управления панелью инструментов](../../mfc/reference/toolbar-control-styles.md) можно найти в списках доступных стилей кнопок для панели инструментов.

## <a name="cmfctoolbarbuttonm_strtext"></a><a name="m_strtext"></a>CMFCToolBarButton::m_strText

Текстовая метка кнопки.

```
CString m_strText;
```

### <a name="remarks"></a>Remarks

Этот член данных содержит текстовую метку кнопки. Текстовая метка может быть пустой.

## <a name="cmfctoolbarbuttonnotifycommand"></a><a name="notifycommand"></a>CMFCToolBarButton:NotifyCommand

Уточняется, обрабатывает ли кнопка [WM_COMMAND](/windows/win32/menurc/wm-command) сообщение.

```
virtual BOOL NotifyCommand(int iNotifyCode);
```

### <a name="parameters"></a>Параметры

*iNotifyCode*<br/>
(в) Сообщение об уведомлении, связанное с командой.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Платформа вызывает этот метод, когда он собирается отправить [WM_COMMAND](/windows/win32/menurc/wm-command) сообщение в родительское окно.

По умолчанию этот метод возвращает FALSE. Переопределить этот метод, чтобы вернуть ИСТИНу, если вы хотите обработать сообщение WM_COMMAND или FALSE, чтобы указать, что панель родительских инструментов должна обрабатывать сообщение.

## <a name="cmfctoolbarbuttononaddtocustomizepage"></a><a name="onaddtocustomizepage"></a>CMFCToolBarButton::OnAddTo CustomizePage

Вызывается по фреймворку при добавлении кнопки в поле **настраиваемых** диалогов.

```
virtual void OnAddToCustomizePage();
```

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод, если вы хотите выполнить некоторые действия, когда кнопка добавляется в поле **настраиваемый** диалог.

## <a name="cmfctoolbarbuttononbeforedrag"></a><a name="onbeforedrag"></a>CMFCToolBarButton::Onbeforedrag

Уточняется, можно ли перетащить кнопку.

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если кнопку можно перетащить; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод до того, как пользователь начнет перетаскивать кнопку.

Реализация этого метода по умолчанию возвращает TRUE. Переопределить этот метод, чтобы вернуть FALSE, чтобы отключить перетаскивание кнопки.

## <a name="cmfctoolbarbuttononbeforedrop"></a><a name="onbeforedrop"></a>CMFCToolBarButton::Onbeforedrop

Определяет, может ли пользователь сбросить кнопку на панель целевых инструментов.

```
virtual BOOL OnBeforeDrop(CMFCToolBar* pTarget);
```

### <a name="parameters"></a>Параметры

*pTarget*<br/>
(в) Цель операции «перетаскивание и падение».

### <a name="return-value"></a>Возвращаемое значение

TRUE, если кнопка может быть сброшена на предоставленную целевую панель инструментов; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод до того, как кнопка будет отброшена на панель инструментов.

Реализация этого метода по умолчанию возвращает TRUE. Переопределить этот метод, чтобы вернуть FALSE, чтобы отключить операцию сброса на указанной цели.

## <a name="cmfctoolbarbuttononcalculatesize"></a><a name="oncalculatesize"></a>CMFCToolBarButton::OncalculateSize

Вызывается фреймворком для расчета размера кнопки для заданного контекста устройства и состояния стыковки.

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
(в) Контекст устройства, отображаемый кнопкой.

*размерПо умолчанию*<br/>
(в) Размер кнопки по умолчанию.

*bHorz*<br/>
(в) Состояние док-станции родительской панели инструментов. Этот параметр является правдой, если панель инструментов пристыкована горизонтально или плавает, или FALSE, если панель инструментов пристыкована вертикально.

### <a name="return-value"></a>Возвращаемое значение

Структура, `SIZE` содержащая размеры кнопки, в пикселях.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод для определения размера кнопки панели инструментов для заданного контекста устройства и состояния стыковки.

Реализация по умолчанию учитывает размеры текста и изображения (если они отображаются), позиции текста и изображения (текст ниже или справа от изображения) и состояние док-станции панели инструментов.

Переопределить этот метод, если вы хотите узнать размер нестандартной кнопки (например, кнопка коробки для отсечения).

## <a name="cmfctoolbarbuttononcancelmode"></a><a name="oncancelmode"></a>CMFCToolBarButton::OnCancelmode

Вызывается по системе для обработки [сообщения WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode)

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод, если вы хотите обрабатывать [сообщение WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode)

## <a name="cmfctoolbarbuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a>CMFCToolBarButton::OnChangeParentWnd

Вызывается по фрейму, когда кнопка вставляется в новую панель инструментов.

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Параметры

*pWndParent*<br/>
(в) Новое родительское окно.

### <a name="remarks"></a>Remarks

Кнопка вставляется в панель инструментов, например, когда пользователь перетаскивает ее из одной панели инструментов в другую панель инструментов.

Реализация этого метода по умолчанию ничего не делает.

## <a name="cmfctoolbarbuttononclick"></a><a name="onclick"></a>CMFCToolBarButton::OnClick

Вызывается по фреймворку, когда пользователь нажимает кнопку мыши.

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay=TRUE);
```

### <a name="parameters"></a>Параметры

*pWnd*<br/>
(в) Родительское окно кнопки панели инструментов.

*bDelay*<br/>
(в) ПРАВДА, если сообщение должно быть обработано с задержкой.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, когда пользователь нажимает кнопку панели инструментов.

Реализация по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод, чтобы вернуть ненулевое значение, если кнопка обрабатывает сообщение клика.

## <a name="cmfctoolbarbuttononclickup"></a><a name="onclickup"></a>CMFCToolBarButton::OnClickUp

Вызывается по фреймворку, когда пользователь выпускает кнопку мыши.

```
virtual BOOL OnClickUp();
```

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, когда пользователь выпускает кнопку панели инструментов.

Реализация по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод, чтобы вернуть ненулевое значение, если кнопка обрабатывает сообщение клика.

## <a name="cmfctoolbarbuttononcontexthelp"></a><a name="oncontexthelp"></a>CMFCToolBarButton::OnContextHelp

Вызывается в фреймворке, когда панель родительских инструментов обрабатывает WM_HELPHITTEST сообщение.

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

*pWnd*<br/>
(в) Родительское окно кнопки панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод, чтобы вернуть ненулевое значение, если кнопка обрабатывает сообщение справки.

Для получения дополнительной информации [TN028: Context-Sensitive Help Support](../../mfc/tn028-context-sensitive-help-support.md)о WM_HELPHITTEST сообщении см.

## <a name="cmfctoolbarbuttononctlcolor"></a><a name="onctlcolor"></a>CMFCToolBarButton::OnctlColor

Вызывается по системе, когда панель родительских инструментов обрабатывает WM_CTLCOLOR сообщение.

```
virtual HBRUSH OnCtlColor(
    CDC* pDC,
    UINT nCtlColor);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
(в) Контекст устройства, отображаемый кнопкой.

*nCtlColor*<br/>
(в) Уведомление о конкретном цвете.

### <a name="return-value"></a>Возвращаемое значение

Ручка к объекту кисти, которую используется фреймворком для нарисования фона кнопки.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, когда панель родительских инструментов обрабатывает WM_CTLCOLOR сообщение для кнопки панели инструментов, содержащей элемент управления Windows. Фрейм не вызывает этот метод, если кнопка панели инструментов не имеет окон.

Рамка вызывает этот метод, когда платформа панели инструментов находится в режиме настройки и кнопка панели инструментов разблокирована. Для получения дополнительной информации о режиме [настройки, см. CMFCToolBar::SetCustomizeMode](../../mfc/reference/cmfctoolbar-class.md#setcustomizemode). Для получения дополнительной информации о блокировке кнопок панели инструментов, [см. CMFCToolBarButton::IsLocked](#islocked).

Реализация по умолчанию ничего не делает и возвращает NULL.

## <a name="cmfctoolbarbuttononcustomizemenu"></a><a name="oncustomizemenu"></a>CMFCToolBarButton::OnCustomizeMenu

Позволяет кнопке изменять предоставленное меню, когда приложение отображает меню ярлыка на панели родительских инструментов.

```
virtual BOOL OnCustomizeMenu(CMenu* pMenu);
```

### <a name="parameters"></a>Параметры

*pMenu*<br/>
(в) Меню для настройки.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Реализация по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод и вернуть ненулевое значение, если вы хотите изменить содержимое предоставленного меню.

## <a name="cmfctoolbarbuttonondblclk"></a><a name="ondblclk"></a>CMFCToolBarButton::OnDblClk

Вызывается в фреймворке, когда панель родительских инструментов обрабатывает [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) сообщение.

```
virtual void OnDblClk(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

*pWnd*<br/>
Родительское окно кнопки.

### <a name="remarks"></a>Remarks

Этот метод вызывается `CMFCToolBar::OnLButtonDblClk` методом, когда панель родительских инструментов обрабатывает [WM_LBUTTONDBLCLK](/windows/win32/inputdev/wm-lbuttondblclk) сообщение.

Реализация этого метода по умолчанию ничего не делает.

## <a name="cmfctoolbarbuttonondraw"></a><a name="ondraw"></a>CMFCToolBarButton::Ondraw

Вызывается в рамках, чтобы нарисовать кнопку с помощью указанных стилей и опций.

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz=TRUE,
    BOOL bCustomizeMode=FALSE,
    BOOL bHighlight=FALSE,
    BOOL bDrawBorder=TRUE,
    BOOL bGrayDisabledButtons=TRUE);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
(в) Контекст устройства, отображаемый кнопкой.

*rect*<br/>
(в) Ограничивающий прямоугольник кнопки.

*pImages*<br/>
(в) Коллекция изображений панели инструментов, которая связана с кнопкой.

*bHorz*<br/>
(в) Состояние док-станции родительской панели инструментов. Этот параметр является правдой, когда кнопка пристыкована горизонтально и FALSE, когда кнопка пристыкована вертикально.

*bCustomizeMode*<br/>
(в) Определяет, находится ли панель инструментов в режиме настройки. Этот параметр является правдой, когда панель инструментов находится в режиме настройки и FALSE, когда панель инструментов не находится в режиме настройки.

*bHighlight*<br/>
(в) Определяет, выделена ли кнопка. Этот параметр является правдой, когда кнопка выделена и FALSE, когда кнопка не выделена.

*bDrawBorder*<br/>
(в) Определяет, должна ли кнопка отображать свою границу. Этот параметр является правдой, когда кнопка должна отображать свою границу и FALSE, когда кнопка не должна отображать свою границу.

*bGrayDisabledButtons*<br/>
(в) Уточняется, следует ли оттенить кнопки для инвалидов или использовать коллекцию отключенных изображений. Этот параметр является правдой, когда отключенные кнопки должны быть затенены и FALSE, когда этот метод должен использовать коллекцию отключенных изображений.

### <a name="remarks"></a>Remarks

Переопределить этот метод, чтобы настроить рисунок кнопки панели инструментов.

## <a name="cmfctoolbarbuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a>CMFCToolBarButton::OnDrawOnCustomizeList

Вызывается фреймворком, чтобы нарисовать кнопку в панели **команд** в поле **настраивания** диалогов.

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
(в) Контекст устройства, отображаемый кнопкой.

*rect*<br/>
(в) Ограничивающий прямоугольник кнопки.

*bВыбор*<br/>
(в) Определяет, выбрана ли кнопка. Если этот параметр является правдой, кнопка выбрана. Если этот параметр FALSE, кнопка не выбрана.

### <a name="return-value"></a>Возвращаемое значение

Ширина в пикселях кнопки на указанном контексте устройства.

### <a name="remarks"></a>Remarks

Этот метод вызывается полем диалога настройки **(вкладка Команд),** когда кнопка вот-вот отобразится в поле списка владельца-рисования.

Реализация этого метода по умолчанию отображает метку изображения и текста кнопки, если они доступны. Если текстовая метка кнопки недоступна, метод отображает текст инструментария.

Переопределить этот метод для выполнения пользовательского чертежа.

## <a name="cmfctoolbarbuttonongetcustomtooltiptext"></a><a name="ongetcustomtooltiptext"></a>CMFCToolBarButton::OngetCustomtoolTipText

Вызывается рамки для получения пользовательского текста tooltip для кнопки.

```
virtual BOOL OnGetCustomToolTipText(CString& strToolTip);
```

### <a name="parameters"></a>Параметры

*strTool Tip*<br/>
(ваут) Объект, `CString` который получает пользовательский текст инструментария.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод, когда отображает набор инструментов для кнопки панели инструментов. Если этот метод возвращает FALSE, в фреймворке используется набор инструментов по умолчанию.

Реализация по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод и вернуть ненулевое значение, чтобы обеспечить пользовательский текст инструментария для кнопки панели инструментов.

## <a name="cmfctoolbarbuttononglobalfontschanged"></a><a name="onglobalfontschanged"></a>CMFCToolBarButton::OnGlobalFontsChanged

Вызывается рамками, когда глобальный шрифт изменился.

```
virtual void OnGlobalFontsChanged();
```

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод для обновления шрифта, который используется для отображения текста кнопки.

## <a name="cmfctoolbarbuttononmove"></a><a name="onmove"></a>CMFCToolBarButton::Onmove

Вызывается по фреймворку при движении родительской панели инструментов.

```
virtual void OnMove();
```

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод, чтобы изменить положение кнопки при перемещении панели родительских инструментов.

## <a name="cmfctoolbarbuttononshow"></a><a name="onshow"></a>CMFCToolBarButton::Onshow

Вызывается по фрейму, когда кнопка становится видимой или невидимой.

```
virtual void OnShow(BOOL bShow);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
(в) Определяет, видна ли кнопка. Если этот параметр является правдой, кнопка видна. В противном случае кнопка не видна.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод для обновления видимости кнопки.

## <a name="cmfctoolbarbuttononsize"></a><a name="onsize"></a>CMFCToolBarButton::Onsize

Вызывается в фреймворке, когда панель родительских инструментов изменяет свой размер или положение, и это изменение приводит к изменению размера кнопки.

```
virtual void OnSize(int iSize);
```

### <a name="parameters"></a>Параметры

*iSize*<br/>
(в) Новая ширина кнопки.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод, чтобы изменить размер кнопки при изменении размера или положения панели родительских инструментов.

## <a name="cmfctoolbarbuttonontoolhittest"></a><a name="ontoolhittest"></a>CMFCToolBarButton::Ontoolhittest

Вызывается фреймворком, когда панель родительских инструментов должна определить, находится ли точка в связующего прямоугольнике кнопки.

```
virtual BOOL OnToolHitTest(
    const CWnd* pWnd,
    TOOLINFO* pTI);
```

### <a name="parameters"></a>Параметры

*pWnd*<br/>
(в) Родительское окно кнопки. Может иметь значение NULL.

*Pti*<br/>
(в) Структура, `TOOLINFO` содержащая информацию об инструменте в элементе управления набором инструментов.

### <a name="return-value"></a>Возвращаемое значение

Результат, `OnMenuButtonToolHitTest` если кнопка может получить указатель на окно родительской рамы; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Этот метод вызывает один из следующих методов, если он может преобразовать родительское окно в действительный объект кадра:

- [CMDIFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/cmdiframewndex-class.md#onmenubuttontoolhittest)

- [CFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/cframewndex-class.md#onmenubuttontoolhittest)

- [COleIPFrameWndEx::OnMenuButtonToolHitTest](../../mfc/reference/coleipframewndex-class.md#onmenubuttontoolhittest)

## <a name="cmfctoolbarbuttononupdatetooltip"></a><a name="onupdatetooltip"></a>CMFCToolBarButton::OnUpdateToolTip

Вызывается по фреймворку, когда панель родительских инструментов обновляет свой текст инструментария.

```
virtual BOOL OnUpdateToolTip(
    CWnd* pWndParent,
    int iButtonIndex,
    CToolTipCtrl& wndToolTip,
    CString& str);
```

### <a name="parameters"></a>Параметры

*pWndParent*<br/>
(в) Родительское окно.

*iButtonIndex*<br/>
(в) Индекс кнопки с нулевым уровнем в коллекции родительских кнопок.

*wndToolTip*<br/>
(в) Элемент управления, отображаемого текстом tooltip.

*Ул*<br/>
(ваут) Объект, `CString` который получает обновленный текст tooltip.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает FALSE.

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает и возвращает FALSE. Переопределить этот метод, чтобы вернуть ненулевое значение, если вы предоставите строку текста tooltip.

## <a name="cmfctoolbarbuttonpreparedrag"></a><a name="preparedrag"></a>CMFCToolBarButton::PrepareDrag

Вызывается по фрейму, когда кнопка собирается выполнить операцию перетаскивания.

```
virtual BOOL PrepareDrag(COleDataSource& srcItem);
```

### <a name="parameters"></a>Параметры

*srcItem*<br/>
(в) Объект, `COleDataSource` хранящим информацию об операции перетаскивания.

### <a name="return-value"></a>Возвращаемое значение

TRUE, если операция увенчается успехом; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Рамочная система вызывает этот метод для подготовки кнопки панели инструментов для хранения ее состояния в предоставленном `COleDataSource` объекте. Этот метод хранит свое состояние, выделяя себя в общий файл, а затем передавая этот файл методу [COleDataSource::CacheGlobalData.](../../mfc/reference/coledatasource-class.md#cacheglobaldata) Для получения дополнительной информации о сериализации кнопки инструментов, [см. CMFCToolBarButton::Serialize](#serialize).

Этот метод ничего не делает и возвращает ПРАВДУ, если кнопка не может быть сохранена [(метод CMFCToolBarButton::CanBeStored](#canbestored) метод возвращает FALSE). Он возвращает FALSE, если при сериализации объекта происходит исключение.

Для получения дополнительной информации об операциях OLE перетаскивания и [падения](../../mfc/drag-and-drop-ole.md)см.

## <a name="cmfctoolbarbuttonrect"></a><a name="rect"></a>CMFCToolBarButton::Rect

Извлекает прямоугольник кнопки.

```
const CRect& Rect() const;
```

### <a name="return-value"></a>Возвращаемое значение

Объект, `CRect` содержащий прямоугольник кнопки.

## <a name="cmfctoolbarbuttonresetimagetodefault"></a><a name="resetimagetodefault"></a>CMFCToolBarButton::ResetImageToDefault

Наборы значения по умолчанию изображения, связанного с кнопкой.

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Remarks

Этот метод извлекает изображение по умолчанию из панели родительских инструментов с помощью метода [CMFCToolBar::GetDefaultImage.](../../mfc/reference/cmfctoolbar-class.md#getdefaultimage) Если кнопка не имеет связанного изображения по умолчанию, этот метод устанавливает текстовую метку кнопки в соответствии с ее строкным ресурсом с помощью метода [CStringT::LoadString.](../../atl-mfc-shared/reference/cstringt-class.md#loadstring) Для получения дополнительной информации о строке ресурсов, [см. Работа с файлами ресурсов](../../windows/working-with-resource-files.md).

Этот метод ничего не делает, если кнопка имеет изображение, определяемое пользователем.

## <a name="cmfctoolbarbuttonsavebarstate"></a><a name="savebarstate"></a>CMFCToolBarButton::SaveBarState

Сохраняет состояние кнопки панели инструментов.

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Remarks

Фрейм вызывает этот метод, когда он создает `CMFCToolBarButton` объект в результате операции перетаскивания и падения.

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод, чтобы сохранить состояние кнопки панели инструментов для внешнего источника данных.

## <a name="cmfctoolbarbuttonserialize"></a><a name="serialize"></a>CMFCToolBarButton::Serialize

Читает этот объект из архива или запишет его в архив.

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Параметры

*ar*<br/>
(в) Объект, `CArchive` с которого или к которому сериализовать.

### <a name="remarks"></a>Remarks

Этот метод поддерживает процессы передачи данных, такие как буфер обмена или операции перетаскивания. Он читает или записывает свойства кнопки, такие как идентификатор, текстовая метка и идентификатор изображения с или к предоставленному `CArchive` объекту.

Для примеров сериализации [см. Сериализация: Сериализация объекта](../../mfc/serialization-serializing-an-object.md).

## <a name="cmfctoolbarbuttonsetaccdata"></a><a name="setaccdata"></a>CMFCToolBarButton::SetACCData

Заполняет предоставленный `CAccessibilityData` объект данными о доступности из кнопки панели инструментов.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Параметры

*pРодитель*<br/>
(в) Родительское окно кнопки панели инструментов.

*данные*<br/>
(в) Объект, `CAccessibilityData` населенный данными доступности кнопки панели инструментов.

### <a name="return-value"></a>Возвращаемое значение

Этот метод возвращает TRUE.

### <a name="remarks"></a>Remarks

Переопределить этот метод, чтобы вернуть FALSE, если кнопка панели инструментов не обеспечивает данные о доступности.

## <a name="cmfctoolbarbuttonsetclipboardformatname"></a><a name="setclipboardformatname"></a>CMFCToolBarButton::SetClipboardFormatName

Переименованите глобальный формат буфера обмена.

```
static void __stdcall SetClipboardFormatName(LPCTSTR lpszName);
```

### <a name="parameters"></a>Параметры

*lpszName*<br/>
(в) Новое название глобального формата буфера обмена. Не может быть NULL.

### <a name="remarks"></a>Remarks

Этот метод позволяет операциям перетаскивания и падения происходить между несколькими приложениями. Каждое приложение должно предоставить одно и то же название формата буфера обмена.

Вы должны позвонить по этому методу до того, как фреймворк вызовет [CMFCToolBarButton::GetClipboardFormat](#getclipboardformat).

## <a name="cmfctoolbarbuttonsetimage"></a><a name="setimage"></a>CMFCToolBarButton::SetImage

Устанавливает индекс изображения кнопки.

```
virtual void SetImage(int iImage);
```

### <a name="parameters"></a>Параметры

*iImage*<br/>
(в) Индекс изображения в коллекции изображений панели инструментов.

### <a name="remarks"></a>Remarks

Если кнопка панели инструментов является сепаратором, *iImage* относится к новой ширине кнопки сепаратора.

Если *iImage* меньше нуля, этот метод отводит рисунок изображения и позволяет рисовать текстовую метку кнопки.

## <a name="cmfctoolbarbuttonsetprotectedcommands"></a><a name="setprotectedcommands"></a>CMFCToolBarButton::SetProtectedCommands

Устанавливает список команд, которые пользователь не может настроить.

```
static void SetProtectedCommands(const CList<UINT,UINT>& lstCmds);
```

### <a name="parameters"></a>Параметры

*lstCmds*<br/>
(в) Список защищенных команд.

### <a name="remarks"></a>Remarks

В режиме настройки фреймворк отсутсвивает команды кнопки панели инструментов, которые защищены. Пользователь не может выполнять операции перетаскивания и отображения на отключенных кнопках панели инструментов.

Используйте метод [CMFCToolBarButton::GetProtectedCommands](#getprotectedcommands) для получения списка защищенных команд.

## <a name="cmfctoolbarbuttonsetradio"></a><a name="setradio"></a>CMFCToolBarButton::SetRadio

Вызывается фреймворком при изменении кнопки проверенного состояния.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Remarks

Реализация этого метода по умолчанию ничего не делает. Переопределить этот метод для выполнения пользовательского действия, когда кнопка изменяет свое проверенное состояние.

## <a name="cmfctoolbarbuttonsetrect"></a><a name="setrect"></a>CMFCToolBarButton::SetRect

Устанавливает прямоугольник кнопки.

```cpp
void SetRect(const CRect rect);
```

### <a name="parameters"></a>Параметры

*rect*<br/>
(в) Новый прямоугольник кнопки.

### <a name="remarks"></a>Remarks

Этот метод называется [CMFCToolBarButton::OnMove](#onmove) метод после того, как он устанавливает новый прямоугольник границы.

## <a name="cmfctoolbarbuttonsetstyle"></a><a name="setstyle"></a>CMFCToolBarButton::SetStyle

Устанавливает стиль кнопки.

```
virtual void SetStyle(UINT nStyle);
```

### <a name="parameters"></a>Параметры

*nStyle*<br/>
(в) Новый стиль кнопки.

### <a name="remarks"></a>Remarks

Реализация по умолчанию устанавливает [CMFCToolBarButton::m_nStyle](#m_nstyle) данных на *nStyle*. Переопределить этот метод, если вы хотите выполнить дополнительную обработку для обработки изменения стиля. Посмотреть [стили управления панели инструментов](toolbar-control-styles.md) для получения списка действительных флагов стиля.

## <a name="cmfctoolbarbuttonsetvisible"></a><a name="setvisible"></a>CMFCToolBarButton::SetVisible

Определяет, видна ли кнопка.

```cpp
void SetVisible(BOOL bShow=TRUE);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
(в) Значение Boolean, которое определяет, показывать или скрывать кнопку. Если этот параметр является правдой, кнопка отображается. Если параметр FALSE, кнопка скрыта.

### <a name="remarks"></a>Remarks

Используйте эту функцию, чтобы скрыть или показать определенную кнопку панели инструментов. Позвоните в [метод CPane::AdjustSizeImmediate](../../mfc/reference/cpane-class.md#adjustsizeimmediate) после вызова этого метода.

## <a name="cmfctoolbarbuttonshow"></a><a name="show"></a>CMFCToolBarButton::Show

Показывает или скрывает кнопку.

```cpp
void Show(BOOL bShow);
```

### <a name="parameters"></a>Параметры

*bShow*<br/>
(в) Значение Boolean, которое определяет, показывать или скрывать кнопку. Если этот параметр является правдой, кнопка отображается. Если параметр FALSE, кнопка скрыта.

### <a name="remarks"></a>Remarks

Платформа вызывает этот метод для обновления видимости кнопок панели инструментов при повторном размере панели родительских инструментов. Рамочная система вызывает этот метод с *bShow,* установленным на FALSE, когда кнопка больше не вписывается в рамки панели инструментов. Рамка называет этот метод с *bShow* установить к TRUE, когда после изобрачив кнопку снова вписывается в рамки панели инструментов.

Используйте [CMFCToolBarButton::SetVisible](#setvisible) метод, чтобы установить общую видимость кнопки.

Этот метод [называетметодОМ CMFCToolBarButton::OnShow](#onshow) после обновления состояния видимости кнопки.

## <a name="see-also"></a>См. также раздел

[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Классы](../../mfc/reference/mfc-classes.md)<br/>
[Класс CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)<br/>
[Класс CMFCToolBarImages](../../mfc/reference/cmfctoolbarimages-class.md)
