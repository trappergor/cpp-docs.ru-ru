---
title: Класс Кбитмапбуттон
ms.date: 11/04/2016
f1_keywords:
- CBitmapButton
- AFXEXT/CBitmapButton
- AFXEXT/CBitmapButton::CBitmapButton
- AFXEXT/CBitmapButton::AutoLoad
- AFXEXT/CBitmapButton::LoadBitmaps
- AFXEXT/CBitmapButton::SizeToContent
helpviewer_keywords:
- CBitmapButton [MFC], CBitmapButton
- CBitmapButton [MFC], AutoLoad
- CBitmapButton [MFC], LoadBitmaps
- CBitmapButton [MFC], SizeToContent
ms.assetid: 9ad6cb45-c3c4-4fb1-96d3-1fe3df7bbcfc
ms.openlocfilehash: 0cf4554f86f4a9275e4d96b3db519fde7fb05b22
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87231875"
---
# <a name="cbitmapbutton-class"></a>Класс Кбитмапбуттон

Создает элементы управления "кнопка", на которые вместо текста помещаются растровые изображения.

## <a name="syntax"></a>Синтаксис

```
class CBitmapButton : public CButton
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[Кбитмапбуттон:: Кбитмапбуттон](#cbitmapbutton)|Формирует объект `CBitmapButton`.|

### <a name="public-methods"></a>Открытые методы

|name|Описание|
|----------|-----------------|
|[Кбитмапбуттон:: автозагрузки](#autoload)|Связывает кнопку в диалоговом окне с объектом `CBitmapButton` класса, загружает растровые изображения по имени и изменяет размер кнопки в соответствии с точечным рисунком.|
|[Кбитмапбуттон:: Лоадбитмапс](#loadbitmaps)|Инициализирует объект, загружая один или несколько именованных ресурсов точечного рисунка из файла ресурсов приложения и присоединяя растровые изображения к объекту.|
|[Кбитмапбуттон:: SizeToContent](#sizetocontent)|Изменяет размер кнопки для размещения точечного рисунка.|

## <a name="remarks"></a>Remarks

`CBitmapButton`объекты содержат до четырех точечных рисунков, которые содержат изображения для различных состояний. кнопка может принимать следующие предположения: Up (или обычная), Down (или Selected), Focused и Disabled. Требуется только первое растровое изображение; другие являются необязательными.

Изображения растровой кнопки включают границы вокруг изображения, а также само изображение. Эта граница обычно играет ту же часть, отображая состояние кнопки. Например, точечный рисунок для состояния «с упором» обычно имеет состояние «вверх», но с штриховым пунктирным прямоугольником от границы или толстой сплошной линией на границе. Битовая карта отключенного состояния обычно напоминает состояние "вверх", но имеет меньшую контрастность (например, затемненный или серый выбор меню).

Эти растровые изображения могут иметь любой размер, но все они обрабатываются так, как будто они имеют тот же размер, что и точечный рисунок для состояния up.

Различные приложения требуют различных сочетаний растровых изображений:

|Up|Down|Focused|Выключено|Развертывание|
|--------|----------|-------------|--------------|-----------------|
|×||||Bitmap|
|×|×|||Кнопка без стиля WS_TABSTOP|
|×|×|×|×|Кнопка диалогового окна со всеми состояниями|
|×|×|×||Кнопка диалогового окна с WS_TABSTOP стилем|

При создании элемента управления "точечный рисунок" задайте стиль BS_OWNERDRAW, чтобы указать, что эта кнопка рисуется владельцем. Это приводит к тому, что Windows отправляет WM_MEASUREITEM и WM_DRAWITEM сообщения для кнопки; платформа обрабатывает эти сообщения и управляет внешним видом кнопки.

### <a name="to-create-a-bitmap-button-control-in-a-windows-client-area"></a>Создание элемента управления "кнопка точечного рисунка" в клиентской области окна

1. Создайте одно до четырех растровых изображений для кнопки.

1. Создайте объект [кбитмапбуттон](#cbitmapbutton) .

1. Вызовите функцию [CREATE](../../mfc/reference/cbutton-class.md#create) , чтобы создать элемент управления "кнопка Windows" и присоединить его к `CBitmapButton` объекту.

1. Вызовите функцию-член [лоадбитмапс](#loadbitmaps) , чтобы загрузить ресурсы растрового изображения после создания кнопки Bitmap.

### <a name="to-include-a-bitmap-button-control-in-a-dialog-box"></a>Включение элемента управления "растровое изображение" в диалоговое окно

1. Создайте одно до четырех растровых изображений для кнопки.

1. Создайте шаблон диалогового окна с кнопкой "владелец-прорисовка", расположенной в месте, где должна быть кнопка точечный рисунок. Размер кнопки в шаблоне не имеет значения.

1. Задайте для подписи кнопки значение "MYIMAGE" и определите символ для кнопки, например IDC_MYIMAGE.

1. В скрипте ресурсов приложения присвойте каждому из образов, созданных для кнопки, идентификатор, созданный путем добавления одной из букв U, D, "F" или "X" (для вверх, вниз, с сортировкой и отключенной) в строку, используемую для подписи кнопки на шаге 3. Для названия кнопки "MYIMAGE", например, идентификаторами будут "МИМАЖЕУ", "МИМАЖЕД", "МИМАЖЕФ" и "МИМАЖЕКС". **Необходимо** указать идентификатор точечных рисунков в двойных кавычках. В противном случае редактор ресурсов присвоит ресурсу целое число, и при загрузке изображения произойдет сбой MFC.

1. В классе диалогового окна приложения (производном от `CDialog` ) добавьте `CBitmapButton` объект-член.

1. В `CDialog` [подонинитдиалоге](../../mfc/reference/cdialog-class.md#oninitdialog) объекта вызовите `CBitmapButton` функцию [автозагрузки](#autoload) объекта, используя в качестве параметров идентификатор элемента управления кнопки и `CDialog` указатель на объект **`this`** .

Если требуется работать с сообщениями уведомлений Windows, например BN_CLICKED, отправленных элементом управления "растровое изображение" на родительский элемент (обычно это класс, производный от `CDialog` ), добавьте в объект, производный от класса, `CDialog` запись схемы сообщения и функцию-член обработчика сообщений для каждого сообщения. Уведомления, отправленные объектом, совпадают с `CBitmapButton` отправленными объектом [кбуттон](../../mfc/reference/cbutton-class.md) .

Класс [CToolBar](../../mfc/reference/ctoolbar-class.md) использует другой подход к точечным кнопкам.

Дополнительные сведения о см `CBitmapButton` . в разделе [элементы управления](../../mfc/controls-mfc.md).

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](../../mfc/reference/cobject-class.md)

[CCmdTarget](../../mfc/reference/ccmdtarget-class.md)

[CWnd](../../mfc/reference/cwnd-class.md)

[CButton](../../mfc/reference/cbutton-class.md)

`CBitmapButton`

## <a name="requirements"></a>Требования

**Заголовок:** афксекст. h

## <a name="cbitmapbuttonautoload"></a><a name="autoload"></a>Кбитмапбуттон:: автозагрузки

Связывает кнопку в диалоговом окне с объектом `CBitmapButton` класса, загружает растровые изображения по имени и изменяет размер кнопки в соответствии с точечным рисунком.

```
BOOL AutoLoad(
    UINT nID,
    CWnd* pParent);
```

### <a name="parameters"></a>Параметры

*nID*<br/>
Идентификатор элемента управления кнопки.

*ппарент*<br/>
Указатель на объект, которому принадлежит кнопка.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="remarks"></a>Remarks

Используйте `AutoLoad` функцию для инициализации кнопки рисования владельцем в диалоговом окне в виде растровой кнопки. Инструкции по использованию этой функции приведены в комментариях к `CBitmapButton` классу.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#75](../../mfc/codesnippet/cpp/cbitmapbutton-class_1.cpp)]

## <a name="cbitmapbuttoncbitmapbutton"></a><a name="cbitmapbutton"></a>Кбитмапбуттон:: Кбитмапбуттон

Создает объект `CBitmapButton`.

```
CBitmapButton();
```

### <a name="remarks"></a>Remarks

После создания объекта C++ `CBitmapButton` вызовите метод [кбуттон:: Create](../../mfc/reference/cbutton-class.md#create) , чтобы создать элемент управления "кнопка Windows" и присоединить его к `CBitmapButton` объекту.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#57](../../mfc/codesnippet/cpp/cbitmapbutton-class_2.cpp)]

## <a name="cbitmapbuttonloadbitmaps"></a><a name="loadbitmaps"></a>Кбитмапбуттон:: Лоадбитмапс

Эта функция используется, если требуется загрузить растровые изображения, идентифицируемые по именам ресурсов или ИДЕНТИФИКАЦИОНным номерам, или если `AutoLoad` функцию нельзя использовать, например, при создании кнопки точечного рисунка, которая не является частью диалогового окна.

```
BOOL LoadBitmaps(
    LPCTSTR lpszBitmapResource,
    LPCTSTR lpszBitmapResourceSel = NULL,
    LPCTSTR lpszBitmapResourceFocus = NULL,
    LPCTSTR lpszBitmapResourceDisabled = NULL);

BOOL LoadBitmaps(
    UINT nIDBitmapResource,
    UINT nIDBitmapResourceSel = 0,
    UINT nIDBitmapResourceFocus = 0,
    UINT nIDBitmapResourceDisabled = 0);
```

### <a name="parameters"></a>Параметры

*лпсзбитмапресаурце*<br/>
Указывает на строку, завершающуюся нулем, которая содержит имя точечного рисунка для нормального или "Up" кнопки точечного рисунка. Обязательный элемент.

*лпсзбитмапресаурцесел*<br/>
Указывает на строку, завершающуюся нулем, которая содержит имя точечного рисунка для выбранной кнопки точечного рисунка или состояния "вниз". Может иметь значение "NULL".

*лпсзбитмапресаурцефокус*<br/>
Указывает на строку, завершающуюся нулем, которая содержит имя точечного рисунка для состояния, ориентированного на растровую кнопку. Может иметь значение "NULL".

*лпсзбитмапресаурцедисаблед*<br/>
Указывает на строку, завершающуюся нулем, которая содержит имя точечного рисунка для отключенного состояния кнопки точечного рисунка. Может иметь значение "NULL".

*нидбитмапресаурце*<br/>
Указывает идентификатор ресурса точечного рисунка для нормального или "Up" кнопки точечного рисунка. Обязательный элемент.

*нидбитмапресаурцесел*<br/>
Указывает ИДЕНТИФИКАЦИОНный номер ресурса точечного рисунка для выбранной кнопки точечного рисунка или состояния "вниз". Может быть равно 0.

*нидбитмапресаурцефокус*<br/>
Указывает идентификатор ресурса точечного рисунка для состояния, на котором кнопка точечного рисунка имеет значение. Может быть равно 0.

*нидбитмапресаурцедисаблед*<br/>
Указывает ИДЕНТИФИКАЦИОНный номер ресурса точечного рисунка для отключенного состояния кнопки точечного рисунка. Может быть равно 0.

### <a name="return-value"></a>Возвращаемое значение

Имеет ненулевое значение в случае успешного выполнения, иначе — 0.

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#58](../../mfc/codesnippet/cpp/cbitmapbutton-class_3.cpp)]

## <a name="cbitmapbuttonsizetocontent"></a><a name="sizetocontent"></a>Кбитмапбуттон:: SizeToContent

Вызовите эту функцию, чтобы изменить размер растровой кнопки до размера точечного рисунка.

```cpp
void SizeToContent();
```

### <a name="example"></a>Пример

[!code-cpp[NVC_MFCControlLadenDialog#59](../../mfc/codesnippet/cpp/cbitmapbutton-class_4.cpp)]

## <a name="see-also"></a>См. также раздел

[Образец CTRLTEST библиотеки MFC](../../overview/visual-cpp-samples.md)<br/>
[Класс Кбуттон](../../mfc/reference/cbutton-class.md)<br/>
[Иерархическая диаграмма](../../mfc/hierarchy-chart.md)
