---
title: Класс CMFCToolBarMenuButton
ms.date: 11/04/2016
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
ms.openlocfilehash: 0dffd273b51dd1c71328332f9f7e29e1ac5cd213
ms.sourcegitcommit: 7a6116e48c3c11b97371b8ae4ecc23adce1f092d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/22/2020
ms.locfileid: "81745144"
---
# <a name="cmfctoolbarmenubutton-class"></a>Класс CMFCToolBarMenuButton

Кнопка панели инструментов, содержащая всплывающее меню.
Для получения более подробной информации смотрите исходный код, расположенный в папке **VC\\atlmfc\\src\\mfc** установки Visual Studio.

## <a name="syntax"></a>Синтаксис

```
class CMFCToolBarMenuButton : public CMFCToolBarButton
```

## <a name="members"></a>Участники

### <a name="public-constructors"></a>Открытые конструкторы

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|Формирует объект `CMFCToolBarMenuButton`.|

### <a name="public-methods"></a>Открытые методы

|Имя|Описание|
|----------|-----------------|
|[CMFCToolbarMenuButton:CompareWith](#comparewith)|Сравнивает этот экземпляр `CMFCToolBarButton` с предоставленным объектом. (Переопределяет [CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|
|[CMFCToolBarMenuButton::CopyFrom](#copyfrom)|Копирует свойства другой кнопки панели инструментов на текущую кнопку. (Переопределяет [CMFCToolBarButton::CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|
|[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)|Инициализирует меню панели инструментов из ручки меню Windows.|
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|Создает меню Windows, состоящее из команд в меню панели инструментов. Возвращает ручку в меню Windows.|
|[CMFCToolBarMenuButton::CreatePopupMenu](#createpopupmenu)|Создает всплывающий объект меню [(CMFCPopupMenu Class)](../../mfc/reference/cmfcpopupmenu-class.md)для отображения меню панели инструментов.|
|[CMFCToolBarMenuButton::Enable'uick](#enablequickcustomize)||
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|Предоставляет только для чтения доступ к списку команд в меню панели инструментов.|
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|Извлекает прямоугольник для изображения кнопки.|
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|Возвращает количество строк в всплывающем меню, когда меню находится в режиме палитры.|
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|Возвращает указатель на объект всплывающих меню, связанный с кнопкой.|
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|Определяет, отображается ли граница кнопки при выборе кнопки пользователем. (Переопределяет [CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|
|[CMFCToolBarMenuButton::Граница](#isborder)||
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||
|[CMFCToolBarMenuButton::IsdroppedDown](#isdroppeddown)|Определяет, отображается ли всплывающее меню.|
|[CMFCToolBarMenuButton::IsemptyMenuAllowed](#isemptymenuallowed)|Вызывается по системе, чтобы определить, может ли пользователь открыть подменю из выбранного элемента меню.|
|[CMFCToolBarMenuButton::IsExclusive](#isexclusive)|Определяет, находится ли кнопка в эксклюзивном режиме, то есть остается ли всплывающее меню открытым, даже если пользователь перемещает указатель на другую панель или кнопку.|
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|Определяет, находится ли всплывающее меню в режиме палитры.|
|[CMFCToolBarMenuButton:: IsquickMode](#isquickmode)||
|[CMFCToolBarMenuButton::IstearoffMenu](#istearoffmenu)|Определяет, есть ли всплывающее меню в баре отрыва.|
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||
|[CMFCToolbarMenuButton::Onbeforedrag](#onbeforedrag)|Уточняется, можно ли перетащить кнопку. (Переопределяет [CMFCToolBarButton::OnBeforedrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|
|[CMFCToolbarMenuButton::OncalculateSize](#oncalculatesize)|Вызывается фреймворком для расчета размера кнопки для заданного контекста устройства и состояния стыковки. (Переопределяет [CMFCToolBarButton::OncalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|
|[CMFCToolbarMenuButton::OnCancelmode](#oncancelmode)|Вызывается по системе для обработки [сообщения WM_CANCELMODE.](/windows/win32/winmsg/wm-cancelmode) (Переопределяет [CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|Вызывается по фрейму, когда кнопка вставляется в новую панель инструментов. (Переопределяет [CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd).)|
|[CMFCToolbarMenuButton::OnClick](#onclick)|Вызывается по фреймворку, когда пользователь нажимает кнопку мыши. (Переопределяет [CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|
|[CMFCToolbarMenuButton::OnClickMenuitem](#onclickmenuitem)|Вызывается по системе, когда пользователь выбирает элемент в всплывающем меню.|
|[CMFCToolbarMenuButton::OnContextHelp](#oncontexthelp)|Вызывается в фреймворке, когда панель родительских инструментов обрабатывает WM_HELPHITTEST сообщение. (Переопределяет [CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|
|[CMFCToolbarMenuButton::Ondraw](#ondraw)|Вызывается в рамках, чтобы нарисовать кнопку с помощью указанных стилей и опций. (Переопределяет [CMFCToolBarButton::Ondraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Вызывается фреймворком, чтобы нарисовать кнопку в панели **команд** в поле **настраивания** диалогов. (Переопределяет [CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|Вызывается по фреймворку, когда пользователь открывает всплывающее меню.|
|[CMFCToolbarMenuButton::ResetImageTodefault](#resetimagetodefault)|Наборы значения по умолчанию изображения, связанного с кнопкой. (Переопределяет [CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|Сохраняет состояние кнопки панели инструментов. (Переопределяет [CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|
|[CMFCToolBarMenuButton::Serialize](#serialize)|Читает этот объект из архива или запишет его в архив. (Переопределяет [CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|Заполняет предоставленный `CAccessibilityData` объект данными о доступности из кнопки панели инструментов. (Переопределяет [CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|Уточняется, можно ли добавить кнопку в панель инструментов.|
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|Уточняется, находится ли всплывающее меню в режиме палитры.|
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||
|[CMFCToolBarMenuButton::SetRadio](#setradio)|Принудь кнопку меню панели инструментов отобразить значок, указывающий на то, что она выбрана.|
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|Упоняет идентификатор барной стойки для всплывающих меню.|

### <a name="protected-methods"></a>Защищенные методы

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|Рисует значок на кнопке меню.|

### <a name="data-members"></a>Элементы данных

|Имя|Описание|
|----------|-----------------|
|[CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Если это правда, то фреймворк всегда вызывает [CFrameWndEx::OnDrawMenuImage,](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) когда нарисована кнопка.|

## <a name="remarks"></a>Remarks

A `CMFCToolBarMenuButton` может отображаться как меню, пункт меню, который имеет подменю, кнопку, которая либо выполняет команду или отображает меню, или кнопку, которая отображает только меню. Поведение и внешний вид кнопки меню определяются, указывая такие параметры, как изображение, текст, ручка меню `CMFCToolbarMenuButton::CMFCToolbarMenuButton`и идентификатор команды, связанный с кнопкой в конструкторе.

Пользовательский класс, полученный `CMFCToolbarMenuButton` из класса, должен использовать [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial) макрос. Макрос [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) генерирует ошибку при закрытии приложения.

## <a name="example"></a>Пример

В следующем примере показано, `CMFCToolBarMenuButton` как настроить объект. Код иллюстрирует, как указать, что выпадающее меню находится в режиме палитры, и указать идентификатор для барной стойки, который создается, когда пользователь перетаскивает кнопку меню из бара меню. Этот фрагмент кода входит в состав [примера Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]

## <a name="inheritance-hierarchy"></a>Иерархия наследования

[CObject](cobject-class.md)

[CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)

[CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)

## <a name="requirements"></a>Требования

**Заголовок:** afxtoolbarmenubutton.h

## <a name="cmfctoolbarmenubuttoncmfctoolbarmenubutton"></a><a name="cmfctoolbarmenubutton"></a>CMFCToolBarMenuButton::CMFCToolBarMenuButton

Формирует объект `CMFCToolBarMenuButton`.

```
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,
    HMENU hMenu,
    int iImage,
    LPCTSTR lpszText=NULL,
    BOOL bUserButton=FALSE);
```

### <a name="parameters"></a>Параметры

*src*<br/>
(в) Существующий `CMFCToolBarMenuButton` объект, который должен `CMFCToolBarMenuButton` быть скопирован в этот объект.

*uiID*<br/>
(в) Идентификатор команды для выполнения, когда пользователь нажимает кнопку; или (UINT)-1 для кнопки меню, которая непосредственно не выполняет команду.

*hMenu*<br/>
(в) Ручка к меню; или NULL, если кнопка не имеет меню.

*iImage*<br/>
(в) Индекс изображения для кнопки; или -1, если эта кнопка не имеет значка или использует значок для команды, указанной *uiID.* Индекс одинаков `CMFCToolBarImages` для каждого объекта в приложении.

*lpszText*<br/>
(в) Текст кнопки меню панели инструментов.

*bUserButton*<br/>
(в) TRUE, если кнопка отображает пользовательское изображение; FALSE, если кнопка отображает предопределенное изображение, связанное с командой, указанной *uiID.*

### <a name="remarks"></a>Remarks

Если *uiID* является действительным идентификатором команды, кнопка выполняет эту команду, когда пользователь нажимает на нее. Если *hMenu* является действительной ручкой меню, кнопка предоставляет выпадающее меню, когда оно появляется в панели инструментов или подменю, когда она появляется в меню. Если оба *uiID* и *hMenu* действительны, кнопка представляет собой сплит-кнопку с частью, которая будет выполнять команду, когда пользователь нажимает на нее, и часть со стрелкой вниз, которая упадет вниз меню, когда пользователь нажимает на него. Однако, если *hMenu* действителен, пользователь не сможет нажать кнопку для выполнения команды, когда кнопка вставлена в меню.

### <a name="example"></a>Пример

В следующем примере показано, как `CMFCToolBarMenuButton` построить объект класса. Этот фрагмент кода входит в состав [примера Word Pad](../../overview/visual-cpp-samples.md).

[!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]

## <a name="cmfctoolbarmenubuttoncomparewith"></a><a name="comparewith"></a>CMFCToolbarMenuButton:CompareWith

```
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;
```

### <a name="parameters"></a>Параметры

(в) *другие*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttoncopyfrom"></a><a name="copyfrom"></a>CMFCToolBarMenuButton::CopyFrom

```
virtual void CopyFrom(const CMFCToolBarButton& src);
```

### <a name="parameters"></a>Параметры

(в) *src*<br/>

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttoncreatefrommenu"></a><a name="createfrommenu"></a>CMFCToolBarMenuButton::CreateFromMenu

Инициализирует меню панели инструментов из ручки меню Windows.

```
virtual void CreateFromMenu(HMENU hMenu);
```

### <a name="parameters"></a>Параметры

*hMenu*<br/>
(в) Ручка к меню.

### <a name="remarks"></a>Remarks

Кнопка меню панели инструментов может отображать выпадающий подменю.

Платформа вызывает этот метод для инициализации команд в подменю из меню.

## <a name="cmfctoolbarmenubuttoncreatemenu"></a><a name="createmenu"></a>CMFCToolBarMenuButton::CreateMenu

Создает меню, состоящее из команд в меню панели инструментов. Возвращает ручку в меню.

```
virtual HMENU CreateMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ручка в меню, если успех. NULL, если список команд, связанных с кнопкой меню панели инструментов, пуст.

### <a name="remarks"></a>Remarks

Вы можете переопределить этот метод в производном классе, чтобы настроить способ создания меню.

## <a name="cmfctoolbarmenubuttoncreatepopupmenu"></a><a name="createpopupmenu"></a>CMFCToolBarMenuButton::CreatePopupMenu

Создает `CMFCPopupMenu` объект для отображения меню панели инструментов.

```
virtual CMFCPopupMenu* CreatePopupMenu();
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на `CMFCPopupMenu` объект, который отображает выпадающее меню, связанное с кнопкой меню панели инструментов.

### <a name="remarks"></a>Remarks

Этот метод вызывается фректовой для подготовки отображения выпадающего меню, связанного с кнопкой.

Реализация по умолчанию просто конструирует и возвращает новый `CMFCPopupMenu` объект. Переопределить этот метод, если вы хотите использовать производный тип [CMFCPopupMenu класса](cmfcpopupmenu-class.md) или для выполнения дополнительной инициализации.

## <a name="cmfctoolbarmenubuttondrawdocumenticon"></a><a name="drawdocumenticon"></a>CMFCToolBarMenuButton::DrawDocumentIcon

Рисует значок документа на кнопке меню.

```cpp
void DrawDocumentIcon(
    CDC* pDC,
    const CRect& rectImage,
    HICON hIcon);
```

### <a name="parameters"></a>Параметры

*pDC*<br/>
(в) Указатель на контекст устройства.

*rectImage*<br/>
(в) Координаты прямоугольника, ограничивающего изображение.

*hIcon*<br/>
(в) Ручка к иконе.

### <a name="remarks"></a>Remarks

Этот метод берет значок документа и рисует его на кнопке меню, центре в области, указанной *rectImage*.

## <a name="cmfctoolbarmenubuttonenablequickcustomize"></a><a name="enablequickcustomize"></a>CMFCToolBarMenuButton::Enable'uick

```cpp
void EnableQuickCustomize();
```

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonhasbutton"></a><a name="hasbutton"></a>CMFCToolBarMenuButton::HasButton

```
virtual BOOL HasButton() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonhavehotborder"></a><a name="havehotborder"></a>CMFCToolBarMenuButton::HaveHotBorder

```
virtual BOOL HaveHotBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonisborder"></a><a name="isborder"></a>CMFCToolBarMenuButton::Граница

```
virtual BOOL IsBorder() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonisclickedonmenu"></a><a name="isclickedonmenu"></a>CMFCToolBarMenuButton::IsClickedOnMenu

```
BOOL IsClickedOnMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonisquickmode"></a><a name="isquickmode"></a>CMFCToolBarMenuButton:: IsquickMode

```
BOOL IsQuickMode();
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttongetcommands"></a><a name="getcommands"></a>CMFCToolBarMenuButton::GetCommands

Предоставляет только для чтения доступ к списку команд в меню панели инструментов.

```
const CObList& GetCommands() const;
```

### <a name="return-value"></a>Возвращаемое значение

Ссылка на объект [класса CObList,](../../mfc/reference/coblist-class.md) который содержит коллекцию объектов [класса CMFCToolBarButton.](../../mfc/reference/cmfctoolbarbutton-class.md)

### <a name="remarks"></a>Remarks

Кнопка меню панели инструментов может отображать подменю. Список команд можно предоставить в подменю в конструкторе или в [CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu) в качестве ручки к меню (HMENU). Меню преобразуется в список объектов, которые получены из [класса CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) и хранятся во внутреннем `CObList` объекте. Вы можете получить доступ к этому списку, позвонив по этому методу.

## <a name="cmfctoolbarmenubuttongetimagerect"></a><a name="getimagerect"></a>CMFCToolBarMenuButton::GetImageRect

Извлекает прямоугольник для изображения кнопки.

```cpp
void GetImageRect(CRect& rectImage);
```

### <a name="parameters"></a>Параметры

*rectImage*<br/>
(ваут) Ссылка на `CRect` объект, который получает координаты прямоугольника, ограничивающего изображение.

## <a name="cmfctoolbarmenubuttongetpaletterows"></a><a name="getpaletterows"></a>CMFCToolBarMenuButton::GetPaletteRows

Возвращает количество строк в выпадающем меню, когда меню находится в режиме палитры.

```
int GetPaletteRows() const;
```

### <a name="return-value"></a>Возвращаемое значение

Количество строк в палитре.

### <a name="remarks"></a>Remarks

Когда кнопка меню будет установлена в режиме палитры, элементы меню будут отображаться в нескольких столбцах с ограниченным числом строк. Вызовите этот метод, чтобы получить количество строк. Вы можете включить или отключить режим палитры и указать количество строк с помощью [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttongetpopupmenu"></a><a name="getpopupmenu"></a>CMFCToolBarMenuButton::GetPopupMenu

Возвращает указатель на объект [класса CMFCPopupMenu,](../../mfc/reference/cmfcpopupmenu-class.md) представляющий выпадающее меню кнопки.

```
CMFCPopupMenu* GetPopupMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

Указатель на объект [класса CMFCPopupMenu,](../../mfc/reference/cmfcpopupmenu-class.md) созданный при создании фреймприта кнопки меню панели инструментов; NULL, если подменю не отображается.

### <a name="remarks"></a>Remarks

Когда кнопка меню панели инструментов отображает выпадающее меню, кнопка создает объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) для представления меню. Вызовите этот метод, чтобы `CMFCPopupMenu` получить указатель на объект. Вы не должны хранить возвращенную указатель, поскольку она носит временный характер и становится недействительной, когда пользователь закрывает выпадающее меню.

## <a name="cmfctoolbarmenubuttonisdroppeddown"></a><a name="isdroppeddown"></a>CMFCToolBarMenuButton::IsdroppedDown

Указывает, отображается ли всплывающее меню в настоящее время.

```
virtual BOOL IsDroppedDown() const;
```

### <a name="return-value"></a>Возвращаемое значение

TRUE, если кнопка меню панели инструментов отображает его submenu; в противном случае FALSE.

## <a name="cmfctoolbarmenubuttonisemptymenuallowed"></a><a name="isemptymenuallowed"></a>CMFCToolBarMenuButton::IsemptyMenuAllowed

Определяет, отображаются ли элементы меню пустыми подменю.

```
virtual BOOL IsEmptyMenuAllowed() const;
```

### <a name="return-value"></a>Возвращаемое значение

TRUE, если фреймворк открывает подменю из выбранного в настоящее время элемента меню, даже если подменю пусто; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Рамочное вызовы этого метода, когда пользователь пытается открыть submenu из выбранного в настоящее время элемента меню. Если подменю пусто `IsEmptyMenuAllowed` и возвращает FALSE, подменю не откроется.

Реализация по умолчанию возвращает FALSE. Переопределить этот метод, чтобы настроить это поведение.

## <a name="cmfctoolbarmenubuttonisexclusive"></a><a name="isexclusive"></a>CMFCToolBarMenuButton::IsExclusive

Указывает, находится ли кнопка в эксклюзивном режиме.

```
virtual BOOL IsExclusive() const;
```

### <a name="return-value"></a>Возвращаемое значение

TRUE, если кнопка работает в эксклюзивном режиме; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Когда пользователь открывает всплывающее меню для кнопки, а затем перемещает указатель мыши по другой панели инструментов или кнопке меню, всплывающее меню закрывается, если кнопка не находится в эксклюзивном режиме.

Реализация по умолчанию всегда возвращает FALSE. Переопределить этот метод в производном классе, если вы хотите включить эксклюзивный режим.

## <a name="cmfctoolbarmenubuttonismenupalettemode"></a><a name="ismenupalettemode"></a>CMFCToolBarMenuButton::IsMenuPaletteMode

Определяет, находится ли выпадающее меню в режиме палитры.

```
BOOL IsMenuPaletteMode() const;
```

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если палитра режим включен, в противном случае FALSE.

### <a name="remarks"></a>Remarks

Когда кнопка меню настроена на режим палитры, элементы меню отображаются в нескольких столбцах с ограниченным числом строк. Вызовите этот метод, чтобы получить количество строк. Вы можете включить или отключить режим палитры, позвонив [cmFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).

## <a name="cmfctoolbarmenubuttonistearoffmenu"></a><a name="istearoffmenu"></a>CMFCToolBarMenuButton::IstearoffMenu

Указывает, есть ли в выпадающем меню бар отрыва.

```
virtual BOOL IsTearOffMenu() const;
```

### <a name="return-value"></a>Возвращаемое значение

ПРАВДА, если кнопка меню панели инструментов имеет отрывной бар; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Чтобы включить функцию отрыва и установить идентификатор барной панели, позвоните [cmFCToolBarMenuButton::SetTearOff](#settearoff).

## <a name="cmfctoolbarmenubuttonm_balwayscallownerdraw"></a><a name="m_balwayscallownerdraw"></a>CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw

Уточняется, всегда ли фреймворк вызывает [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) при нарисованной кнопке.

```
static BOOL m_bAlwaysCallOwnerDraw;
```

### <a name="remarks"></a>Remarks

Когда эта переменная участника установлена на ИСТИНу, кнопка всегда вызывает [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) метод для отображения изображения на кнопке. Когда `m_bAlwaysCallOwnerDraw` FALSE, кнопка сама рисует изображение, если изображение предопределено. В противном `OnDrawMenuImage`случае, он вызывает .

## <a name="cmfctoolbarmenubuttononaftercreatepopupmenu"></a><a name="onaftercreatepopupmenu"></a>CMFCToolBarMenuButton::OnAfterCreatePopupMenu

```
virtual void OnAfterCreatePopupMenu();
```

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononbeforedrag"></a><a name="onbeforedrag"></a>CMFCToolbarMenuButton::Onbeforedrag

```
virtual BOOL OnBeforeDrag() const;
```

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononcalculatesize"></a><a name="oncalculatesize"></a>CMFCToolbarMenuButton::OncalculateSize

```
virtual SIZE OnCalculateSize(
    CDC* pDC,
    const CSize& sizeDefault,
    BOOL bHorz);
```

### <a name="parameters"></a>Параметры

(в) *pDC*<br/>
(в) *размерПо умолчанию*<br/>
(в) *bHorz*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononcancelmode"></a><a name="oncancelmode"></a>CMFCToolbarMenuButton::OnCancelmode

```
virtual void OnCancelMode();
```

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononchangeparentwnd"></a><a name="onchangeparentwnd"></a>CMFCToolBarMenuButton::OnChangeParentWnd

```
virtual void OnChangeParentWnd(CWnd* pWndParent);
```

### <a name="parameters"></a>Параметры

(в) *pWndParent*<br/>

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononclick"></a><a name="onclick"></a>CMFCToolbarMenuButton::OnClick

```
virtual BOOL OnClick(
    CWnd* pWnd,
    BOOL bDelay = TRUE);
```

### <a name="parameters"></a>Параметры

(в) *pWnd*<br/>
(в) *bDelay*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttononclickmenuitem"></a><a name="onclickmenuitem"></a>CMFCToolbarMenuButton::OnClickMenuitem

Вызывается по системе, когда пользователь выбирает элемент в меню выпадения.

```
virtual BOOL OnClickMenuItem();
```

### <a name="return-value"></a>Возвращаемое значение

FALSE, если фреймворк должен продолжать обработку элементов меню по умолчанию; в противном случае TRUE. Реализация по умолчанию всегда возвращает FALSE.

### <a name="remarks"></a>Remarks

Когда пользователь нажимает на элемент меню, фреймворк выполняет команду, связанную с этим элементом.

Чтобы настроить обработку элементов `OnClickMenuItem` меню, переопределить `CMFCToolBarMenuButton` в классе, полученном из класса. Вы также должны переопределить [CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) и заменить кнопки меню, которые требуют специальной обработки с экземплярами производного класса.

## <a name="cmfctoolbarmenubuttononcontexthelp"></a><a name="oncontexthelp"></a>CMFCToolbarMenuButton::OnContextHelp

```
virtual BOOL OnContextHelp(CWnd* pWnd);
```

### <a name="parameters"></a>Параметры

(в) *pWnd*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonondraw"></a><a name="ondraw"></a>CMFCToolbarMenuButton::Ondraw

```
virtual void OnDraw(
    CDC* pDC,
    const CRect& rect,
    CMFCToolBarImages* pImages,
    BOOL bHorz = TRUE,
    BOOL bCustomizeMode = FALSE,
    BOOL bHighlight = FALSE,
    BOOL bDrawBorder = TRUE,
    BOOL bGrayDisabledButtons = TRUE);
```

### <a name="parameters"></a>Параметры

(в) *pDC*<br/>
[in] *rect*<br/>
(в) *pImages*<br/>
(в) *bHorz*<br/>
(в) *bCustomizeMode*<br/>
(в) *bHighlight*<br/>
(в) *bDrawBorder*<br/>
(в) *bGrayDisabledButtons*<br/>

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonondrawoncustomizelist"></a><a name="ondrawoncustomizelist"></a>CMFCToolBarMenuButton::OnDrawOnCustomizeList

```
virtual int OnDrawOnCustomizeList(
    CDC* pDC,
    const CRect& rect,
    BOOL bSelected);
```

### <a name="parameters"></a>Параметры

(в) *pDC*<br/>
[in] *rect*<br/>
(в) *bВыбор*<br/>

### <a name="return-value"></a>Возвращаемое значение

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonopenpopupmenu"></a><a name="openpopupmenu"></a>CMFCToolBarMenuButton::OpenPopupMenu

Вызывается по фреймворку, когда пользователь открывает выпадающее меню кнопки меню панели инструментов.

```
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```

### <a name="parameters"></a>Параметры

*pWnd*<br/>
(в) Опознавательный элемент окна, которое получает команды меню выпадения. Это может быть NULL только в том случае, если кнопка меню панели инструментов имеет родительское окно.

### <a name="return-value"></a>Возвращаемое значение

TRUE, когда объект [класса CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) был создан и открыт успешно; в противном случае FALSE.

### <a name="remarks"></a>Remarks

Эта функция вызывается фреймворком, когда пользователь открывает выпадающее меню из кнопки меню панели инструментов.

## <a name="cmfctoolbarmenubuttonresetimagetodefault"></a><a name="resetimagetodefault"></a>CMFCToolbarMenuButton::ResetImageTodefault

```
virtual void ResetImageToDefault();
```

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonsavebarstate"></a><a name="savebarstate"></a>CMFCToolBarMenuButton::SaveBarState

```
virtual void SaveBarState();
```

### <a name="remarks"></a>Remarks

Фрейм вызывает этот метод, когда создает кнопку панели инструментов в результате операции перетаскивания и падения. Этот метод [называетCM CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) метод всплывающее меню верхнего уровня, что заставляет родительскую кнопку всплывающее меню воссоздать свое меню.

## <a name="cmfctoolbarmenubuttonserialize"></a><a name="serialize"></a>CMFCToolBarMenuButton::Serialize

```
virtual void Serialize(CArchive& ar);
```

### <a name="parameters"></a>Параметры

[in] *ar*<br/>

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonsetaccdata"></a><a name="setaccdata"></a>CMFCToolBarMenuButton::SetACCData

Задает данные специальных возможностей для элемента ленты.

```
virtual BOOL SetACCData(
    CWnd* pParent,
    CAccessibilityData& data);
```

### <a name="parameters"></a>Параметры

*pРодитель*<br/>
Родительское окно для элемента ленты.

*данные*<br/>
Данные специальных возможностей для элемента ленты.

### <a name="return-value"></a>Возвращаемое значение

Всегда возвращается TRUE.

### <a name="remarks"></a>Remarks

По умолчанию этот метод устанавливает данные доступности для элемента ленты и всегда возвращает TRUE. Переопределите этот метод, чтобы задать данные специальных возможностей и возвращать значение, указывающее на успешное или неуспешное выполнение.

## <a name="cmfctoolbarmenubuttonsetmenuonly"></a><a name="setmenuonly"></a>CMFCToolBarMenuButton::SetMenuOnly

Уточняется, нарисована ли кнопка меню или кнопка разделения, когда она имеет как действительный идентификатор команды, так и подменю.

```cpp
void SetMenuOnly(BOOL bMenuOnly);
```

### <a name="parameters"></a>Параметры

*bMenuOnly*<br/>
(в) TRUE, чтобы показать эту кнопку в качестве кнопки меню, когда она имеет как действительный идентификатор команды и submenu, FALSE, чтобы показать эту кнопку в качестве кнопки разделения, когда он имеет как действительный идентификатор команды и submenu.

### <a name="remarks"></a>Remarks

Обычно, когда кнопка меню панели инструментов имеет как подменю, так и идентификатор команды, меню представляется сплит-кнопкой с основной кнопкой и прикрепленной кнопкой «вниз стрелка». Если вы называете этот метод и *bMenuOnly* это правда, кнопка вместо этого, как представляется, одна кнопка меню с вниз стрелка в кнопке. Когда пользователь нажимает на стрелку в любом режиме, submenu открывается, и когда пользователь нажимает нестрелку часть кнопки в любом режиме, фреймворк выполняет команду.

## <a name="cmfctoolbarmenubuttonsetmenupalettemode"></a><a name="setmenupalettemode"></a>CMFCToolBarMenuButton::SetMenuPaletteMode

Уточняется, находится ли выпадающее меню в режиме палитры.

```cpp
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,
    int nPaletteRows=1);
```

### <a name="parameters"></a>Параметры

*bМенюПалякмой*<br/>
(в) Уточняется, находится ли выпадающее меню в режиме палитры.

*nПалачРоус*<br/>
(в) Количество строк в палитре.

### <a name="remarks"></a>Remarks

В режиме палитры все элементы меню отображаются в виде многоколонной палитры. Вы указываете количество строк с помощью *nPaletteRows*.

## <a name="cmfctoolbarmenubuttonsetmessagewnd"></a><a name="setmessagewnd"></a>CMFCToolBarMenuButton::SetMessageWnd

```cpp
void SetMessageWnd(CWnd* pWndMessage);
```

### <a name="parameters"></a>Параметры

(в) *pWndMessage*<br/>

### <a name="remarks"></a>Remarks

## <a name="cmfctoolbarmenubuttonsetradio"></a><a name="setradio"></a>CMFCToolBarMenuButton::SetRadio

Устанавливает кнопку меню панели инструментов для отображения значка стиля радиокнопки при проверке.

```
virtual void SetRadio();
```

### <a name="remarks"></a>Remarks

Когда кнопка меню нарисована во время проверки, она вызывает [CMFCVisualManager::OnDrawMenuCheck,](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) чтобы нарисовать значок галочки. По умолчанию запрашивает, `OnDrawMenuCheck` чтобы текущий визуальный менеджер нарисовыал на кнопке меню галочку в стиле флажка. После вызова этого метода текущий визуальный менеджер вместо этого рисует галочку в стиле радио кнопки на кнопке меню. Это изменение не может быть отменено.

Когда вы звоните по этому методу и кнопка меню в настоящее время отображается, он будет обновляться.

## <a name="cmfctoolbarmenubuttonsettearoff"></a><a name="settearoff"></a>CMFCToolBarMenuButton::SetTearOff

Упоняет идентификатор бары отрыва для выпадающего меню.

```
virtual void SetTearOff(UINT uiBarID);
```

### <a name="parameters"></a>Параметры

*uiBarID*<br/>
(в) Упоняет новый идентификатор бара отрыва.

### <a name="remarks"></a>Remarks

Вызовите этот метод, чтобы указать идентификатор для панели отрыва, который создается, когда пользователь перетаскивает кнопку меню из бара меню. Если параметр *uiBarID* радо 0, пользователь не может оторвать кнопку меню.

Позвоните [cWinAppEx::EnableTearOffMenus,](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) чтобы включить функцию меню отрыва в приложении.

## <a name="see-also"></a>См. также раздел

[Диаграмма иерархии](../../mfc/hierarchy-chart.md)<br/>
[Классы](../../mfc/reference/mfc-classes.md)<br/>
[Класс CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)<br/>
[Класс CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)<br/>
[Класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)
