---
title: Класс CMFCToolBarMenuButton | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: reference
f1_keywords:
- CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CMFCToolBarMenuButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CompareWith
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CopyFrom
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateFromMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreateMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::CreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::EnableQuickCustomize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetCommands
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetImageRect
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPaletteRows
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::GetPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HasButton
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::HaveHotBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsBorder
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsClickedOnMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsDroppedDown
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsEmptyMenuAllowed
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsExclusive
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsQuickMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::IsTearOffMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnAfterCreatePopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnBeforeDrag
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCalculateSize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnCancelMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnChangeParentWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClick
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnClickMenuItem
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnContextHelp
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDraw
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OnDrawOnCustomizeList
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::OpenPopupMenu
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::ResetImageToDefault
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SaveBarState
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::Serialize
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetACCData
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuOnly
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMenuPaletteMode
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetMessageWnd
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetRadio
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::SetTearOff
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::DrawDocumentIcon
- AFXTOOLBARMENUBUTTON/CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw
dev_langs:
- C++
helpviewer_keywords:
- CMFCToolBarMenuButton [MFC], CMFCToolBarMenuButton
- CMFCToolBarMenuButton [MFC], CompareWith
- CMFCToolBarMenuButton [MFC], CopyFrom
- CMFCToolBarMenuButton [MFC], CreateFromMenu
- CMFCToolBarMenuButton [MFC], CreateMenu
- CMFCToolBarMenuButton [MFC], CreatePopupMenu
- CMFCToolBarMenuButton [MFC], EnableQuickCustomize
- CMFCToolBarMenuButton [MFC], GetCommands
- CMFCToolBarMenuButton [MFC], GetImageRect
- CMFCToolBarMenuButton [MFC], GetPaletteRows
- CMFCToolBarMenuButton [MFC], GetPopupMenu
- CMFCToolBarMenuButton [MFC], HasButton
- CMFCToolBarMenuButton [MFC], HaveHotBorder
- CMFCToolBarMenuButton [MFC], IsBorder
- CMFCToolBarMenuButton [MFC], IsClickedOnMenu
- CMFCToolBarMenuButton [MFC], IsDroppedDown
- CMFCToolBarMenuButton [MFC], IsEmptyMenuAllowed
- CMFCToolBarMenuButton [MFC], IsExclusive
- CMFCToolBarMenuButton [MFC], IsMenuPaletteMode
- CMFCToolBarMenuButton [MFC], IsQuickMode
- CMFCToolBarMenuButton [MFC], IsTearOffMenu
- CMFCToolBarMenuButton [MFC], OnAfterCreatePopupMenu
- CMFCToolBarMenuButton [MFC], OnBeforeDrag
- CMFCToolBarMenuButton [MFC], OnCalculateSize
- CMFCToolBarMenuButton [MFC], OnCancelMode
- CMFCToolBarMenuButton [MFC], OnChangeParentWnd
- CMFCToolBarMenuButton [MFC], OnClick
- CMFCToolBarMenuButton [MFC], OnClickMenuItem
- CMFCToolBarMenuButton [MFC], OnContextHelp
- CMFCToolBarMenuButton [MFC], OnDraw
- CMFCToolBarMenuButton [MFC], OnDrawOnCustomizeList
- CMFCToolBarMenuButton [MFC], OpenPopupMenu
- CMFCToolBarMenuButton [MFC], ResetImageToDefault
- CMFCToolBarMenuButton [MFC], SaveBarState
- CMFCToolBarMenuButton [MFC], Serialize
- CMFCToolBarMenuButton [MFC], SetACCData
- CMFCToolBarMenuButton [MFC], SetMenuOnly
- CMFCToolBarMenuButton [MFC], SetMenuPaletteMode
- CMFCToolBarMenuButton [MFC], SetMessageWnd
- CMFCToolBarMenuButton [MFC], SetRadio
- CMFCToolBarMenuButton [MFC], SetTearOff
- CMFCToolBarMenuButton [MFC], DrawDocumentIcon
- CMFCToolBarMenuButton [MFC], m_bAlwaysCallOwnerDraw
ms.assetid: cfa50176-7e4b-4527-9904-86a1b48fc1bc
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: d5baebfa1d706bf18b9fc36d706ebe474b6b042d
ms.sourcegitcommit: 92f2fff4ce77387b57a4546de1bd4bd464fb51b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2018
ms.locfileid: "45721725"
---
# <a name="cmfctoolbarmenubutton-class"></a>Класс CMFCToolBarMenuButton
Кнопка панели инструментов, содержащая всплывающее меню.  
 Для получения дополнительных сведений см. в разделе исходном коде, расположенном в **VC\\atlmfc\\src\\mfc** папке установки Visual Studio.  
  
## <a name="syntax"></a>Синтаксис  
  
```  
class CMFCToolBarMenuButton : public CMFCToolBarButton  
```  
  
## <a name="members"></a>Участники  
  
### <a name="public-constructors"></a>Открытые конструкторы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMFCToolBarMenuButton::CMFCToolBarMenuButton](#cmfctoolbarmenubutton)|Создает объект `CMFCToolBarMenuButton`.|  
  
### <a name="public-methods"></a>Открытые методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMFCToolBarMenuButton::CompareWith](#comparewith)|Сравнивает данный экземпляр с предоставленным `CMFCToolBarButton` объекта. (Переопределяет [CMFCToolBarButton::CompareWith](../../mfc/reference/cmfctoolbarbutton-class.md#comparewith).)|  
|[CMFCToolBarMenuButton::CopyFrom](#copyfrom)|Копирует свойства другую кнопку панели инструментов для текущей кнопки. (Переопределяет [CMFCToolBarButton::CopyFrom](../../mfc/reference/cmfctoolbarbutton-class.md#copyfrom).)|  
|[CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu)|Инициализирует меню панели инструментов из меню дескриптора Windows.|  
|[CMFCToolBarMenuButton::CreateMenu](#createmenu)|Создает меню Windows, которое состоит из команды в меню панели инструментов. Возвращает дескриптор меню Windows.|  
|[CMFCToolBarMenuButton::CreatePopupMenu](#createpopupmenu)|Создает объект всплывающего меню ( [класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)) для отображения меню панели инструментов.|  
|[CMFCToolBarMenuButton::EnableQuickCustomize](#enablequickcustomize)||  
|[CMFCToolBarMenuButton::GetCommands](#getcommands)|Предоставляет доступ только для чтения список команд в меню панели инструментов.|  
|[CMFCToolBarMenuButton::GetImageRect](#getimagerect)|Возвращает прямоугольник, ограничивающий значок кнопки.|  
|[CMFCToolBarMenuButton::GetPaletteRows](#getpaletterows)|Возвращает количество строк в контекстном меню, когда меню находится в режиме палитры.|  
|[CMFCToolBarMenuButton::GetPopupMenu](#getpopupmenu)|Возвращает указатель на объект всплывающего меню, связанное с кнопкой.|  
|[CMFCToolBarMenuButton::HasButton](#hasbutton)||  
|[CMFCToolBarMenuButton::HaveHotBorder](#havehotborder)|Определяет, отображается ли граница кнопки, когда пользователь выбирает кнопку. (Переопределяет [CMFCToolBarButton::HaveHotBorder](../../mfc/reference/cmfctoolbarbutton-class.md#havehotborder).)|  
|[CMFCToolBarMenuButton::IsBorder](#isborder)||  
|[CMFCToolBarMenuButton::IsClickedOnMenu](#isclickedonmenu)||  
|[CMFCToolBarMenuButton::IsDroppedDown](#isdroppeddown)|Определяет, отображается ли во всплывающем меню.|  
|[CMFCToolBarMenuButton::IsEmptyMenuAllowed](#isemptymenuallowed)|Вызывается платформой для определения, является ли пользователь может открыть подменю из выбранного пункта меню.|  
|[CMFCToolBarMenuButton::IsExclusive](#isexclusive)|Определяет, является ли кнопка в монопольном режиме, то есть ли во всплывающем меню остается открытым, даже в том случае, когда пользователь перемещает указатель над другой панели инструментов или кнопки.|  
|[CMFCToolBarMenuButton::IsMenuPaletteMode](#ismenupalettemode)|Определяет, является ли всплывающее меню в режиме палитры.|  
|[CMFCToolBarMenuButton::IsQuickMode](#isquickmode)||  
|[CMFCToolBarMenuButton::IsTearOffMenu](#istearoffmenu)|Определяет, имеет ли всплывающее меню с перемещаемой панелью.|  
|[CMFCToolBarMenuButton::OnAfterCreatePopupMenu](#onaftercreatepopupmenu)||  
|[CMFCToolBarMenuButton::OnBeforeDrag](#onbeforedrag)|Указывает, можно ли перетаскивать кнопки. (Переопределяет [CMFCToolBarButton::OnBeforeDrag](../../mfc/reference/cmfctoolbarbutton-class.md#onbeforedrag).)|  
|[CMFCToolBarMenuButton::OnCalculateSize](#oncalculatesize)|Вызывается платформой для вычисления размера кнопки для заданного контекста устройств и состояние закрепления. (Переопределяет [CMFCToolBarButton::OnCalculateSize](../../mfc/reference/cmfctoolbarbutton-class.md#oncalculatesize).)|  
|[CMFCToolBarMenuButton::OnCancelMode](#oncancelmode)|Вызывается платформой для обработки [WM_CANCELMODE](/windows/desktop/winmsg/wm-cancelmode) сообщения. (Переопределяет [CMFCToolBarButton::OnCancelMode](../../mfc/reference/cmfctoolbarbutton-class.md#oncancelmode).)|  
|[CMFCToolBarMenuButton::OnChangeParentWnd](#onchangeparentwnd)|Вызывается платформой при вставке кнопки в панели инструментов. (Переопределяет [CMFCToolBarButton::OnChangeParentWnd](cmfctoolbarbutton-class.md#onchangeparentwnd).)|  
|[CMFCToolBarMenuButton::OnClick](#onclick)|Вызывается платформой, когда пользователь нажимает кнопку мыши. (Переопределяет [CMFCToolBarButton::OnClick](../../mfc/reference/cmfctoolbarbutton-class.md#onclick).)|  
|[CMFCToolBarMenuButton::OnClickMenuItem](#onclickmenuitem)|Вызывается платформой, когда пользователь выбирает пункт контекстного меню.|  
|[CMFCToolBarMenuButton::OnContextHelp](#oncontexthelp)|Вызывается платформой, когда родительский инструментов обрабатывает сообщение WM_HELPHITTEST. (Переопределяет [CMFCToolBarButton::OnContextHelp](../../mfc/reference/cmfctoolbarbutton-class.md#oncontexthelp).)|  
|[CMFCToolBarMenuButton::OnDraw](#ondraw)|Вызывается платформой для отрисовки кнопки с использованием указанных стилей и параметров. (Переопределяет [CMFCToolBarButton::OnDraw](../../mfc/reference/cmfctoolbarbutton-class.md#ondraw).)|  
|[CMFCToolBarMenuButton::OnDrawOnCustomizeList](#ondrawoncustomizelist)|Вызывается платформой для отрисовки кнопки **команды** области **Настройка** диалоговое окно. (Переопределяет [CMFCToolBarButton::OnDrawOnCustomizeList](../../mfc/reference/cmfctoolbarbutton-class.md#ondrawoncustomizelist).)|  
|[CMFCToolBarMenuButton::OpenPopupMenu](#openpopupmenu)|Вызывается платформой, когда пользователь открывает во всплывающем меню.|  
|[CMFCToolBarMenuButton::ResetImageToDefault](#resetimagetodefault)|Задает значение по умолчанию изображение, связанное с кнопкой. (Переопределяет [CMFCToolBarButton::ResetImageToDefault](../../mfc/reference/cmfctoolbarbutton-class.md#resetimagetodefault).)|  
|[CMFCToolBarMenuButton::SaveBarState](#savebarstate)|Сохраняет состояние кнопки панели инструментов. (Переопределяет [CMFCToolBarButton::SaveBarState](../../mfc/reference/cmfctoolbarbutton-class.md#savebarstate).)|  
|[CMFCToolBarMenuButton::Serialize](#serialize)|Считывает этот объект из архива или записывает его в архив. (Переопределяет [CMFCToolBarButton::Serialize](../../mfc/reference/cmfctoolbarbutton-class.md#serialize).)|  
|[CMFCToolBarMenuButton::SetACCData](#setaccdata)|Заполняет предоставленный `CAccessibilityData` объект с данные специальных возможностей с помощью кнопки панели инструментов. (Переопределяет [CMFCToolBarButton::SetACCData](../../mfc/reference/cmfctoolbarbutton-class.md#setaccdata).)|  
|[CMFCToolBarMenuButton::SetMenuOnly](#setmenuonly)|Указывает, можно ли добавить кнопки панели инструментов.|  
|[CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode)|Указывает, является ли всплывающее меню в режиме палитры.|  
|[CMFCToolBarMenuButton::SetMessageWnd](#setmessagewnd)||  
|[CMFCToolBarMenuButton::SetRadio](#setradio)|Заставляет кнопку меню панели инструментов, чтобы отобразить значок, указывающий, что он выбран.|  
|[CMFCToolBarMenuButton::SetTearOff](#settearoff)|Задает перемещаемое панели идентификатор всплывающего меню.|  
  
### <a name="protected-methods"></a>Защищенные методы  
  
|Имя|Описание|  
|----------|-----------------|  
|[CMFCToolBarMenuButton::DrawDocumentIcon](#drawdocumenticon)|Рисует значка на кнопке меню.|  
  
### <a name="data-members"></a>Элементы данных  
  
|name|Описание|  
|----------|-----------------|  
|[CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw](#m_balwayscallownerdraw)|Если значение равно TRUE, всегда вызывается платформой [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) при рисовании кнопки.|  
  
## <a name="remarks"></a>Примечания  
 Объект `CMFCToolBarMenuButton` может отображаться как меню, элемент меню имеет вложенные меню, кнопка, которая выполняет команду или отображает меню или кнопки, которая отображает только меню. Вы определите поведение и внешний вид кнопки меню, указав параметры, такие как изображения, текста, дескриптор меню и идентификатор, связанный с кнопкой в конструкторе `CMFCToolbarMenuButton::CMFCToolbarMenuButton`.  
  
 Пользовательский класс, производный от `CMFCToolbarMenuButton` необходимо использовать класс [DECLARE_SERIAL](run-time-object-model-services.md#declare_serial) макрос. [DECLARE_DYNCREATE](run-time-object-model-services.md#declare_dyncreate) макрос выдает ошибку при закрытии приложения.  
  
## <a name="example"></a>Пример  
 Следующий пример демонстрирует настройку `CMFCToolBarMenuButton` объекта. Код иллюстрирует способ указать, что раскрывающееся меню находится в режиме палитры и укажите идентификатор для перемещаемой панелью, которая создается, когда пользователь перетаскивает кнопку меню из строки меню. Этот фрагмент кода входит в состав [примера Word Pad](../../visual-cpp-samples.md).  
  
 [!code-cpp[NVC_MFC_WordPad#10](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_1.cpp)]  
  
## <a name="inheritance-hierarchy"></a>Иерархия наследования  
 [CObject](cobject-class.md)  
  
 [CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)  
  
 [CMFCToolBarMenuButton](../../mfc/reference/cmfctoolbarmenubutton-class.md)  
  
## <a name="requirements"></a>Требования  
 **Заголовок:** afxtoolbarmenubutton.h  
  
##  <a name="cmfctoolbarmenubutton"></a>  CMFCToolBarMenuButton::CMFCToolBarMenuButton  
 Создает объект `CMFCToolBarMenuButton`.  
  
```  
CMFCToolBarMenuButton();
CMFCToolBarMenuButton(const CMFCToolBarMenuButton& src);

CMFCToolBarMenuButton(
    UINT uiID,  
    HMENU hMenu,  
    int iImage,  
    LPCTSTR lpszText=NULL,  
    BOOL bUserButton=FALSE);
```  
  
### <a name="parameters"></a>Параметры  
*src*<br/>
[in] Существующий `CMFCToolBarMenuButton` объект, который необходимо скопировать в это `CMFCToolBarMenuButton` объекта.  
  
*uiID*<br/>
[in] Идентификатор команды для выполнения, когда пользователь нажимает кнопку; или (целое число без знака) -1 для кнопки меню, непосредственно не выполнить команду.  
  
*hMenu*<br/>
[in] Дескриптор меню; или значение NULL, если нет кнопки меню.  
  
*iImage*<br/>
[in] Индекс изображения для кнопки; или -1, если эта кнопка не имеет значка или использует значок для команды, заданной параметром *uiID*. Индекс является одинаковым для каждого `CMFCToolBarImages` объекта в приложении.  
  
*lpszText*<br/>
[in] Текст кнопки меню панели инструментов.  
  
*bUserButton*<br/>
[in] Значение TRUE, если кнопка отображает изображение, определяемые пользователем; Значение FALSE, если кнопка отображает предопределенные изображения, связанного с команда, заданная *uiID*.  
  
### <a name="remarks"></a>Примечания  
 Если *uiID* является допустимым ИД команды, кнопка выполняет эту команду, когда пользователь щелкает его. Если *hMenu* является дескриптором допустимым меню, кнопки предоставляет раскрывающееся меню, когда он отображается в меню находится в панели инструментов или подменю. Если оба *uiID* и *hMenu* являются допустимыми, split-кнопкой с часть, которая выполнит команду, когда пользователь щелкает и часть с стрелка вниз, которая будет раскрывающегося меню при пользователя щелкает его. Тем не менее если *hMenu* допустим, пользователь не сможет нажмите кнопку, чтобы выполнить команду, при вставке в меню кнопки.  
  
### <a name="example"></a>Пример  
 Следующий пример демонстрирует создание объекта класса `CMFCToolBarMenuButton` класса. Этот фрагмент кода входит в состав [примера Word Pad](../../visual-cpp-samples.md).  
  
 [!code-cpp[NVC_MFC_WordPad#9](../../mfc/reference/codesnippet/cpp/cmfctoolbarmenubutton-class_2.cpp)]  
  
##  <a name="comparewith"></a>  CMFCToolBarMenuButton::CompareWith  

  
```  
virtual BOOL CompareWith(const CMFCToolBarButton& other) const;  
```  
  
### <a name="parameters"></a>Параметры  
 [in] *других*  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="copyfrom"></a>  CMFCToolBarMenuButton::CopyFrom  

  
```  
virtual void CopyFrom(const CMFCToolBarButton& src);
```  
  
### <a name="parameters"></a>Параметры  
 [in] *src*  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="createfrommenu"></a>  CMFCToolBarMenuButton::CreateFromMenu  
 Инициализирует меню панели инструментов из меню дескриптора Windows.  
  
```  
virtual void CreateFromMenu(HMENU hMenu);
```  
  
### <a name="parameters"></a>Параметры  
*hMenu*<br/>
[in] Дескриптор для меню.  
  
### <a name="remarks"></a>Примечания  
 Кнопки панели инструментов меню можно отображать подменю раскрывающегося списка.  
  
 Платформа вызывает этот метод для инициализации команды в подменю из меню.  
  
##  <a name="createmenu"></a>  CMFCToolBarMenuButton::CreateMenu  
 Создание меню, которое состоит из команды в меню панели инструментов. Возвращает дескриптор для меню.  
  
```  
virtual HMENU CreateMenu() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение handle в меню, если успех. Значение NULL, если список команд, связанных с кнопкой панели инструментов меню пуст.  
  
### <a name="remarks"></a>Примечания  
 Можно переопределить этот метод в производном классе для настройки способа создания меню.  
  
##  <a name="createpopupmenu"></a>  CMFCToolBarMenuButton::CreatePopupMenu  
 Создает `CMFCPopupMenu` объект для отображения меню панели инструментов.  
  
```  
virtual CMFCPopupMenu* CreatePopupMenu();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на `CMFCPopupMenu` объекта, который отображает раскрывающееся меню, связанное с кнопкой панели инструментов меню.  
  
### <a name="remarks"></a>Примечания  
 Этот метод вызывается платформой для подготовки Отображение раскрывающегося меню, связанное с кнопкой.  
  
 Реализация по умолчанию просто создает и возвращает новый `CMFCPopupMenu` объекта. Переопределите этот метод, если вы хотите использовать производным типом класса [класс CMFCPopupMenu](cmfcpopupmenu-class.md) или выполнять дополнительную инициализацию.  
  
##  <a name="drawdocumenticon"></a>  CMFCToolBarMenuButton::DrawDocumentIcon  
 Рисует значок документа на кнопке меню.  
  
```  
void DrawDocumentIcon(
    CDC* pDC,  
    const CRect& rectImage,  
    HICON hIcon);
```  
  
### <a name="parameters"></a>Параметры  
*основного контроллера домена*<br/>
[in] Указатель на контекст устройства.  
  
*rectImage*<br/>
[in] Координаты ограничивающего прямоугольника изображения.  
  
*hIcon*<br/>
[in] Дескриптор значка.  
  
### <a name="remarks"></a>Примечания  
 Этот метод принимает значок документа и отображает его на кнопке меню, по центру области, заданной *rectImage*.  
  
##  <a name="enablequickcustomize"></a>  CMFCToolBarMenuButton::EnableQuickCustomize  

  
```  
void EnableQuickCustomize();
```  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="hasbutton"></a>  CMFCToolBarMenuButton::HasButton  

  
```  
virtual BOOL HasButton() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="havehotborder"></a>  CMFCToolBarMenuButton::HaveHotBorder  

  
```  
virtual BOOL HaveHotBorder() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="isborder"></a>  CMFCToolBarMenuButton::IsBorder  

  
```  
virtual BOOL IsBorder() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="isclickedonmenu"></a>  CMFCToolBarMenuButton::IsClickedOnMenu  

  
```  
BOOL IsClickedOnMenu() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="isquickmode"></a>  CMFCToolBarMenuButton::IsQuickMode  

  
```  
BOOL IsQuickMode();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="getcommands"></a>  CMFCToolBarMenuButton::GetCommands  
 Предоставляет доступ только для чтения список команд в меню панели инструментов.  
  
```  
const CObList& GetCommands() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Константную ссылку на [класс CObList](../../mfc/reference/coblist-class.md) объект, содержащий коллекцию [класс CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) объектов.  
  
### <a name="remarks"></a>Примечания  
 Кнопки панели инструментов меню можно отображать подменю. Можно предоставить список команд в подменю в конструкторе или в [CMFCToolBarMenuButton::CreateFromMenu](#createfrommenu) как дескриптор меню (HMENU). Меню преобразуется в список объектов, которые являются производными от [класс CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md) и хранятся во внутреннем `CObList` объекта. Этот список доступен, вызвав этот метод.  
  
##  <a name="getimagerect"></a>  CMFCToolBarMenuButton::GetImageRect  
 Возвращает прямоугольник, ограничивающий значок кнопки.  
  
```  
void GetImageRect(CRect& rectImage);
```  
  
### <a name="parameters"></a>Параметры  
*rectImage*<br/>
[out] Ссылку на `CRect` объект, получающий координаты ограничивающего прямоугольника изображения.  
  
##  <a name="getpaletterows"></a>  CMFCToolBarMenuButton::GetPaletteRows  
 Возвращает количество строк в раскрывающемся меню, когда меню находится в режиме палитры.  
  
```  
int GetPaletteRows() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Количество строк в палитре.  
  
### <a name="remarks"></a>Примечания  
 При «меню» будет переведена в режим палитры, пункты меню будет отображаться в нескольких столбцах с ограниченное число строк. Вызовите этот метод, чтобы получить количество строк. Можно включить или отключить режим палитры и укажите число строк с помощью [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).  
  
##  <a name="getpopupmenu"></a>  CMFCToolBarMenuButton::GetPopupMenu  
 Возвращает указатель на [класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) , представляющий стрелку раскрывающегося меню кнопки.  
  
```  
CMFCPopupMenu* GetPopupMenu() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Указатель на [класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) объект, который был создан при framework нарисованную вложенного меню меню кнопки панели инструментов; Значение NULL, если нет подменю отображается.  
  
### <a name="remarks"></a>Примечания  
 Если кнопки панели инструментов меню отображает раскрывающееся меню, кнопки создает [класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) объект для представления в меню. Вызовите этот метод, чтобы получить указатель на `CMFCPopupMenu` объект. Не следует хранить возвращаемого указателя, так как он является временным и становится недействительным, когда пользователь закрывает раскрывающееся меню.  
  
##  <a name="isdroppeddown"></a>  CMFCToolBarMenuButton::IsDroppedDown  
 Указывает, отображается ли в данный момент во всплывающем меню.  
  
```  
virtual BOOL IsDroppedDown() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если кнопка панели инструментов меню отображает его подменю; в противном случае — значение FALSE.  
  
##  <a name="isemptymenuallowed"></a>  CMFCToolBarMenuButton::IsEmptyMenuAllowed  
 Указывает, отображает ли пунктов меню пустой подменю.  
  
```  
virtual BOOL IsEmptyMenuAllowed() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если платформа открывается подменю из пункта меню выбранного даже в том случае, если подменю является пустым; в противном случае — значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 Этот метод вызывается платформой, когда пользователь пытается открыть подменю из пункта меню выбранного. Если подменю является пустым и `IsEmptyMenuAllowed` возвращает значение FALSE, не будут открываться подменю.  
  
 Реализация по умолчанию возвращает значение FALSE. Переопределите этот метод для настройки этого поведения.  
  
##  <a name="isexclusive"></a>  CMFCToolBarMenuButton::IsExclusive  
 Указывает, является ли кнопка в монопольном режиме.  
  
```  
virtual BOOL IsExclusive() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если кнопка работает в монопольном режиме; в противном случае — значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 Когда пользователь, открывается контекстное меню для кнопки и затем перемещает указатель мыши на другую кнопку панели инструментов или меню, во всплывающем меню закрывается, если кнопка находится в монопольном режиме.  
  
 Реализация по умолчанию всегда возвращает значение FALSE. Переопределите этот метод в производном классе, если вы хотите включить в монопольном режиме.  
  
##  <a name="ismenupalettemode"></a>  CMFCToolBarMenuButton::IsMenuPaletteMode  
 Определяет, является ли раскрывающееся меню в режиме палитры.  
  
```  
BOOL IsMenuPaletteMode() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если палитре режим включен, в противном случае — значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 При «меню» будет переведена в режим палитры, пункты меню отображаются в несколько столбцов с ограниченное число строк. Вызовите этот метод, чтобы получить количество строк. Можно включить или отключить режим палитры, вызвав [CMFCToolBarMenuButton::SetMenuPaletteMode](#setmenupalettemode).  
  
##  <a name="istearoffmenu"></a>  CMFCToolBarMenuButton::IsTearOffMenu  
 Указывает, имеет ли раскрывающееся меню с перемещаемой панелью.  
  
```  
virtual BOOL IsTearOffMenu() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если кнопки панели инструментов меню перемещаемой панелью; в противном случае — значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 Для включения функции перемещаемой и задания перемещаемой штрих-код, вызовите [CMFCToolBarMenuButton::SetTearOff](#settearoff).  
  
##  <a name="m_balwayscallownerdraw"></a>  CMFCToolBarMenuButton::m_bAlwaysCallOwnerDraw  
 Указывает, всегда ли платформа вызывает [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) при рисовании кнопки.  
  
```  
static BOOL m_bAlwaysCallOwnerDraw;  
```  
  
### <a name="remarks"></a>Примечания  
 Когда эта переменная-член имеет значение TRUE, кнопки всегда вызывает [CFrameWndEx::OnDrawMenuImage](../../mfc/reference/cframewndex-class.md#ondrawmenuimage) метод для отображения изображения на кнопке. Когда `m_bAlwaysCallOwnerDraw` имеет значение FALSE, самой кнопке Рисует изображение, если изображение является стандартным. В противном случае он вызывает `OnDrawMenuImage`.  
  
##  <a name="onaftercreatepopupmenu"></a>  CMFCToolBarMenuButton::OnAfterCreatePopupMenu  

  
```  
virtual void OnAfterCreatePopupMenu();
```  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="onbeforedrag"></a>  CMFCToolBarMenuButton::OnBeforeDrag  

  
```  
virtual BOOL OnBeforeDrag() const;  
```  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="oncalculatesize"></a>  CMFCToolBarMenuButton::OnCalculateSize  

  
```  
virtual SIZE OnCalculateSize(
    CDC* pDC,  
    const CSize& sizeDefault,  
    BOOL bHorz);
```  
  
### <a name="parameters"></a>Параметры  
*основного контроллера домена*<br/>
[in] [in] *sizeDefault*  
 [in] *bHorz*  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="oncancelmode"></a>  CMFCToolBarMenuButton::OnCancelMode  

  
```  
virtual void OnCancelMode();
```  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="onchangeparentwnd"></a>  CMFCToolBarMenuButton::OnChangeParentWnd  

  
```  
virtual void OnChangeParentWnd(CWnd* pWndParent);
```  
  
### <a name="parameters"></a>Параметры  
 [in] *pWndParent*  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="onclick"></a>  CMFCToolBarMenuButton::OnClick  

  
```  
virtual BOOL OnClick(
    CWnd* pWnd,  
    BOOL bDelay = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
*pWnd*<br/>
[in] [in] *bDelay*  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="onclickmenuitem"></a>  CMFCToolBarMenuButton::OnClickMenuItem  
 Вызывается платформой, когда пользователь выбирает элемент в раскрывающемся меню.  
  
```  
virtual BOOL OnClickMenuItem();
```  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение FALSE, если платформа должна продолжаться меню по умолчанию элемент обработки; значение TRUE, в противном случае. Реализация по умолчанию всегда возвращает значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 Когда пользователь выбирает пункт меню, платформа выполняет команду, связанный с данным элементом.  
  
 Чтобы настроить обработку элемента меню, переопределите `OnClickMenuItem` в класс, производный от `CMFCToolBarMenuButton` класса. Необходимо также переопределить [CFrameWndEx::OnShowPopupMenu](../../mfc/reference/cframewndex-class.md#onshowpopupmenu) и замените кнопок меню, которые требуют специальной обработки с помощью экземпляров производного класса.  
  
##  <a name="oncontexthelp"></a>  CMFCToolBarMenuButton::OnContextHelp  

  
```  
virtual BOOL OnContextHelp(CWnd* pWnd);
```  
  
### <a name="parameters"></a>Параметры  
 [in] *pWnd*  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="ondraw"></a>  CMFCToolBarMenuButton::OnDraw  

  
```  
virtual void OnDraw(
    CDC* pDC,  
    const CRect& rect,  
    CMFCToolBarImages* pImages,  
    BOOL bHorz = TRUE,  
    BOOL bCustomizeMode = FALSE,  
    BOOL bHighlight = FALSE,  
    BOOL bDrawBorder = TRUE,  
    BOOL bGrayDisabledButtons = TRUE);
```  
  
### <a name="parameters"></a>Параметры  
*основного контроллера домена*<br/>
[in] [in] *rect*  
*pImages*<br/>
[in] [in] *bHorz*  
*bCustomizeMode*<br/>
[in] [in] *bHighlight*  
*bDrawBorder*<br/>
[in] [in] *bGrayDisabledButtons*  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="ondrawoncustomizelist"></a>  CMFCToolBarMenuButton::OnDrawOnCustomizeList  

  
```  
virtual int OnDrawOnCustomizeList(
    CDC* pDC,  
    const CRect& rect,  
    BOOL bSelected);
```  
  
### <a name="parameters"></a>Параметры  
*основного контроллера домена*<br/>
[in] [in] *rect*  
 [in] *bSelected*  
  
### <a name="return-value"></a>Возвращаемое значение  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="openpopupmenu"></a>  CMFCToolBarMenuButton::OpenPopupMenu  
 Вызывается платформой, когда пользователь открывает раскрывающееся меню, кнопки панели инструментов меню.  
  
```  
virtual BOOL OpenPopupMenu(CWnd* pWnd=NULL);
```  
  
### <a name="parameters"></a>Параметры  
*pWnd*<br/>
[in] Определяет окно, которое получает команды выберите в раскрывающемся меню. Он может иметь значение NULL, только в том случае, если родительское окно имеет кнопку меню панели инструментов.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Значение TRUE, если [класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md) объект был создан и открыт успешно; в противном случае — значение FALSE.  
  
### <a name="remarks"></a>Примечания  
 Эта функция вызывается платформой, когда пользователь открывает раскрывающееся меню с панели инструментов меню.  
  
##  <a name="resetimagetodefault"></a>  CMFCToolBarMenuButton::ResetImageToDefault  

  
```  
virtual void ResetImageToDefault();
```  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="savebarstate"></a>  CMFCToolBarMenuButton::SaveBarState  

  
```  
virtual void SaveBarState();
```  
  
### <a name="remarks"></a>Примечания  
 Этот метод вызывается платформой при создании кнопки панели инструментов в результате операции перетаскивания и вставки. Этот метод вызывает метод [CMFCPopupMenu::SaveState](../../mfc/reference/cmfcpopupmenu-class.md#savestate) метод всплывающее меню верхнего уровня, что приводит к родительской кнопки, всплывающее меню, чтобы повторно создать его меню.  
  
##  <a name="serialize"></a>  CMFCToolBarMenuButton::Serialize  

  
```  
virtual void Serialize(CArchive& ar);
```  
  
### <a name="parameters"></a>Параметры  
 [in] *ar*  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="setaccdata"></a>  CMFCToolBarMenuButton::SetACCData  
 Задает данные специальных возможностей для элемента ленты.  
  
```  
virtual BOOL SetACCData(
    CWnd* pParent,  
    CAccessibilityData& data);
```  
  
### <a name="parameters"></a>Параметры  
 *pParent*  
 Родительское окно для элемента ленты.  
  
 *data*  
 Данные специальных возможностей для элемента ленты.  
  
### <a name="return-value"></a>Возвращаемое значение  
 Всегда возвращает значение TRUE.  
  
### <a name="remarks"></a>Примечания  
 По умолчанию этот метод задает данные специальных возможностей для элемента ленты и всегда возвращает значение TRUE. Переопределите этот метод, чтобы задать данные специальных возможностей и возвращать значение, указывающее на успешное или неуспешное выполнение.  
  
##  <a name="setmenuonly"></a>  CMFCToolBarMenuButton::SetMenuOnly  
 Указывает, рисуется ли кнопки как кнопки меню или разворачивающуюся кнопку, если он имеет идентификатор допустимые команды и подменю.  
  
```  
void SetMenuOnly(BOOL bMenuOnly);
```  
  
### <a name="parameters"></a>Параметры  
*bMenuOnly*<br/>
[in] Значение TRUE, чтобы показать эту кнопку, как кнопка меню, когда ее идентификатор допустимые команды и подменю, FALSE нужно показать эту кнопку, как разворачивающуюся кнопку, если он имеет идентификатор допустимые команды и подменю.  
  
### <a name="remarks"></a>Примечания  
 Как правило Если кнопки панели инструментов меню есть вложенное меню и идентификатор команды, меню вероятно разворачивающуюся кнопку с главной кнопки и прикрепленное кнопка со стрелкой вниз. Если этот метод вызывается и *bMenuOnly* имеет значение TRUE, кнопка отображается вместо одного меню кнопка со стрелкой вниз на кнопке. Когда пользователь нажимает клавишу со стрелкой в любом из режимов, открывается подменю и когда пользователь щелкает часть не стрелку кнопки в любом из режимов платформа выполняет команду.  
  
##  <a name="setmenupalettemode"></a>  CMFCToolBarMenuButton::SetMenuPaletteMode  
 Указывает, находится ли раскрывающееся меню в режиме палитры.  
  
```  
void SetMenuPaletteMode(
    BOOL bMenuPaletteMode=TRUE,  
    int nPaletteRows=1);
```  
  
### <a name="parameters"></a>Параметры  
*bMenuPaletteMode*<br/>
[in] Указывает, находится ли раскрывающееся меню в режиме палитры.  
  
*nPaletteRows*<br/>
[in] Количество строк в палитре.  
  
### <a name="remarks"></a>Примечания  
 В режиме палитры все пункты меню отображаются в виде по нескольким столбцам палитры. Укажите число строк с помощью *nPaletteRows*.  
  
##  <a name="setmessagewnd"></a>  CMFCToolBarMenuButton::SetMessageWnd  

  
```  
void SetMessageWnd(CWnd* pWndMessage);
```  
  
### <a name="parameters"></a>Параметры  
 [in] *pWndMessage*  
  
### <a name="remarks"></a>Примечания  
  
##  <a name="setradio"></a>  CMFCToolBarMenuButton::SetRadio  
 Задает кнопку меню панели инструментов для отображения переключателя значок стиль кнопки, если флажок установлен.  
  
```  
virtual void SetRadio();
```  
  
### <a name="remarks"></a>Примечания  
 При рисовании кнопки меню во проверки, он вызывает [CMFCVisualManager::OnDrawMenuCheck](../../mfc/reference/cmfcvisualmanager-class.md#ondrawmenucheck) для рисования значок галочки. По умолчанию `OnDrawMenuCheck` запросов, что текущий наглядный диспетчер рисует флажок стиль меток над кнопки меню. После вызова этого метода, текущий наглядный диспетчер вместо рисует флажок стиль кнопки переключателя на кнопке меню. Это изменение невозможно отменить.  
  
 При вызове этого метода и кнопку меню отображается в настоящий момент, она будет обновлена.  
  
##  <a name="settearoff"></a>  CMFCToolBarMenuButton::SetTearOff  
 Указывает идентификатор перемещаемой панелью, выберите в раскрывающемся меню.  
  
```  
virtual void SetTearOff(UINT uiBarID);
```  
  
### <a name="parameters"></a>Параметры  
*uiBarID*<br/>
[in] Указывает новый перемещаемое панели идентификатор.  
  
### <a name="remarks"></a>Примечания  
 Этот метод используется для указания идентификатора для перемещаемой панелью, которая создается, когда пользователь перетаскивает кнопку меню из строки меню. Если *uiBarID* параметр равен 0, пользователь не может создать кнопку меню.  
  
 Вызовите [CWinAppEx::EnableTearOffMenus](../../mfc/reference/cwinappex-class.md#enabletearoffmenus) для включения функции перемещаемое меню в приложении.  
  
## <a name="see-also"></a>См. также  
 [Диаграмма иерархии](../../mfc/hierarchy-chart.md)   
 [Классы](../../mfc/reference/mfc-classes.md)   
 [Класс CMFCToolBarButton](../../mfc/reference/cmfctoolbarbutton-class.md)   
 [Класс CMFCToolBar](../../mfc/reference/cmfctoolbar-class.md)   
 [Класс CMFCPopupMenu](../../mfc/reference/cmfcpopupmenu-class.md)