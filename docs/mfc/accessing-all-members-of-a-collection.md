---
title: Доступ ко всем членам коллекции | Документы Microsoft
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-mfc
ms.topic: conceptual
dev_langs:
- C++
helpviewer_keywords:
- MFC, collections
- enumerations [MFC]
- enumerating collections [MFC]
- collections [MFC], accessing
- collection classes [MFC]
- ', '
- ', '
- ', '
- ', '
- ', '
- ', '
- ', '
ms.assetid: 7bbae518-062e-4393-81f9-b22abd2e5f59
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: cf25b84c4ee9808210d2dbf2f5115319a517c71b
ms.sourcegitcommit: 060f381fe0807107ec26c18b46d3fcb859d8d2e7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 06/25/2018
ms.locfileid: "36931942"
---
# <a name="accessing-all-members-of-a-collection"></a>Доступ ко всем членам коллекции
Для доступа к своим элементам классы коллекций массивов MFC (как шаблонные, так и нешаблонные) используют индексы. Для описания в заданной позиции в коллекции классы коллекций списков и схем MFC (как шаблонные, так и нешаблонные) используют индикатор типа **POSITION** . Чтобы получить доступ к одному или нескольким членам этих коллекций, сначала следует инициализировать индикатор позиции, а затем повторно передавать эту позицию в коллекцию с запросом на возврат следующего элемента. Коллекция не отвечает за поддержание сведений о состоянии хода выполнения итерации. Эта информация хранится в индикаторе позиции. Однако, принимая во внимание конкретную позицию, коллекция отвечает за возврат следующего элемента.  
  
 В приведенных далее процедурах показана итерация в трех основных типах коллекций в MFC.  
  
-   [Итерация массива](#_core_to_iterate_an_array)  
  
-   [Итерация списка](#_core_to_iterate_a_list)  
  
-   [Итерация схемы](#_core_to_iterate_a_map)  
  
### <a name="_core_to_iterate_an_array"></a> Итерация массива  
  
1.  Используйте последовательные номера индекса с функцией-членом `GetAt` .  
  
     [!code-cpp[NVC_MFCCollections#12](../mfc/codesnippet/cpp/accessing-all-members-of-a-collection_1.cpp)]  
  
     В этом примере используется массив типизированных указателей, который содержит указатели на объекты `CPerson` . Массив является производным от класса `CObArray`, одного из нешаблонных предопределенных классов. `GetAt` возвращает указатель на объект `CPerson` . Для классов коллекций типизированных указателей (массивов или списков) первый параметр указывает базовый класс, второй параметр указывает тип для хранения.  
  
     `CTypedPtrArray` Класса также перегрузки **[]** оператор, чтобы вы могли использовать обычной синтаксис индекса для доступа к элементам массива. Альтернативой инструкции в теле **для** выше цикл обработки.  
  
     [!code-cpp[NVC_MFCCollections#13](../mfc/codesnippet/cpp/accessing-all-members-of-a-collection_2.cpp)]  
  
     Этот оператор существует как в **константной** , так и в не**константной** версиях. **Константная** версия, которая вызывается для **константных** массивов, может отображаться только в правой части оператора присваивания.  
  
### <a name="_core_to_iterate_a_list"></a> Итерация списка  
  
1.  Для прохода по списку используйте функции-члены `GetHeadPosition` и `GetNext` :  
  
     [!code-cpp[NVC_MFCCollections#14](../mfc/codesnippet/cpp/accessing-all-members-of-a-collection_3.cpp)]  
  
     В этом примере используется список типизированных указателей, который содержит указатели на объекты `CPerson` . Объявление списка напоминает объявление для массива в процедуре [Итерация массива](#_core_to_iterate_an_array) , но является производным от класса `CObList`. `GetNext` возвращает указатель на объект `CPerson` .  
  
### <a name="_core_to_iterate_a_map"></a> Итерация схемы  
  
1.  Используйте `GetStartPosition` для перехода в начало схемы и `GetNextAssoc` для повторного получения следующего ключа и значения из схемы, как показано в следующем примере.  
  
     [!code-cpp[NVC_MFCCollections#15](../mfc/codesnippet/cpp/accessing-all-members-of-a-collection_4.cpp)]  
  
     В этом примере применяется шаблон простой схемы (а не коллекция типизированных указателей), использующий ключи `CString` и сохраняющий указатели на объекты `CPerson` . При использовании функций доступа, таких как `GetNextAssoc`, класс предоставляет указатели на объекты `CPerson` . При использовании одной из коллекций нешаблонных схем необходимо привести возвращенный указатель `CObject` к указателю на `CPerson`.  
  
    > [!NOTE]
    >  При работе с нешаблонными схемами компилятору требуется ссылка на указатель `CObject` в последнем параметре на `GetNextAssoc`. При воде данных необходимо привести указатели к этому типу, как показано в следующем примере.  
  
     Шаблонное решение проще в использовании и помогает обеспечить более высокий уровень безопасности типов. Как видно из примера ниже, нешаблонный код более сложен.  
  
     [!code-cpp[NVC_MFCCollections#16](../mfc/codesnippet/cpp/accessing-all-members-of-a-collection_5.cpp)]  
  
 Дополнительные сведения см. в разделе [Удаление всех объектов из коллекции CObject](../mfc/deleting-all-objects-in-a-cobject-collection.md).  
  
## <a name="see-also"></a>См. также  
 [Коллекции](../mfc/collections.md)

