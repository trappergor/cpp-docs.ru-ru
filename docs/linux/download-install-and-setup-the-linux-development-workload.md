---
title: Установка рабочей нагрузки Linux для проектов C++ в Visual Studio
description: Загрузка, установка и настройка рабочей нагрузки Linux для проектов C++ в Visual Studio.
ms.date: 05/03/2020
ms.assetid: e11b40b2-f3a4-4f06-b788-73334d58dfd9
ms.openlocfilehash: 9d0c832ec383286b5f89b8ed1474e69d72b5cb98
ms.sourcegitcommit: 9c2b3df9b837879cd17932ae9f61cdd142078260
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 10/29/2020
ms.locfileid: "92921611"
---
# <a name="download-install-and-set-up-the-linux-workload"></a>Загрузка, установка и настройка рабочей нагрузки Linux

::: moniker range="msvc-140"

Проекты Linux поддерживаются в Visual Studio версии 2017 и выше. Чтобы увидеть документацию для этих версий, установите в данной статье селектор **Версия** Visual Studio в Visual Studio 2017 или Visual Studio 2019. Он находится в верхней части оглавления на этой странице.

::: moniker-end

::: moniker range=">=msvc-150"

Вы можете использовать интегрированную среду разработки Visual Studio в Windows для создания, редактирования и отладки проектов C++, которые выполняются в удаленной системе Linux, на виртуальной машине или в [подсистеме Windows для Linux](/windows/wsl/about).

Вы можете работать с имеющейся базой кода, где CMake не требуется преобразовывать в проект Visual Studio. Если база кода является кроссплатформенной, в Visual Studio можно создавать решения как для Windows, так и для Linux. Например, с помощью Visual Studio можно редактировать, выполнять сборку и отлаживать свой код в Windows. Затем можно быстро перенацелить проект для Linux на сборку и отладку в среде Linux. Файлы заголовков Linux автоматически копируются на ваш локальный компьютер. Visual Studio использует их для обеспечения полной поддержки технологии IntelliSense (завершение операторов, переход к определению и т. д.).

Чтобы использовать любой из этих сценариев, требуется рабочая нагрузка **Разработка для Linux на C++** .

::: moniker-end

::: moniker range=">=msvc-150"

## <a name="visual-studio-setup"></a>Установка Visual Studio

1. В поле поиска Windows введите "Visual Studio Installer":

   ![Поле поиска Windows](media/visual-studio-installer-search.png)

1. Найдите установщик в разделе **Приложения** и дважды щелкните его. Когда откроется установщик, щелкните **Изменить** и перейдите на вкладку **Рабочие нагрузки**. Прокрутите вниз до раздела **Другие наборы инструментов** и выберите рабочую нагрузку **Разработка для Linux на C++** .

   ![Рабочая нагрузка "Разработка на Visual C++ для Linux"](media/linuxworkload.png)

1. Если вы используете внедренную платформу или платформу Интернета вещей, перейдите в панель **Сведения об установке** , которая находится справа. В разделе **Разработка для Linux на C ++** разверните узел **Необязательные компоненты** и выберите нужные компоненты. Поддержка CMake для Linux включена по умолчанию.

1. Для продолжения установки нажмите кнопку **Изменить**.

## <a name="options-for-creating-a-linux-environment"></a>Варианты создания среды Linux

Если у вас нет компьютера Linux, можно создать виртуальную машину Linux в Azure. Дополнительные сведения см. в разделе [Краткое руководство. Создание виртуальной машины Linux на портале Azure](/azure/virtual-machines/linux/quick-create-portal).

В Windows 10 можно установить и настроить использование определенного дистрибутива Linux в подсистеме Windows для Linux (WSL). См. подробнее руководство по [установке подсистемы Windows для Linux в Windows 10](/windows/wsl/install-win10). Если не удается получить доступ к Microsoft Store, можете [вручную скачать пакеты дистрибутивов WSL](/windows/wsl/install-manual). WSL — это удобная консольная среда, но ее не рекомендуется использовать для графических приложений.

::: moniker-end

::: moniker range="msvc-160"

Для проектов Linux в Visual Studio необходимо установить следующие зависимости в удаленной системе Linux или WSL:

- **Компилятор**  — Visual Studio 2019 полностью поддерживает GCC и [Clang](../build/clang-support-cmake.md).
- **gdb**  — Visual Studio автоматически запускает gdb в системе Linux и использует интерфейс отладчика Visual Studio для обеспечения всех возможностей отладки в Linux.
- **rsync** и **zip**  — благодаря включению rsync и zip Visual Studio может извлекать файлы заголовков из системы Linux в файловую систему Windows для использования технологией IntelliSense.
- **make**
- **openssh-server** (только удаленные системы Linux) — Visual Studio подключается к удаленным системам Linux через безопасное SSH-соединение.
- **CMake** (только для проектов CMake) — вы можете установить [статически связанные двоичные файлы CMake для Linux](https://github.com/microsoft/CMake/releases).
- **ninja-build** (только для проектов CMake) — [Ninja](https://ninja-build.org/) является генератором по умолчанию для конфигураций Linux и WSL в Visual Studio 2019 версии 16.6 или более поздней версии.

В следующих командах предполагается, что вы используете g++ вместо clang.

::: moniker-end

::: moniker range="msvc-150"

Для проектов Linux в Visual Studio необходимо установить следующие зависимости в удаленной системе Linux или WSL:

- **gcc**  — Visual Studio 2017 полностью поддерживает GCC.
- **gdb**  — Visual Studio автоматически запускает gdb в системе Linux и использует интерфейс отладчика Visual Studio для обеспечения всех возможностей отладки в Linux.
- **rsync** и **zip**  — благодаря включению rsync и zip Visual Studio может извлекать файлы заголовков из системы Linux в файловую систему Windows для использования технологией IntelliSense.
- **make**
- **openssh-server**  — Visual Studio подключается к удаленным системам Linux через защищенное SSH-соединение.
- **CMake** (только для проектов CMake) — вы можете установить [статически связанные двоичные файлы CMake для Linux](https://github.com/microsoft/CMake/releases).

::: moniker-end

::: moniker range="msvc-160"

## <a name="linux-setup-ubuntu-on-wsl"></a>Установка Linux: Использование Ubuntu в WSL

Если вы используете WSL, для сборки и отладки не требуется добавлять удаленное подключение или настраивать SSH. Использование **zip** и **rsync** является обязательным для автоматической синхронизации заголовков Linux в Visual Studio и включения поддержки Intellisense. **ninja-build** требуется только для проектов CMake. Если необходимые приложения отсутствуют, их можно установить с помощью следующей команды:

```bash
sudo apt-get install g++ gdb make ninja-build rsync zip
```

::: moniker-end

::: moniker range=">=msvc-150"

## <a name="ubuntu-on-remote-linux-systems"></a>Использование Ubuntu в удаленных системах Linux

В целевой системе Linux должны быть установлены **openssh-server** , **g++** , **gdb** и **make**. **ninja-build** требуется только для проектов CMake. Должна быть запущена управляющая программа **ssh**. Использование **zip** и **rsync** необходимо для автоматической синхронизации удаленных заголовков на локальном компьютере, чтобы обеспечить поддержку Intellisense. Если этих приложений еще нет, их можно установить следующим образом.

1. В командной строке оболочки на компьютере Linux выполните следующую команду:

   ```bash
   sudo apt-get install openssh-server g++ gdb make ninja-build rsync zip
   ```

   Для выполнения команды sudo вам может быть предложено ввести пароль учетной записи root. Введите его и продолжите. После завершения будут установлены требуемые службы и средства.

1. Запустите службу ssh на компьютере Linux, выполнив следующую команду:

   ```bash
   sudo service ssh start
   ```

   Эта команда запускает службу в фоновом режиме и в состоянии готовности к принятию подключений.

::: moniker-end

::: moniker range="msvc-160"

## <a name="fedora-on-wsl"></a>Использование Fedora в WSL

В Fedora используются установщик пакетов **dnf**. Чтобы скачать **g++** , **gdb** , **make** , **rsync** , **ninja-build** и **zip** , выполните следующую команду:

   ```bash
   sudo dnf install gcc-g++ gdb rsync ninja-build make zip
   ```

Использование **zip** и **rsync** является обязательным для автоматической синхронизации заголовков Linux в Visual Studio и включения поддержки Intellisense. **ninja-build** требуется только для проектов CMake.

::: moniker-end

::: moniker range=">=msvc-150"

## <a name="fedora-on-remote-linux-systems"></a>Использование Fedora в удаленных системах Linux

На целевой машине под управлением Fedora используются установщик пакетов **dnf**. Чтобы скачать **openssh-server** , **g++** , **gdb** , **make** , **ninja-build** , **rsync** и **zip** , а затем перезапустить управляющую программу ssh, сделайте следующее: **ninja-build** требуется только для проектов CMake.

1. В командной строке оболочки на компьютере Linux выполните следующую команду:

   ```bash
   sudo dnf install openssh-server gcc-g++ gdb ninja-build make rsync zip
   ```

   Для выполнения команды sudo вам может быть предложено ввести пароль учетной записи root. Введите его и продолжите. После завершения будут установлены требуемые службы и средства.

1. Запустите службу ssh на компьютере Linux, выполнив следующую команду:

   ```bash
   sudo systemctl start sshd
   ```

   Эта команда запускает службу в фоновом режиме и в состоянии готовности к принятию подключений.

## <a name="next-steps"></a>Следующие шаги

Теперь вы можете создать или открыть проект Linux, а также настроить его для выполнения в целевой системе. Дополнительные сведения можно найти в разделе

- [Создание нового проекта Linux на основе MSBuild C++](create-a-new-linux-project.md)
- [Настройка проекта Linux CMake](cmake-linux-project.md)

::: moniker-end
