---
title: /Zc:wchar_t (wchar_t – это собственный тип)
ms.date: 03/01/2018
f1_keywords:
- VC.Project.VCCLWCECompilerTool.TreatWChar_tAsBuiltInType
- VC.Project.VCCLCompilerTool.TreatWChar_tAsBuiltInType
- /Zc:wchar_t
helpviewer_keywords:
- /Zc compiler options [C++]
- -Zc compiler options [C++]
- wchar_t type
- Conformance compiler options
- Zc compiler options [C++]
ms.assetid: b0de5a84-da72-4e5a-9a4e-541099f939e0
ms.openlocfilehash: 114ed4a279b66571c0dc81fc1139dcdc59c17eae
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87234319"
---
# <a name="zcwchar_t-wchar_t-is-native-type"></a>/Zc:wchar_t (wchar_t – это собственный тип)

Анализ в **`wchar_t`** качестве встроенного типа в соответствии со стандартом C++.

## <a name="syntax"></a>Синтаксис

> **/Zc: wchar_t**[ **-** ]

## <a name="remarks"></a>Remarks

Если параметр **/Zc: wchar_t** имеет значение ON, **`wchar_t`** то является ключевым словом встроенного целочисленного типа в коде, скомпилированном как C++. Если параметр **/Zc: wchar_t-** (со знаком минус) или в коде, скомпилированном как C, **`wchar_t`** не является встроенным типом. Вместо этого **`wchar_t`** определяется как **`typedef`** для **`unsigned short`** в каноническом заголовке STDDEF. h. (Реализация Майкрософт определяет его в другом заголовке, который входит в состав STDDEF. h и других стандартных заголовков.)

Не рекомендуется использовать параметр **/Zc: wchar_t** , поскольку стандарт C++ должен **`wchar_t`** быть встроенным типом. Использование **`typedef`** версии может привести к проблемам переносимости. При обновлении с более ранних версий Visual Studio и обнаружении ошибки компилятора [C2664](../../error-messages/compiler-errors-2/compiler-error-c2664.md) , поскольку код пытается неявно преобразовать **`wchar_t`** в в **`unsigned short`** , рекомендуется изменить код, чтобы исправить ошибку, вместо того, чтобы задавать параметр **/Zc: wchar_t-**.

Параметр **/Zc: wchar_t** включен по умолчанию в компиляциях C++ и не учитывается в компиляциях C. Параметр [/permissive-](permissive-standards-conformance.md) не влияет на **/Zc: wchar_t**.

Корпорация Майкрософт реализует **`wchar_t`** в виде двухбайтовых значений без знака. Он сопоставляется с собственным типом, определяемым корпорацией Майкрософт **`__wchar_t`** . Дополнительные сведения о см **`wchar_t`** . в разделе [диапазоны типов данных](../../cpp/data-type-ranges.md) и [фундаментальные типы](../../cpp/fundamental-types-cpp.md).

При написании нового кода, который должен взаимодействовать с более старым кодом, который по-прежнему использует **`typedef`** версию **`wchar_t`** , можно предоставить перегрузки для обоих **`unsigned short`** **`__wchar_t`** вариантов и **`wchar_t`** , чтобы код мог быть связан с кодом, скомпилированным с помощью параметра **/Zc: wchar_t** или скомпилированного кода без него. В противном случае потребуется предоставить две разные сборки библиотеки: одна с, а другая — без параметра **/Zc: wchar_t** Enabled. Даже в этом случае рекомендуется произвести сборку старого кода с использованием компилятора, который используется для компиляции нового кода. Никогда не смешивайте двоичные файлы, скомпилированные разными компиляторами.

Если указан параметр **/Zc: wchar_t** , определяются определенные символы ** \_ WCHAR \_ t \_ ** и собственные, определенные в параметре ** \_ \_ WCHAR \_ t \_ ** . Для получения дополнительной информации см. [Predefined Macros](../../preprocessor/predefined-macros.md).

Если в коде используются глобальные функции компилятора COM, так как параметр **/Zc: wchar_t** теперь включен по умолчанию, рекомендуется изменить явные ссылки на комсупп. lib (из [комментария pragma](../../preprocessor/comment-c-cpp.md) или в командной строке) на комсуппв. lib или комсуппвд. lib. (Если необходимо выполнить компиляцию с помощью **/Zc: wchar_t-**, используйте комсупп. lib.) Если вы включили файл заголовка comdef. h, для вас будет указана правильная библиотека. Дополнительные сведения о поддержке COM компилятором см. в разделе [Поддержка COM компилятором](../../cpp/compiler-com-support.md).

**`wchar_t`** Встроенный тип не поддерживается при компиляции кода на языке C. Дополнительные сведения о проблемах соответствия с Visual C++ см. в разделе [нестандартное поведение](../../cpp/nonstandard-behavior.md).

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите страницу **Свойства конфигурации**  >  **C/C++**  >  **язык** .

1. Измените свойство **обрабатывать wchar_t как встроенное** .

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.TreatWChar_tAsBuiltInType%2A>.

## <a name="see-also"></a>См. также статью

[/Zc (соответствие)](zc-conformance.md)<br/>
