---
title: /H (ограничение длины внешних имен)
ms.date: 09/05/2018
f1_keywords:
- /h
helpviewer_keywords:
- public name length
- /H compiler option [C++]
- H compiler option [C++]
- external names
- -H compiler option [C++]
ms.assetid: de701dd3-ed04-4c88-8195-960d2520ec2e
ms.openlocfilehash: 9a8976700cfb0f333c2715c573aa2d239e2a8e3a
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87218992"
---
# <a name="h-restrict-length-of-external-names"></a>/H (ограничение длины внешних имен)

Не рекомендуется. Ограничивают длину внешних имен.

## <a name="syntax"></a>Синтаксис

> **/H**<em>Число</em> /h

## <a name="arguments"></a>Аргументы

*number*<br/>
Указывает максимально допустимую длину внешних имен в программе.

## <a name="remarks"></a>Remarks

По умолчанию длина внешних (общедоступных) имен составляет 2 047 символов. Это справедливо для программ C и C++. Использование **/h** может уменьшить максимально допустимую длину идентификаторов, а не увеличить его. Пробел между **/h** и *Number* является необязательным.

Если программа содержит внешние имена, длина которых превышает *число*, лишние символы игнорируются. При компиляции программы без **/h** и если идентификатор содержит более 2 047 символов, компилятор создаст [неустранимую ошибку C1064](../../error-messages/compiler-errors-1/fatal-error-c1064.md).

Ограничение длины включает в себя любой созданный компилятором символ подчеркивания ( **\_** ) или символ ( **\@** ). Эти символы являются частью идентификатора и принимают значительное расположение.

- Компилятор добавляет символ подчеркивания в начале ( **\_** ) в имена, измененные с помощью **`__cdecl`** (по умолчанию) и **`__stdcall`** соглашениями о вызовах, а также в начале знака ( **\@** ) на имена, измененные **`__fastcall`** соглашением о вызовах.

- Компилятор добавляет сведения о размере аргумента в имена, измененные **`__fastcall`** **`__stdcall`** соглашениями о вызовах и, и добавляет сведения о типах в имена C++.

Возможно, будет полезно найти **/h** :

- При создании смешанных или переносимых программ.

- При использовании средств, которые накладывают ограничения на длину внешних идентификаторов.

- Если требуется ограничить объем пространства, используемого символами в отладочной сборке.

В следующем примере показано, как использование **/h** может фактически приводить к ошибкам, если длина идентификатора ограничена слишком большим числом:

```cpp
// compiler_option_H.cpp
// compile with: /H5
// processor: x86
// LNK2005 expected
void func1(void);
void func2(void);

int main() { func1(); }

void func1(void) {}
void func2(void) {}
```

Необходимо также соблюдать осторожность при использовании параметра **/h** из-за предопределенных идентификаторов компилятора. Если максимальная длина идентификатора слишком мала, некоторые предопределенные идентификаторы будут неразрешимыми, а также определенными вызовами библиотечных функций. Например, если `printf` используется функция и параметр **/H5** указан во время компиляции, то для ссылки будет создан символ **_prin** `printf` , который не будет найден в библиотеке.

Использование **/h** несовместимо с [/GL (оптимизация всей программы)](gl-whole-program-optimization.md).

Параметр **/h** является устаревшим, так как Visual Studio 2005; максимальные ограничения длины увеличены, а **/h** больше не требуется. Список устаревших параметров компилятора см. в разделе **устаревшие и удаленные параметры** компилятора в [параметрах компилятора, перечисленных по категориям](compiler-options-listed-by-category.md).

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Выберите страницу свойств **Свойства конфигурации**  >  **C/C++**  >  **Командная строка** .

1. В поле **Дополнительные параметры** введите параметр компилятора.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также раздел

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)
