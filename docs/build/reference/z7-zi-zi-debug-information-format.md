---
title: /Z7, /Zi, /ZI (формат отладочной информации)
ms.date: 07/06/2020
f1_keywords:
- VC.Project.VCCLCompilerTool.DebugInformationFormat
- /ZI
- /Zi
- /Z7
- VC.Project.VCCLWCECompilerTool.DebugInformationFormat
helpviewer_keywords:
- C7 compatible compiler option [C++]
- Debug Information Format compiler option
- ZI compiler option
- -Zi compiler option [C++]
- /ZI compiler option [C++]
- Z7 compiler option [C++]
- debugging [C++], debug information files
- Zi compiler option [C++]
- /Zi compiler option [C++]
- program database compiler option [C++]
- full symbolic debugging information
- /Z7 compiler option [C++]
- line numbers only compiler option [C++]
- cl.exe compiler, debugging options
- -Z7 compiler option [C++]
ms.openlocfilehash: bc3fd9c065219a128e29290084b1e1fb51fc773e
ms.sourcegitcommit: 85d96eeb1ce41d9e1dea947f65ded672e146238b
ms.contentlocale: ru-RU
ms.lasthandoff: 07/07/2020
ms.locfileid: "86058598"
---
# <a name="z7-zi-zi-debug-information-format"></a>/Z7, /Zi, /ZI (формат отладочной информации)

**`/Z7`** **`/Zi`** Параметры компилятора, и **`/ZI`** указывают тип отладочной информации, создаваемой для программы, и сведения о том, хранятся ли эти данные в объектных файлах или в файле базы данных программы (PDB).

## <a name="syntax"></a>Синтаксис

> **`/Z7`**\
> **`/Zi`**\
> **`/ZI`**

## <a name="remarks"></a>Примечания

При указании параметра отладки компилятор создает имена символов для функций и переменных, сведения о типе и расположения строк для использования отладчиком. Эта Символьная отладочная информация может быть включена либо в объектные файлы ( *`.obj`* файлы), созданные компилятором, либо в отдельный PDB-файл ( *`.pdb`* файл) для исполняемого файла. Параметры формата отладочной информации описаны в следующих разделах.

### <a name="none"></a>Отсутствуют

По умолчанию, если не указан параметр формата отладочной информации, компилятор не создает отладочную информацию, поэтому компиляция выполняется быстрее.

### <a name="z7"></a>/Z7

**`/Z7`** Параметр создает объектные файлы, которые также содержат полные символьные отладочные данные для использования с отладчиком. Эти объекты и библиотеки, созданные на основе этих файлов, могут быть значительно больше, чем файлы, не имеющие отладочной информации. Символьная отладочная информация содержит имена и типы переменных, функций и номеров строк. Компилятор не создает PDB-файл. Однако PDB-файл может быть создан из этих файлов или библиотек, если компоновщику передается **`/DEBUG`** параметр.

Для распространителей отладочных версий библиотек сторонних производителей существует преимущество отсутствия PDB-файла. Однако объектные файлы для всех предкомпилированных заголовков необходимы на этапе компоновки библиотеки и для отладки. Если в объектном файле содержится только информация о типе (без кода) *`.pch`* , необходимо также использовать параметр [ `/Yl` (Вставка ссылки на PCH для библиотеки отладки)](yl-inject-pch-reference-for-debug-library.md) , который включен по умолчанию при сборке библиотеки.

Нерекомендуемый параметр [ `/Gm` (включение минимального перестроения)](gm-enable-minimal-rebuild.md) недоступен, если **`/Z7`** указан аргумент.

### <a name="zi"></a>/ZI

**`/Zi`** Параметр создает отдельный PDB-файл, содержащий все символьные отладочные данные для использования с отладчиком. Отладочная информация не включается в объектные файлы или исполняемый файл, что делает их намного меньшей.

Использование параметра **`/Zi`** не влияет на оптимизацию. Однако **`/Zi`** подразумевает **`/debug`** . Дополнительные сведения см. в разделе [ `/DEBUG` (создание отладочной информации)](debug-generate-debug-info.md).

При указании **`/Zi`** и **`/clr`** значения, и <xref:System.Diagnostics.DebuggableAttribute> атрибут не помещается в метаданные сборки. При необходимости его необходимо указать в исходном коде. Этот атрибут может повлиять на производительность приложения во время выполнения. Дополнительные сведения о `Debuggable` влиянии атрибута на производительность и способах изменения влияния на производительность см. в разделе [Упрощение отладки образа](/dotnet/framework/debug-trace-profile/making-an-image-easier-to-debug).

Компилятор именует PDB *`<project>.pdb`* -файл, где *`<project>`* — имя проекта. При компиляции файла за пределами проекта компилятор создает PDB-файл с именем *`VC<x>.pdb`* , где *`<x>`* — это объединение основного и дополнительного номеров версий используемого компилятора. Компилятор внедряет имя PDB и определение подписи метки времени в каждом объектном файле, созданном с помощью этого параметра. Это имя и подпись указывают отладчику на расположение символьной и строковой информации. Имя и подпись в PDB-файле должны соответствовать исполняемому файлу для загрузки символов в отладчике. Отладчик WinDBG может загружать несовпадающие символы с помощью **`.symopt+0x40`** команды. Visual Studio не имеет аналогичного варианта загрузки несовпадающих символов.

При создании библиотеки на основе объектов, которые были скомпилированы с помощью **`/Zi`** , связанный PDB-файл должен быть доступен, если библиотека связана с программой. Это означает, что при распространении библиотеки необходимо также распространить PDB-файл. Чтобы создать библиотеку, содержащую отладочную информацию без использования PDB-файлов, необходимо выбрать **`/Z7`** параметр. При использовании параметров предкомпилированных заголовков отладочная информация как для предкомпилированного заголовка, так и остальной части исходного кода помещается в PDB-файл.

### <a name="zi"></a>/Zi

**`/ZI`** Параметр аналогичен **`/Zi`** , но он создает PDB-файл в формате, поддерживающем функцию " [изменить и продолжить](/visualstudio/debugger/edit-and-continue-visual-cpp) ". Чтобы использовать функции "изменить и продолжить отладку", необходимо использовать этот параметр. Функция "изменить и продолжить" полезна для повышения производительности труда разработчиков, но может вызвать проблемы с размером кода, производительностью и соответствием компилятора. Поскольку большинство оптимизаций несовместимы с параметром "изменить и продолжить", использование **`/ZI`** отключает любые `#pragma optimize` инструкции в коде. **`/ZI`** Параметр также несовместим с использованием [ `__LINE__` предопределенного макроса](../../preprocessor/predefined-macros.md); код, скомпилированный с помощью, **`/ZI`** не может использовать в `__LINE__` качестве аргумента шаблона, который не является типом, хотя `__LINE__` может использоваться в расширениях макросов.

Этот **`/ZI`** параметр приводит к тому, что параметры [ `/Gy` (включить компоновку на уровне функций)](gy-enable-function-level-linking.md) и [ `/FC` (полный путь к файлу исходного кода в диагностике)](fc-full-path-of-source-code-file-in-diagnostics.md) будут использоваться в компиляции.

**`/ZI`** несовместим с [ `/clr` (компиляция среды CLR)](clr-common-language-runtime-compilation.md).

> [!NOTE]
> **`/ZI`** Параметр доступен только в компиляторах, предназначенных для процессоров x86 и x64. Этот параметр компилятора недоступен в компиляторах, предназначенных для процессоров ARM.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Откройте страницу свойств **Свойства конфигурации**  >  **C/C++**  >  **Общие** .

1. Измените свойство **Формат отладочной информации** . Выберите **ОК** для сохранения внесенных изменений.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.DebugInformationFormat%2A>.

## <a name="see-also"></a>См. также

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора MSVC](compiler-command-line-syntax.md)
