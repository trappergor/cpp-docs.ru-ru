---
title: /GENPROFILE, /FASTGENPROFILE (создание инструментированной сборки профилирования)
ms.date: 03/14/2018
f1_keywords:
- GENPROFILE
- FASTGENPROFILE
- /GENPROFILE
- /FASTGENPROFILE
helpviewer_keywords:
- GENPROFILE
- FASTGENPROFILE
ms.assetid: deff5ce7-46f5-448a-b9cd-a7a83a6864c6
ms.openlocfilehash: a0d1678cd400801f4cb809ec3e93d333fbc6416a
ms.sourcegitcommit: 6280a4c629de0f638ebc2edd446de2a9b11f0406
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/12/2020
ms.locfileid: "90041202"
---
# <a name="genprofile-fastgenprofile-generate-profiling-instrumented-build"></a>/GENPROFILE, /FASTGENPROFILE (создание инструментированной сборки профилирования)

Задает создание PGD-файла компоновщиком для поддержки профильной оптимизации (PGO). **/GENPROFILE** и **/FASTGENPROFILE** используют разные параметры по умолчанию. Используйте **/GENPROFILE** , чтобы предпочитать точность по скорости и использованию памяти во время профилирования. Используйте **/FASTGENPROFILE** , чтобы предпочитать меньшее использование памяти и скорость по сравнению с точностью.

## <a name="syntax"></a>Синтаксис

> **/GENPROFILE** \[ **:**{ \[ **COUNTER32** \| **COUNTER64**] \| \[ **точный** \| **неточный**] \| **MEMMAX =** _#_ \| **MEMMIN =** _#_ \| \[ **путь** \| **непуть**] \| \[ **TRACKEH** \| **NOTRACKEH** ] \| **PGD =**_filename_}] \
> **/FASTGENPROFILE** \[ **:**{ \[ **COUNTER32** \| **COUNTER64**] \| \[ **точный** \| **неточный**путь] \| **MEMMAX =** _#_ \| **MEMMIN =** _#_ \| [**путь** \| **непуть** ] \| \[ **TRACKEH** \| **NOTRACKEH** ] \| **PGD =**_filename_}]

### <a name="arguments"></a>Аргументы

Для **/GENPROFILE** или **/FASTGENPROFILE**можно указать любой из следующих аргументов. Перечисленные здесь аргументы, разделенные символом вертикальной черты ( **|** ), являются взаимоисключающими. Для разделения параметров используйте символ запятой (**,**).

**COUNTER32** &#124; **COUNTER64**<br/>
Используйте **COUNTER32** для указания использования 32-разрядных счетчиков зонда и **COUNTER64** для указания 64-разрядных счетчиков зонда. При указании **/GENPROFILE**значение по умолчанию — **COUNTER64**. При указании **/FASTGENPROFILE**значение по умолчанию — **COUNTER32**.

**Точное** &#124; **NOEXACT**<br/>
Используйте параметр **СОВПАД** , чтобы задать потокобезопасные инкрементно заблокированные приращения для зондов. **НЕчеткое** указание незащищенных операций приращения для зондов. Значение по умолчанию — **СОВПАД**.

**MEMMAX** = *значение*, **MEMMIN** = *значение*<br/>
Используйте **MEMMAX** и **MEMMIN** для указания максимального и минимального размера резервирования для обучающих данных в памяти. Значение представляет резервируемый объем памяти в байтах. По умолчанию эти значения определяются внутренней эвристикой.

**Путь** &#124; **NOPATH** пути <br/>
Используйте **путь**  , чтобы указать отдельный набор СЧЕТЧИКов профильной оптимизации для каждого уникального пути к функции. Параметр « **путь**  » используется для указания только одного набора счетчиков для каждой функции. При указании **/GENPROFILE**значение по умолчанию — **path** . При указании **/FASTGENPROFILE**значение по умолчанию — «не **path** ».

**TRACKEH**  &#124; **NOTRACKEH** <br/>
Указывает, следует ли использовать дополнительные счетчики для ведения точного подсчета возникновения исключений во время обучения. Используйте **TRACKEH**  , чтобы указать дополнительные счетчики для точного числа. Используйте **NOTRACKEH**  , чтобы указать отдельные счетчики для кода, который не использует обработку исключений или не сталкивается с исключениями в сценариях обучения.  При указании **/GENPROFILE**значение по умолчанию — **TRACKEH** . При указании **/FASTGENPROFILE**значение по умолчанию — **NOTRACKEH** .

**PGD** = *имя файла*<br/>
Указывает имя базового файла для PGD-файла. По умолчанию компоновщик использует имя базового исполняемого файла образа с расширением PGD.

## <a name="remarks"></a>Комментарии

Параметры **/GENPROFILE** и **/FASTGENPROFILE** указывают компоновщику создать файл инструментирования профилирования, необходимый для поддержки обучения приложений для профильной оптимизации (PGO). Эти варианты являются новыми в Visual Studio 2015. Предпочитать эти параметры нерекомендуемым параметрам **/LTCG: PGINSTRUMENT**, **/PGD** и **/Погосафемоде** и переменным среды **POGOSAFEMODE**, **VCPROFILE_ALLOC_SCALE** и **VCPROFILE_PATH** . Данные профилирования, созданные при обучении приложения, используются как входные данные для выполнения направленной оптимизации всей программы во время построений. Можно задать дополнительные параметры для управления различными функциями профилирования для повышения производительности во время обучения приложений и построений. Параметры по умолчанию, заданные **/GENPROFILE** , обеспечивают наиболее точные результаты, особенно для больших и сложных многопоточных приложений. Параметр **/FASTGENPROFILE** использует различные значения по умолчанию для уменьшения объема памяти и более высокой производительности во время обучения за счет точности.

Данные профилирования фиксируются при запуске инструментированного приложения после сборки с помощью **/GENPROFILE** из **/FASTGENPROFILE**. Эта информация захватывается при указании параметра компоновщика [параметром/useprofile](useprofile.md) для выполнения шага профилирования, а затем используется для указания оптимизированного этапа сборки. Дополнительные сведения о том, как обучить приложение и сведения о собранных данных, см. в статье [Профильная оптимизация](../profile-guided-optimizations.md).

При указании **/GENPROFILE** или **/FASTGENPROFILE**необходимо также указать **/LTCG** .

### <a name="to-set-this-linker-option-in-the-visual-studio-development-environment"></a>Задание данного параметра компоновщика в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Перейдите на **Configuration Properties**  >  **Linker**  >  страницу свойства**командной строки** компоновщика свойств конфигурации.

1. Введите параметры **/GENPROFILE** или **/FASTGENPROFILE** в поле **Дополнительные параметры** . Выберите **ОК** для сохранения внесенных изменений.

### <a name="to-set-this-linker-option-programmatically"></a>Задание данного параметра компоновщика программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCLinkerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также раздел

[Справочник по компоновщику MSVC](linking.md)<br/>
[Параметры компоновщика MSVC](linker-options.md)<br/>
[/LTCG (создание кода во время компоновки)](ltcg-link-time-code-generation.md)<br/>
