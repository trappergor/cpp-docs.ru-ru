---
title: /vd (отключение смещений при выполнении конструктора)
ms.date: 11/04/2016
f1_keywords:
- /vd
helpviewer_keywords:
- -vd0 compiler option [C++]
- vd1 compiler option [C++]
- /vdn (Disable Construction Displacement) compiler option
- constructor displacements
- vtordisp fields
- /vd0 compiler option [C++]
- -vd1 compiler option [C++]
- /vd1 compiler option [C++]
- displacements compiler option
- vd0 compiler option [C++]
- Disable Construction Displacements compiler option
ms.assetid: 93258964-14d7-4b1c-9cbc-d6f4d74eab69
ms.openlocfilehash: df8891cc71dd5a4cfd417969578c0c1b46ae3be3
ms.sourcegitcommit: 1f009ab0f2cc4a177f2d1353d5a38f164612bdb1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 07/27/2020
ms.locfileid: "87223815"
---
# <a name="vd-disable-construction-displacements"></a>/vd (отключение смещений при выполнении конструктора)

## <a name="syntax"></a>Синтаксис

```
/vdn
```

## <a name="arguments"></a>Аргументы

**0**;<br/>
Подавляет элемент смещения конструктора или деструктора vtordisp. Выбирайте этот параметр только в том случае, если вы уверены, что все конструкторы классов и деструкторы вызывают виртуальные функции виртуальными.

**1**<br/>
Включает создание скрытых элементов смещения конструктора или деструктора vtordisp. Этот вариант используется по умолчанию.

**2**<br/>
Позволяет использовать [оператор dynamic_cast](../../cpp/dynamic-cast-operator.md) для создаваемого объекта. Например, dynamic_cast из виртуального базового класса в производный класс.

**/vd2** добавляет поле vtordisp, если у вас есть виртуальная база с виртуальными функциями. **/vd1** должно быть достаточным. Наиболее распространенным случаем, когда требуется **/vd2** , является то, что единственная виртуальная функция в виртуальной базе является деструктором.

## <a name="remarks"></a>Remarks

Эти параметры применяются только к коду C++, использующему виртуальные базовые базы.

Visual C++ реализует поддержку смещения при разработке C++ в ситуациях, когда используется виртуальное наследование. Расстановка конструкций решает проблему, созданную, когда виртуальная функция, объявленная в виртуальной базе данных и переопределенная в производном классе, вызывается из конструктора во время создания следующего производного класса.

Проблема заключается в том, что виртуальной функции может быть передан неверный **`this`** указатель в результате несоответствий между виртуальными основами класса и их производными классами. Решение предоставляет одну корректировку смещения при создании, называемую полем vtordisp, для каждого виртуального базового класса.

По умолчанию поля vtordisp вводятся каждый раз, когда в коде определяются пользовательские конструкторы и деструкторы, а также переопределяются виртуальные функции виртуальных базовых баз.

Эти параметры влияют на все исходные файлы. Используйте [vtordisp](../../preprocessor/vtordisp.md) для подавления и повторного включения полей vtordisp на уровне класса.

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Подробнее см. в статье [Настройка компилятора C++ и свойства сборки в Visual Studio](../working-with-project-properties.md).

1. Откройте папку **C/C++** .

1. Выберите страницу свойств **Командная строка** .

1. Введите параметр компилятора в поле **Дополнительные параметры** .

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.AdditionalOptions%2A>.

## <a name="see-also"></a>См. также статью

[Параметры компилятора MSVC](compiler-options.md)<br/>
[Синтаксис командной строки компилятора КОМПИЛЯТОРОМ MSVC](compiler-command-line-syntax.md)
