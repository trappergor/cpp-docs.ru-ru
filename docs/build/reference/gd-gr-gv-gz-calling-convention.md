---
title: / Gd, / GR, GV, /Gz (соглашение о вызовах) | Документация Майкрософт
ms.custom: ''
ms.date: 09/05/2018
ms.technology:
- cpp-tools
ms.topic: reference
f1_keywords:
- /gr
- /Gv
- /gz
- /Gd
- VC.Project.VCCLCompilerTool.CallingConvention
dev_langs:
- C++
helpviewer_keywords:
- -Gd compiler option [C++]
- -Gv compiler option [C++]
- /Gv compiler option [C++]
- -Gr compiler option [C++]
- Gd compiler option [C++]
- Gr compiler option [C++]
- /Gz compiler option [C++]
- -Gz compiler option [C++]
- /Gd compiler option [C++]
- Gz compiler option [C++]
- Gv compiler option [C++]
- /Gr compiler option [C++]
ms.assetid: fd3110cb-2d77-49f2-99cf-a03f9ead00a3
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: e7e6c1466ecc7bce26eb4dabd816e1733f16ae13
ms.sourcegitcommit: d10a2382832373b900b1780e1190ab104175397f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/06/2018
ms.locfileid: "43895140"
---
# <a name="gd-gr-gv-gz-calling-convention"></a>/Gd, /Gr, /Gv, /Gz (соглашение о вызовах)

Эти параметры определяют порядок, в какие функции аргументы передаются в стек, ли вызывающая или вызываемая функция удаляет аргументы из стека в конце вызова и соглашение об именах, используемое компилятором для идентификации отдельные функции.

## <a name="syntax"></a>Синтаксис

> **/Gd**<br/>
> **/Gr**<br/>
> **/Gv**<br/>
> **/GZ**<br/>

## <a name="remarks"></a>Примечания

**/Gd**, параметр по умолчанию, указывает [__cdecl](../../cpp/cdecl.md) соглашение о вызовах для всех функций за исключением членов C++, функций и функций, помеченных [__stdcall](../../cpp/stdcall.md), [__ fastcall](../../cpp/fastcall.md), или [__vectorcall](../../cpp/vectorcall.md).

**/GR** указывает `__fastcall` соглашение о вызовах для всех функций за исключением функций-членов C++, функций с именем `main`и функций, помеченных `__cdecl`, `__stdcall`, или `__vectorcall`. Все `__fastcall` функции должны иметь прототипы. Это соглашение о вызове доступна только в компиляторах, версией x86 и игнорируется компиляторами, нацеленными на другие архитектуры.

**/GZ** указывает `__stdcall` соглашение о вызовах для всех функций за исключением функций-членов C++, функций с именем `main`и функций, помеченных `__cdecl`, `__fastcall`, или `__vectorcall`. Все `__stdcall` функции должны иметь прототипы. Это соглашение о вызове доступна только в компиляторах, версией x86 и игнорируется компиляторами, нацеленными на другие архитектуры.

**/GV** указывает `__vectorcall` соглашение о вызовах для всех функций за исключением функций-членов C++, функций с именем main, функций с `vararg` переменное число аргументов или функции, помеченные атрибутом конфликтующее `__cdecl`, `__stdcall`, или `__fastcall` атрибута. Это соглашение о вызове доступна только на x86 и x64 архитектурах, поддерживающих/arch: SSE2 и выше и игнорируется компиляторами, нацеленными на архитектуру ARM.

Функции, которые принимают переменное число аргументов должен быть помечен `__cdecl`.

**/Gd**, **/GR**, **/Gv** и **/Gz** не совместимы с [/CLR: safe](../../build/reference/clr-common-language-runtime-compilation.md) или   **/CLR: pure**. **/CLR: pure** и **/CLR: safe** параметры компилятора признаны устаревшими в Visual Studio 2015 и не поддерживается в Visual Studio 2017.

> [!NOTE]
> По умолчанию для x86 процессоров, функций-членов C++ используйте [__thiscall](../../cpp/thiscall.md).

Для всех процессоров функция-член, которая явно помечена как `__cdecl`, `__fastcall`, `__vectorcall`, или `__stdcall` использует указанное соглашение о вызовах, если оно не игнорируется в данной архитектуре. Функция-член, которая принимает переменное число аргументов, всегда использует `__cdecl` соглашение о вызовах.

Эти параметры компилятора не оказывают влияния на именование методов и функций C++. Если объявлена как `extern "C"`, методы и функции C++ используют другую схему именования. Дополнительные сведения см. в разделе [декорированные имена](../../build/reference/decorated-names.md).

Дополнительные сведения о вызовах, см. в разделе [соглашения о вызовах](../../cpp/calling-conventions.md).

## <a name="cdecl-specifics"></a>особенности __cdecl

На x86 процессоров, все аргументы функции передаются в стек справа налево. В ARM и x64 архитектур, некоторые аргументы передаются реестром, и остальные передаются в стек справа налево. Вызывающая функция извлекает аргументы из стека.

Для C `__cdecl` именования использует соглашение о имя функции предшествует символ подчеркивания ( `_` ); изменения регистра не выполняется. Если объявлена как `extern "C"`, функции C++ используют другую схему именования. Дополнительные сведения см. в разделе [декорированные имена](../../build/reference/decorated-names.md).

## <a name="fastcall-specifics"></a>особенности __fastcall

Некоторые из `__fastcall` аргументы функции передаются в регистрах (для x86 процессоров, ECX и EDX), а остальные передаются в стек справа налево. Вызываемая процедура извлекает эти аргументы из стека, перед возвращением. Как правило **/GR** снижает время выполнения.

> [!NOTE]
> Будьте внимательны при использовании `__fastcall` соглашение о вызовах для любой функции, написанной на языке встроенной сборки. Использование регистров могут конфликтовать с использованием компилятором.

Для C `__fastcall` именования использует соглашение о имя функции предшествует знак (**\@**) следуют размер аргументов функции в байтах. Изменения регистра не выполняется. Компилятор использует этот шаблон для соглашения об именовании:

`@function_name@number`

При использовании `__fastcall` соглашение об именовании, используйте стандартных включаемых файлах. В противном случае вы получите неразрешенных внешних ссылок.

## <a name="stdcall-specifics"></a>особенности __stdcall

Объект `__stdcall` аргументы функции передаются в стек справа налево, а вызываемая функция извлекает эти аргументы из стека, перед возвращением.

Для C `__stdcall` именования использует соглашение о имя функции предшествует символ подчеркивания (**\_**) и за которым следует знак (**\@**) и размер функции аргументы в байтах. Преобразование регистра не выполняется. Компилятор использует этот шаблон для соглашения об именовании:

`_functionname@number`

## <a name="vectorcall-specifics"></a>особенности __vectorcall

Объект `__vectorcall` целые аргументы функции передаются по значению, используя до двух (в x86) или четырех (в x64) целое число регистрирует и до шести регистров XMM регистров с плавающей запятой и значения вектора, а остальные передаются в стек справа налево. Вызываемая функция очищает стек перед возвращением. Вектор и возвращаемого значения с плавающей запятой возвращаются в XMM0.

Для C `__vectorcall` соглашение об именовании использует имя функции, за которыми следует два символа (**\@\@**) и размер аргументов функции в байтах. Преобразование регистра не выполняется. Компилятор использует этот шаблон для соглашения об именовании:

`functionname@@number`

### <a name="to-set-this-compiler-option-in-the-visual-studio-development-environment"></a>Установка данного параметра компилятора в среде разработки Visual Studio

1. Откройте диалоговое окно **Страницы свойств** проекта. Дополнительные сведения см. в разделе [Работа со свойствами проекта](../../ide/working-with-project-properties.md).

1. Выберите **C/C++** > **Дополнительно** страницу свойств.

1. Изменить **соглашение о вызовах** свойство.

### <a name="to-set-this-compiler-option-programmatically"></a>Установка данного параметра компилятора программным способом

- См. раздел <xref:Microsoft.VisualStudio.VCProjectEngine.VCCLCompilerTool.CallingConvention%2A>.

## <a name="see-also"></a>См. также

- [Параметры компилятора](../../build/reference/compiler-options.md)
- [Настройка параметров компилятора](../../build/reference/setting-compiler-options.md)
