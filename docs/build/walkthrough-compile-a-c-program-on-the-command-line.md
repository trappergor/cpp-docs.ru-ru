---
title: 'Пошаговое руководство: Компиляция программы на языке C в командной строке | Документация Майкрософт'
ms.custom: conceptual
ms.date: 06/21/2018
ms.technology:
- cpp-tools
ms.topic: conceptual
helpviewer_keywords:
- command-line applications [C++], C programs
- Visual C, compiling
- compiling programs [C++]
- C program compiling [C++]
ms.assetid: 7e74cc2d-54b1-49de-b7ad-d3ae6b39ab8d
author: corob-msft
ms.author: corob
ms.workload:
- cplusplus
ms.openlocfilehash: 3f1390259838302a56e58397afa79fa8c458b939
ms.sourcegitcommit: 92f2fff4ce77387b57a4546de1bd4bd464fb51b6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/17/2018
ms.locfileid: "45710337"
---
# <a name="walkthrough-compile-a-c-program-on-the-command-line"></a>Пошаговое руководство: Компиляция программы на языке C в командной строке

Visual C++ включен компилятор C, можно использовать, позволяющий создавать как простые консольные программы для полного приложения для настольных компьютеров Windows, мобильные приложения и многое другое.

В этом пошаговом руководстве показано, как создать простую, «Hello, World»-в стиле программы на языке C с помощью текстового редактора, а затем скомпилировать его в командной строке. Если работать и в C++ в командной строке, см. в разделе [Пошаговое руководство: Компиляция машинной программы C++ в командной строке](../build/walkthrough-compiling-a-native-cpp-program-on-the-command-line.md). Если вы хотите воспользоваться Visual Studio IDE, а не с помощью командной строки, см. в разделе [Пошаговое руководство: работа с проектами и решениями (C++)](../ide/walkthrough-working-with-projects-and-solutions-cpp.md) или [с помощью Visual Studio IDE для разработки классических приложений C++](../ide/using-the-visual-studio-ide-for-cpp-desktop-development.md).

## <a name="prerequisites"></a>Предварительные требования

Для выполнения этого пошагового руководства, необходимо установить Visual Studio и дополнительных компонентов Visual C++ или Build Tools для Visual Studio.

Visual Studio — мощная интегрированная среда разработки, поддерживающий это полнофункциональный редактор, диспетчеры ресурсов, отладчики и компиляторы для множества языков и платформ. Сведения об этих возможностях и загрузке и установке Visual Studio, включая бесплатный выпуск Visual Studio Community, см. в разделе [установка Visual Studio](/visualstudio/install/install-visual-studio).

Build Tools для Visual Studio версии Visual Studio устанавливает только программ командной строки, компиляторы, средства и библиотеки, необходимые для сборки программ C и C++. Это идеальное средство для построения лабораторий или аудитории проверяет и устанавливает относительно быстро. Чтобы установить только программ командной строки, загрузите [Build Tools для Visual Studio](https://go.microsoft.com/fwlink/p/?linkid=875721) и запустите установщик.

Перед созданием программы C или C++ в командной строке, необходимо убедиться, что они установлены, и что они будут доступны из командной строки. Visual C++ имеет сложные требования к среде командной строки для средства, заголовки и библиотеки, используемые в нем. **Нельзя использовать в простой командной строке Visual C++** без некоторой подготовки. Вам потребуется *Командная строка разработчика* окно, которое является регулярное окно командной строки, имеет все необходимые переменные среды значение. К счастью Visual C++ устанавливает клавиш запускать разработчика командные строки, в которых среда, настроенная для сборок командной строки. К сожалению отличаются имена ярлыки командной строки разработчика и где они находятся, в практически в каждой версии Visual C++ и в разных версиях Windows. Пошаговое руководство первых, для поиска справа ярлык для использования.

> [!NOTE]
> Ярлык командной строки разработчика автоматически задает правильные пути для компилятора и инструментов, а также для любых обязательных заголовков и библиотек. Некоторые из этих значений отличаются для каждой конфигурации сборки. Необходимо задать эти значения среде самостоятельно, если вы не используете один из ярлыков. Дополнительные сведения см. в разделе [задать пути и переменных среды в построении из командной строки](../build/setting-the-path-and-environment-variables-for-command-line-builds.md). Так как в среде сборки является сложным, настоятельно рекомендуется использовать ярлык командной строки разработчика вместо создания собственного.

## <a name="open-a-developer-command-prompt"></a>Откройте командную строку разработчика

1. Если вы установили Visual Studio 2017 в Windows 10, откройте меню «Пуск» и затем прокрутите экран вниз и откройте **Visual Studio 2017** папку (не приложение Visual Studio 2017). Выберите **Командная строка разработчика для VS 2017** чтобы открыть окно командной строки.

   Если вы установили Microsoft Visual C++ Build Tools 2015 в Windows 10, откройте **запустить** меню, а затем прокрутите вниз и откройте **Visual C++ Build Tools** папки. Выберите **Командная строка Native Tools Visual C++ 2015 x86** чтобы открыть окно командной строки.

   Если вы используете другую версию Visual Studio или управлением другой версии Windows, искать в меню «Пуск» или с начальной страницы для папки средств Visual Studio, содержащий ярлык командной строки разработчика. Можно также использовать функцию поиска Windows для поиска «Командная строка разработчика» и выберите ту, которая соответствует установленной версии Visual Studio. Используйте сочетание, чтобы открыть окно командной строки.

2. Затем проверьте правильность настройки командной строки разработчика Visual C++. В окне командной строки введите `cl` и убедитесь, что выходные данные выглядят примерно следующим образом:

   ```Output
   C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>cl
   Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86
   Copyright (C) Microsoft Corporation.  All rights reserved.

   usage: cl [ option... ] filename... [ /link linkoption... ]

   C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise>
   ```

   Возможно, различия в текущем каталоге или номера версий, в зависимости от версии Visual C++ и никаких установленных обновлений. Если это похоже на то, что вы видите, затем все готово для создания программы C или C++ в командной строке.

   > [!NOTE]
   > Если отобразится сообщение об ошибке, например ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл,» ошибка C1034 или LNK1104 при запуске **cl** команды, а затем либо вы не используете командную строку разработчика или что-то проблемы с вашей установкой Visual C++. Необходимо устранить эту проблему, перед тем как продолжить.

   Если разработчик не может найти ярлык командной строки, или если вы получаете сообщение об ошибке при вводе `cl`, а затем установки Visual C++ может вызвать проблемы. Если вы используете Visual Studio 2017, попробуйте переустановить **разработка классических приложений C++** рабочей нагрузки в установщике Visual Studio. Дополнительные сведения см. в разделе [Установка поддержки C++ в Visual Studio](../build/vscpp-step-0-installation.md). Или переустановите [Build Tools для Visual Studio](https://go.microsoft.com/fwlink/p/?linkid=875721). Не переходите к следующему разделу пока это работает. Дополнительные сведения об установке и устранении неполадок Visual Studio см. в разделе [установка Visual Studio](/visualstudio/install/install-visual-studio).

   > [!NOTE]
   > В зависимости от версии Windows на компьютере и конфигурации системы безопасности, возможно, щелкните правой кнопкой мыши, чтобы открыть контекстное меню для ярлык командной строки разработчика, а затем выберите **Запуск от имени администратора** для успешно Постройте и запустите программу, созданные с помощью описанной в этом пошаговом руководстве.

## <a name="create-a-c-source-file-and-compile-it-on-the-command-line"></a>Создание исходного файла C и его компиляция в командной строке

1. В окне командной строки разработчика введите **компакт-диска c:\\**  для изменения текущего рабочего каталога в корень диска C:. Затем введите **md c:\simple** для создания каталога, а затем введите **c:\simple компакт-диска** для изменения в этот каталог. Это каталог, который будет содержать исходный файл и скомпилированная программа.

2. Введите **simple.c Блокнот** в командной строке разработчика. В диалоговом окне предупреждения Блокнот, возникающего, выберите **Да** для создания нового файла simple.c в рабочем каталоге.

3. В Блокноте введите следующие строки кода:

    ```C
    #include <stdio.h>

    int main()
    {
        printf("Hello, World! This is a native C program compiled on the command line.\n");
        return 0;
    }
    ```

4. В строке меню Блокнота выберите **файл**, **Сохранить** сохранить simple.c в рабочем каталоге.

5. Переключитесь в окно командной строки разработчика. Введите **dir** в командной строке, чтобы вывести список содержимого каталога c:\simple. Вы должны увидеть simple.c файл источника в списке каталога, который выглядит примерно следующим образом:

    ```Output
    C:\simple>dir
     Volume in drive C has no label.
     Volume Serial Number is CC62-6545

     Directory of C:\simple

    10/02/2017  03:46 PM    <DIR>          .
    10/02/2017  03:46 PM    <DIR>          ..
    10/02/2017  03:36 PM               143 simple.c
                   1 File(s)            143 bytes
                   2 Dir(s)  514,900,566,016 bytes free

    ```

   Даты и другие сведения будут отличаться на вашем компьютере. Если вы не видите файла исходного кода, simple.c, убедитесь, что вы открыли созданный каталог c:\simple и в блокноте, убедитесь, что вы сохранили файл источника, в этом каталоге. Также убедитесь, что исходный код сохранен с расширением имени файла .c, не с расширением txt.

6. Чтобы скомпилировать свою программу, введите **cl simple.c** в командной строке разработчика.

   Вы увидите имя исполняемого файла, simple.exe в строках информации, компилятор выводимой:

    ```Output
    c:\simple>cl simple.c
    Microsoft (R) C/C++ Optimizing Compiler Version 19.10.25017 for x86
    Copyright (C) Microsoft Corporation.  All rights reserved.

    simple.c
    Microsoft (R) Incremental Linker Version 14.10.25017.0
    Copyright (C) Microsoft Corporation.  All rights reserved.

    /out:simple.exe
    simple.obj
    ```

   > [!NOTE]
   > Если отобразится сообщение об ошибке, например ««cl» не распознается как внутренняя или внешняя команда, исполняемая программа или пакетный файл,» ошибка C1034 или LNK1104, командной строке разработчика не настроено правильно. Сведения о том, как устранить эту проблему, вернитесь к **откройте командную строку разработчика** раздел.

   > [!NOTE]
   > Если вы получаете компилятора или компоновщика ошибки или предупреждения, просмотрите исходный код, чтобы исправить ошибки, а затем сохраните его и снова запустите компилятор. Сведения о конкретных ошибках используйте поле поиска в верхней части этой страницы для поиска номер ошибки.

7. Чтобы запустить программу, введите **простой** в командной строке.

   Программа выводит следующий текст и затем закрывается:

    ```Output
    Hello, World! This is a native C program compiled on the command line.
    ```

   Поздравляем, вы просто компиляции и запуска программы на языке C с помощью командной строки.

## <a name="next-steps"></a>Следующие шаги

В этом примере «Hello, World» примерно так же просто, как можно получить в программе на языке C. Реальные программы имеют файлы заголовков и другие исходные файлы, компоновку в библиотеках и выполните полезную работу.

Шаги в этом пошаговом руководстве можно использовать для создания собственного кода C, вместо того чтобы вводить следующий образец кода. Также можно создавать много C примеры программ, обнаруженные в другом месте. Чтобы скомпилировать программу, которая имеет несколько файлов исходного кода, введите их все в командной строке, следующим образом:

`cl file1.c file2.c file3.c`

Компилятор выводит программу под названием file1.exe. Чтобы изменить имя на program1.exe, добавьте [/out](../build/reference/out-output-file-name.md) параметр компоновщика:

`cl file1.c file2.c file3.c /link /out:program1.exe`

Для автоматического перехвата дополнительные ошибки программирования, мы рекомендуем компиляции с помощью [/W3](../build/reference/compiler-option-warning-level.md) или [/W4](../build/reference/compiler-option-warning-level.md) порога предупреждений:

`cl /W4 file1.c file2.c file3.c /link /out:program1.exe`

Компилятор, cl.exe, предоставляет больше возможностей можно применить можно создавать, оптимизировать, отладка и анализ кода. Краткий список, введите **cl /?** в командной строке разработчика. Также можно скомпилировать и компоновка выполняются отдельно и применить параметры компоновщика в более сложных сценариях сборки. Дополнительные сведения о компилятора и параметры компоновщика, а также использования, см. в разделе [ссылка на построение C/C++](../build/reference/c-cpp-building-reference.md).

NMAKE и файлы makefile или файлы проекта MSBuild можно использовать для настройки и создания более сложных проектов в командной строке. Дополнительные сведения об использовании этих средств см. в разделе [справочнике NMAKE](../build/nmake-reference.md) и [MSBuild](../build/msbuild-visual-cpp.md).

В языках C и C++ похожи, но не совпадают. Компилятор Visual C++ использует простое правило, чтобы определить, какой язык следует использовать при компиляции кода. По умолчанию компилятор Visual C++ рассматривает все файлы с расширением .c как исходные файлы на языке С, а файлы с расширением .cpp как исходные файлы на языке С++. Чтобы заставить компилятор считать все файлы C независимо от того, расширение имени файла, используйте [/Tc](../build/reference/tc-tp-tc-tp-specify-source-file-type.md) параметр компилятора.

Компилятор Visual C++ C, как правило, совместимые со стандартом ISO C99, но не строго соответствует. В большинстве случаев переносимого кода C будет Скомпилируйте и запустите должным образом. Visual C++ не поддерживает большинство изменений в ISO C11. Некоторые функции библиотеки и имена функций POSIX устарели компилятором Visual C++. Функции поддерживаются, но предпочтительные имена были изменены. Дополнительные сведения см. в разделе [функции безопасности в CRT](../c-runtime-library/security-features-in-the-crt.md) и [Предупреждение компилятора (уровень 3) C4996](../error-messages/compiler-warnings/compiler-warning-level-3-c4996.md).

## <a name="see-also"></a>См. также

[Пошаговое руководство: Создание стандартной программы C++ (C++)](../windows/walkthrough-creating-a-standard-cpp-program-cpp.md)
[Справочник по языку C](../c-language/c-language-reference.md)<br/>
[Сборка программ C/C++](../build/building-c-cpp-programs.md)<br/>
[Совместимость](../c-runtime-library/compatibility.md)
