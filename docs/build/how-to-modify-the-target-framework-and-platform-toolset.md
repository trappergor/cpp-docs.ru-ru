---
title: Практическое руководство. Изменение требуемой версии платформы и набора средств платформы
ms.custom: conceptual
ms.date: 07/24/2019
helpviewer_keywords:
- 'msbuild (c++), howto: modify target framework and platform toolset'
ms.assetid: 031b1d54-e6e1-4da7-9868-3e75a87d9ffe
ms.openlocfilehash: c5e7172fea06f6b455422fb023a0b6462b5c4103
ms.sourcegitcommit: e5192a25c084eda9eabfa37626f3274507e026b3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 11/12/2019
ms.locfileid: "73964905"
---
# <a name="how-to-modify-the-target-framework-and-platform-toolset"></a>Практическое руководство. Изменение требуемой версии платформы и набора средств платформы

Файл проекта Visual Studio C++ можно изменить, чтобы указать другие версии набора инструментов платформы C++, Windows SDK и .NET Framework (только для проектов C++/CLI). По умолчанию система проектов использует версию платформы .NET Framework и версию набора инструментов, соответствующие версии Visual Studio, используемой для создания проекта. Все эти значения можно изменить в файле VCXPROJ, чтобы использовать одну и ту же базу кода для каждого целевого объекта компиляции.

## <a name="platform-toolset"></a>Набор инструментов платформы

Набор инструментов платформы состоит из компилятора C++ (cl.exe) и компоновщика (link.exe) вместе со стандартными библиотеками C/C++. Начиная с Visual Studio 2015 основной версией набора инструментов оставалась версия 14. Это означает, что проекты, скомпилированные с помощью Visual Studio 2019 или Visual Studio 2017, на уровне ABI обладают обратной совместимостью с проектами, скомпилированными с помощью Visual Studio 2015. Дополнительный номер версии обновляется на 1 для каждой версии с выпуска Visual Studio 2015:

- Visual Studio 2015: v140
- Visual Studio 2017: v141
- Visual Studio 2019: v142

Эти наборы инструментов поддерживают .NET Framework 4.5 и более поздних версий.

Visual Studio также поддерживает настройку для различных версий для проектов C++. Вы можете использовать интегрированную среду разработки Visual Studio для редактирования и сборки проектов, созданных с помощью более ранних версий Visual Studio, не обновляя их для использования новой версии набора инструментов. На компьютере должны быть установлены более ранние версии наборов инструментов. Дополнительные сведения см. в разделе [Использование собственной настройки для использования различных версий в Visual Studio](../porting/use-native-multi-targeting.md). Например, в Visual Studio 2015 можно *выбрать* .NET Framework 2.0, но необходимо использовать более раннюю версию набора инструментов, поддерживающую его.

## <a name="target-framework-ccli-project-only"></a>Целевая платформа (только для проектов C++/CLI)

При изменении целевой версии платформы одновременно изменяется набор инструментов платформы для обеспечения поддержки этой версии. Например, для поддержки версии .NET Framework 4.5 необходимо использовать совместимый набор средств платформы, например Visual Studio 2015 (версия 140), Visual Studio 2013 (версия 120) или Visual Studio 2012 (версия 110). Можно использовать набор инструментов платформы [Windows 7.1 SDK](https://www.microsoft.com/download/details.aspx?id=8279) для работы с .NET Framework 2.0, 3.0, 3.5 и 4, а также платформами x86/x64.

Создавая пользовательские наборы инструментов платформы, можно расширить поддержку целевой платформы. Дополнительные сведения см. в блоге по Visual C++ [Нативное многоплатформенное нацеливание в C++](https://devblogs.microsoft.com/cppblog/c-native-multi-targeting/) .

### <a name="to-change-the-target-framework"></a>Изменение требуемой версии .NET Framework

1. В **обозревателе решений**Visual Studio выберите проект. В строке меню откройте меню **Проект** и выберите **Выгрузить проект**. Это разгружает файл проекта (VCXPROJ) для вашего проекта.

   > [!NOTE]
   >  Проект на языке C++ невозможно загрузить, пока в файл проекта вносятся изменения в Visual Studio. Однако можно использовать другой редактор, например блокнот, чтобы изменить файл проекта, пока проект загружен в Visual Studio. Visual Studio определяет, что файл проекта был изменен и отображает запрос о необходимости перезагрузить проект.

1. В строке меню последовательно выберите **Файл**, **Открыть**, **Файл**. В диалоговом окне **Открыть файл** перейдите к папке проекта и откройте файл проекта (с расширением VCXPROJ).

1. В файле проекта найдите запись для требуемой версии платформы. Например, если проект ориентирован на платформу .NET Framework 4.5, найдите запись `<TargetFrameworkVersion>v4.5</TargetFrameworkVersion>` в элементе `<PropertyGroup Label="Globals">` элемента `<Project>` . Если элемент `<TargetFrameworkVersion>` отсутствует, проект не использует платформу .NET Framework и изменений не требуется.

1. Измените значение на требуемую версию .NET Framework, например 3.5 или 4.6.

1. Сохраните изменения и закройте редактор.

1. В разделе **Обозреватель решений**откройте контекстное меню своего проекта и выберите **Перезагрузить проект**.

1. Чтобы проверить изменение, в **обозревателе решений**щелкните правой кнопкой мыши проект, чтобы открыть его контекстное меню (а не решения) и выберите **Свойства** , чтобы открыть диалоговое окно проекта **Страницы свойств** . В левой области диалогового окна разверните узел **Свойства конфигурации** и выберите **Общие**. Убедитесь, что в области **Целевая версия платформы .NET Framework** отображается новая версия платформы .NET Framework.

### <a name="to-change-the-platform-toolset"></a>Изменение набора инструментов платформы

1. В **Обозревателе решений**Visual Studio откройте контекстное меню проекта (не решения) и выберите **Свойства** , чтобы открыть диалоговое окно проекта **Страницы свойств** .

1. В диалоговом окне **Страницы свойств** откройте папку **Конфигурация** и выберите **Все конфигурации**.

1. В левой области диалогового окна разверните узел **Свойства конфигурации** и выберите **Общие**.

1. В правой области щелкните элемент **Набор инструментов платформы** и выберите необходимый набор инструментов из раскрывающегося списка. Например, если вы установили набор инструментов Visual Studio 2010, выберите **Visual Studio 2010 (v100)** для использования в проекте.

1. Нажмите кнопку **ОК** .

## <a name="see-also"></a>См. также

[MSBuild в командной строке — C++](msbuild-visual-cpp.md)
