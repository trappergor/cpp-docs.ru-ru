---
title: Схемы (классов ATL) сообщений | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-atl
ms.topic: reference
dev_langs:
- C++
helpviewer_keywords:
- message maps, ATL
- ATL, message handlers
ms.assetid: 9e100400-65c7-4a85-8857-4e6cb6dd7340
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: b36ed5fc339fb49c7e58541465f2433804821fdb
ms.sourcegitcommit: 92dbc4b9bf82fda96da80846c9cfcdba524035af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/05/2018
ms.locfileid: "43762802"
---
# <a name="message-maps-atl"></a>Схемы сообщений (ATL)

Виртуальной схемы сообщений связывает функцию обработчика событий с конкретным сообщением, команды или уведомлений. С помощью библиотеки ATL [макросы схемы сообщений](../atl/reference/message-map-macros-atl.md), можно указать схему сообщений для окна. Процедуры окна в `CWindowImpl`, `CDialogImpl`, и `CContainedWindowT` направления сообщений окна схему сообщений.

[Сообщений функции обработчика](../atl/message-handler-functions.md) принимать дополнительный аргумент типа `BOOL&`. Этот аргумент указывает ли сообщение было обработано, и ему присваивается значение TRUE по умолчанию. Функция-обработчик может аргументе значение false, чтобы указать, что он не обработал сообщение. В этом случае ATL будут продолжать искать функцию обработчика событий, Дополнительно в схеме сообщений. Установив этот аргумент в значение FALSE, можно сначала выполнить какие-либо действия в ответ на сообщение и разрешить обработку по умолчанию или другую функцию обработчика для завершения обработки сообщения.

## <a name="chained-message-maps"></a>Схемы сообщений в цепочке

ATL также позволяет схемы сообщений в цепочке, который направляет вывод сообщения, обработка на карту сообщение, определенное в другом классе. Например можно реализовать распространенные обработку сообщений в отдельном классе для предоставления единообразное поведение для всех окон, цепочки для этого класса. Можно объединять в цепочку к базовому классу или элементу данных класса.

ATL также поддерживает динамическое создание цепочек, что позволяет создать цепочку схему сообщений другим объектом во время выполнения. Для реализации динамической цепочки, должен быть производным от класса [CDynamicChain](../atl/reference/cdynamicchain-class.md). Затем объявите [CHAIN_MSG_MAP_DYNAMIC](reference/message-map-macros-atl.md#chain_msg_map_dynamic) макрос в схему сообщения. CHAIN_MSG_MAP_DYNAMIC требуется уникальный номер, определяющий объект и схему сообщений, к которому начинается. Необходимо определить это уникальное значение путем вызова `CDynamicChain::SetChainEntry`.

Можно объединять в цепочку для любого класса, который объявляет схему сообщений, если класс является производным от [CMessageMap](../atl/reference/cmessagemap-class.md). `CMessageMap` позволяет объекту предоставлять его схемы сообщений к другим объектам. Обратите внимание, что `CWindowImpl` уже является производным от `CMessageMap`.

## <a name="alternate-message-maps"></a>Схемы альтернативный сообщений

Наконец, ATL поддерживает сопоставления альтернативное сообщение, объявленных с [ALT_MSG_MAP](reference/message-map-macros-atl.md#alt_msg_map) макрос. Каждая карта альтернативное сообщение идентифицируется уникальный номер, который передается ALT_MSG_MAP. С помощью альтернативных карт, может обрабатывать сообщения несколько окон в одной карте. Обратите внимание, что по умолчанию `CWindowImpl` не использует схемы альтернативный сообщений. Чтобы добавить эту поддержку, переопределите `WindowProc` метод в вашей `CWindowImpl`-производного класса, а также вызов `ProcessWindowMessage` с карты идентификатор сообщения.

## <a name="see-also"></a>См. также

[Реализация окна](../atl/implementing-a-window.md)

