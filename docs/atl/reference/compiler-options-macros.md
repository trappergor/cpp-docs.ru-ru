---
title: Макросы для параметров компилятора | Документация Майкрософт
ms.custom: ''
ms.date: 11/04/2016
ms.technology:
- cpp-atl
ms.topic: reference
dev_langs:
- C++
f1_keywords:
- _ATL_ALL_WARNINGS
- _ATL_APARTMENT_THREADED
- '_ATL_CSTRING_EXPLICIT_CONSTRUCTORS '
- _ATL_ENABLE_PTM_WARNING
- _ATL_FREE_THREADED
- _ATL_MULTI_THREADED
- _ATL_NO_AUTOMATIC_NAMESPACE
- _ATL_NO_COM_SUPPORT
- ATL_NO_VTABLE
- ATL_NOINLINE
- _ATL_SINGLE_THREADED
helpviewer_keywords:
- compiler options, macros
ms.assetid: a869adc6-b3de-4299-b040-9ae20b45f82c
author: mikeblome
ms.author: mblome
ms.workload:
- cplusplus
ms.openlocfilehash: 63fa47f4237d27cb8e0d5629e2041244ab360132
ms.sourcegitcommit: 913c3bf23937b64b90ac05181fdff3df947d9f1c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/18/2018
ms.locfileid: "46075102"
---
# <a name="compiler-options-macros"></a>Макросы для параметров компилятора

Эти макросы управления функциями определенный компилятор.

|||
|-|-|
|[_ATL_ALL_WARNINGS](#_atl_all_warnings)|Символ, который включает ошибки в проектах, преобразованные из предыдущих версий ATL.|
|[_ATL_APARTMENT_THREADED](#_atl_apartment_threaded)|Определите, если один или несколько объектов использовать потоковое.|
|[_ATL_CSTRING_EXPLICIT_CONSTRUCTORS](#_atl_cstring_explicit_constructors)|Гарантирует `CString` конструкторы, explicit, предотвращая все непреднамеренного преобразования.|
|[ТАКЖЕ БИБЛИОТЕКАХ](#_atl_enable_ptm_warning)|Задать этот макрос, чтобы использовать C++ standard совместимый синтаксис, который создает ошибку компилятора C4867, когда не стандартный синтаксис, используемый для инициализации указателя на функцию-член.|
|[_ATL_FREE_THREADED](#_atl_free_threaded)|Определите, если один или несколько объектов используйте бесплатную или нейтральным работа с потоками.|
|[_ATL_MULTI_THREADED](#_atl_multi_threaded)|Символ, указывающий проект будет иметь объектов, помеченных как, бесплатный "или" Neutral. Макрос [_ATL_FREE_THREADED](#_atl_free_threaded) должны использоваться вместо нее.|
|[_ATL_NO_AUTOMATIC_NAMESPACE](#_atl_no_automatic_namespace)|Символ, который не позволяет использовать по умолчанию пространство имен в качестве ATL.|
|[_ATL_NO_COM_SUPPORT](#_atl_no_com_support)|Символ, предотвращающий код, связанный с COM, компилируемого с проекта.|
|[ATL_NO_VTABLE](#atl_no_vtable)|Символ, который предотвращает инициализацию в конструктор и деструктор класса указателя vtable.|
|[ATL_NOINLINE](#atl_noinline)|Символ, указывающий функцию, не должен выполняться как встроенный.|
|[_ATL_SINGLE_THREADED](#_atl_single_threaded)|Определите, если все объекты использовать один потоковой модели.|

##  <a name="_atl_all_warnings"></a>  _ATL_ALL_WARNINGS

Символ, который включает ошибки в проектах, преобразованные из предыдущих версий ATL.

```
#define _ATL_ALL_WARNINGS
```

### <a name="remarks"></a>Примечания

До Visual C++ .NET 2002 ATL массу предупреждения отключены и они отключены, чтобы никогда не отображаются в пользовательском коде. В частности:

- C4127 условное выражение является константой

- C4786 «идентификатор»: идентификатор усечен до «число» знаков в отладочной информации

- Использовано нестандартное расширение C4201: безымянные структуры или объединения

- C4103 «имя_файла»: можно изменять выравнивание #pragma pack

- C4291 «объявление»: не обнаружен; соответствующий оператор delete память не должна освобождаться при возникновении исключения инициализации

- C4268 «идентификатор»: «const»-статическое или глобальное данные, инициализированные конструктором по умолчанию, созданный компилятором заполняет объект нулями

- C4702 недостижимый код

В проектах, преобразованные из предыдущих версий эти предупреждения отключены по-прежнему заголовками, библиотеками.

Это поведение можно изменить, добавив следующую строку в файл stdafx.h до включения заголовков библиотек.

[!code-cpp[NVC_ATL_Utilities#97](../../atl/codesnippet/cpp/compiler-options-macros_1.h)]

Если этот `#define` добавляется, заголовков ATL. осторожность, чтобы сохранить состояние этих предупреждений, таким образом, чтобы они не отключены глобально (или если пользователь явно отключает отдельные предупреждения, не позволяя им).

Новые проекты имеют это `#define` по умолчанию значение в файле stdafx.h.

##  <a name="_atl_apartment_threaded"></a>  _ATL_APARTMENT_THREADED

Определите, если один или несколько объектов использовать потоковое.

```
_ATL_APARTMENT_THREADED
```

### <a name="remarks"></a>Примечания

Указывает потоковое. См. в разделе [указание потоковой модели проекта](../../atl/specifying-the-threading-model-for-a-project-atl.md) для других потоков параметры "," и [параметры, мастер простых объектов ATL](../../atl/reference/options-atl-simple-object-wizard.md) threading описание модели, доступные для объекта ATL.

##  <a name="_atl_cstring_explicit_constructors"></a>  _ATL_CSTRING_EXPLICIT_CONSTRUCTORS

Гарантирует `CString` конструкторы, explicit, предотвращая все непреднамеренного преобразования.

```
_ATL_CSTRING_EXPLICIT_CONSTRUCTORS
```

### <a name="remarks"></a>Примечания

Если оно определено, все конструкторы CString, которые принимают один параметр компилируются с явно указанным ключевым словом, который запрещает неявные преобразования входных аргументов. Это означает, например, что если определяется _UNICODE, если вы попытаетесь использовать char * строку в качестве аргумента конструктора CString, приведет к ошибке компилятора. Используйте этот макрос в ситуациях, когда нужно предотвратить неявные преобразования между типами узким и широким строковым.

С помощью макрос _T на все строковые аргументы конструктора, можно определить _ATL_CSTRING_EXPLICIT_CONSTRUCTORS и избежать ошибок компиляции, независимо от того, определен ли _UNICODE.

##  <a name="_atl_enable_ptm_warning"></a>  ТАКЖЕ БИБЛИОТЕКАХ

Задать этот макрос, чтобы принудительно использовать синтаксис стандартные, совместимые с ANSI C++ для указателей на функции-члены. Использование этого макроса вызовет ошибку компилятора C4867 стеком нестандартный синтаксис используется для инициализации указателя на функцию-член.

```
#define _ATL_ENABLE_PTM_WARNING
```

### <a name="remarks"></a>Примечания

Библиотеки ATL и MFC были изменены в соответствии с улучшенные C++ соответствие стандартам компилятора Visual C++. В соответствии со стандартом ANSI C++, синтаксис указателя на функцию-член класса должен быть `&CMyClass::MyFunc`.

Когда [также библиотеках](#_atl_enable_ptm_warning) не определен (вариант по умолчанию), ATL и MFC отключает ошибка C4867 в maps макрос (схемы очередь сообщений), так что код, который был создан в более ранних версий можно продолжать выполнять построение как и раньше. Если вы определяете **также библиотеках**, код должен быть соответствует стандарту C++.

Тем не менее нестандартные формы является устаревшим, поэтому вам нужно переместить существующий код C++ стандартный синтаксис, несовместимый. Например следующий код:

[!code-cpp[NVC_MFCListView#14](../../atl/reference/codesnippet/cpp/compiler-options-macros_2.cpp)]

Следует изменить на:

[!code-cpp[NVC_MFCListView#11](../../atl/reference/codesnippet/cpp/compiler-options-macros_3.cpp)]

Обратите внимание на то, что карты макросов, добавьте символ «&», не следует добавлять его снова в коде.

##  <a name="_atl_free_threaded"></a>  _ATL_FREE_THREADED

Определите, если один или несколько объектов используйте бесплатную или нейтральным работа с потоками.

```
_ATL_FREE_THREADED
```

### <a name="remarks"></a>Примечания

Указывает свободной потоковой модели. Свободной потоковой модели соответствует модели многопотокового подразделения. См. в разделе [указание потоковой модели проекта](../../atl/specifying-the-threading-model-for-a-project-atl.md) для других потоков параметры "," и [параметры, мастер простых объектов ATL](../../atl/reference/options-atl-simple-object-wizard.md) threading описание модели, доступные для объекта ATL.

##  <a name="_atl_multi_threaded"></a>  _ATL_MULTI_THREADED

Символ, указывающий проект будет иметь объектов, помеченных как, бесплатный "или" Neutral.

```
_ATL_MULTI_THREADED
```

### <a name="remarks"></a>Примечания

Если этот символ определен, ATL извлечет в коде, который будет правильно синхронизировать доступ к глобальных данных. Новый код нужно использовать эквивалентное макрос [_ATL_FREE_THREADED](#_atl_free_threaded) вместо этого.

##  <a name="_atl_no_automatic_namespace"></a>  _ATL_NO_AUTOMATIC_NAMESPACE

Символ, который не позволяет использовать по умолчанию пространство имен в качестве ATL.

```
_ATL_NO_AUTOMATIC_NAMESPACE
```

### <a name="remarks"></a>Примечания

Если этот символ не определен, включая atlbase.h выполнит **с использованием пространства имен ATL** по умолчанию, что может вызвать конфликты имен. Чтобы избежать этого, определите этот символ.

##  <a name="_atl_no_com_support"></a>  _ATL_NO_COM_SUPPORT

Символ, предотвращающий код, связанный с COM, компилируемого с проекта.

```
_ATL_NO_COM_SUPPORT
```

##  <a name="atl_no_vtable"></a>  ATL_NO_VTABLE

Символ, который предотвращает инициализацию в конструктор и деструктор класса указателя vtable.

```
ATL_NO_VTABLE
```

### <a name="remarks"></a>Примечания

Если указатель vtable запрещена, инициализируемый в классе конструктор и деструктор, компоновщик можно исключить таблицы vtable и все функции, на которые он указывает. При развертывании **__declspec(novtable)**.

### <a name="example"></a>Пример

[!code-cpp[NVC_ATL_COM#53](../../atl/codesnippet/cpp/compiler-options-macros_4.h)]

##  <a name="atl_noinline"></a>  ATL_NOINLINE

Символ, указывающий функцию, не должен выполняться как встроенный.

```
    ATL_NOINLINE inline
    myfunction()
    {
    ...
    }
```

### <a name="parameters"></a>Параметры

*MyFunction*<br/>
Функция, которая не должен выполняться как встроенный.

### <a name="remarks"></a>Примечания

Используйте этот символ, если вы хотите убедиться, что функция встраиваются компилятором, несмотря на то, что он должен быть объявлен как встроенное, чтобы его можно поместить в файле заголовка. При развертывании **__declspec(noinline)**.

##  <a name="_atl_single_threaded"></a>  _ATL_SINGLE_THREADED

Определить, если все объекты использовать один потоковой модели

```
_ATL_SINGLE_THREADED
```

### <a name="remarks"></a>Примечания

Указывает, что объект всегда работает в основном потоке COM. См. в разделе [указание потоковой модели проекта](../../atl/specifying-the-threading-model-for-a-project-atl.md) для других потоков параметры "," и [параметры, мастер простых объектов ATL](../../atl/reference/options-atl-simple-object-wizard.md) threading описание модели, доступные для объекта ATL.

## <a name="see-also"></a>См. также

[Макросы](../../atl/reference/atl-macros.md)
