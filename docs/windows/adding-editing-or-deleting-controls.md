---
title: Как добавлять, изменять и удалять элементы управления (C++)
ms.date: 02/15/2019
f1_keywords:
- vc.controls.activex
- vc.editors.dialog.insertActiveXControls
helpviewer_keywords:
- Dialog Editor [C++], creating controls
- dialog boxes [C++], adding controls to
- Toolbox [C++], Dialog Editor tab
- controls [C++], types
- syslink controls in dialog boxes
- custom controls [C++], dialog boxes
- controls [C++], standard
- Dialog Editor [C++], creating controls
- controls [C++], adding to dialog boxes
- controls [C++], adding multiple
- dialog box controls [C++], size
- controls [C++], sizing
- dialog boxes [C++], adding ActiveX controls
- ActiveX controls [C++], adding to dialog boxes
- Insert ActiveX Control dialog box [C++]
- controls [C++], editing properties
- ActiveX controls [C++], properties
- controls [C++], undoing changes
- controls [C++], editing properties
- dialog box controls [C++], editing properties
- dialog box controls [C++], deleting
- controls [C++], deleting
- Dialog Editor [C++], default control events
- controls [C++], default control events
- events [C++], controls
- dialog box controls [C++], events
- member variables, defining for controls
- variables, dialog box control member variables
- controls [C++], member variables
- Dialog Editor [C++], defining member variables for controls
- controls [C++], troubleshooting
- Dialog Editor [C++], troubleshooting
- dialog boxes [C++], troubleshooting
- InitCommonControls
- RichEdit 1.0 control
- rich edit controls [C++], RichEdit 1.0
ms.assetid: 73cef03f-5c8c-456a-87d1-1458dff185cf
ms.openlocfilehash: 90e4eb659de6d1d5ed1488365f6637de2d537e57
ms.sourcegitcommit: ec6dd97ef3d10b44e0fedaa8e53f41696f49ac7b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 08/25/2020
ms.locfileid: "88831688"
---
# <a name="how-to-add-edit-or-delete-controls-c"></a>Как добавлять, изменять и удалять элементы управления (C++)

С помощью **редактора диалоговых**окон можно добавлять, изменять размер, редактировать и удалять элементы управления в диалоговых окнах. Можно также изменить свойства элемента управления, например его идентификатор, или же он должен быть изначально видим во время выполнения.

Вкладка **Редактор диалоговых окон** отображается в [окне Панель элементов](/visualstudio/ide/reference/toolbox) при работе в **редакторе диалоговых окон**. Можно также настроить окно **панели элементов** для упрощения использования. Дополнительные сведения см. в разделе [Использование панели элементов](/visualstudio/ide/using-the-toolbox) и [Отображение или скрытие окна панели элементов](showing-or-hiding-the-dialog-editor-toolbar.md).

> [!TIP]
> При использовании **редактора диалоговых окон**во многих случаях можно нажать правую кнопку мыши, чтобы открыть контекстное меню часто используемых команд.

## <a name="add-controls"></a>Добавление элементов управления

### <a name="to-add-a-control"></a>Добавление элемента управления

1. Убедитесь, что диалоговое окно с вкладками открыто как текущий документ в окне редактора. Если диалоговое окно не является текущим документом, **вкладка редактор диалоговых окон** не отображается на **панели элементов**.

1. На вкладке **Редактор диалоговых** окон окна **область элементов** выберите нужный элемент управления, а затем выполните одно из следующих действий:

   - Выберите диалоговое окно в расположении, в котором необходимо разместить элемент управления, и элемент управления отображается в выбранном месте.

   - Перетащите элемент управления из окна **панель элементов** в расположение в диалоговом окне. Затем можно переместить элемент управления или изменить его размер и форму.

   - Дважды щелкните элемент управления в окне **панель элементов** и отобразится в диалоговом окне. Переместите элемент управления в нужное расположение.

### <a name="to-add-multiple-controls"></a>Добавление нескольких элементов управления

1. Удерживая нажатой клавишу **CTRL** , выберите элемент управления в окне **панель элементов** .

1. Отпустите клавишу **CTRL** и выберите диалоговое окно столько раз, сколько нужно добавить определенный элемент управления.

1. Нажмите клавишу **ESC** , чтобы отключить размещение элементов управления.

### <a name="to-size-a-control-while-you-add-it"></a>Изменение размера элемента управления при его добавлении

1. Выберите элемент управления в окне **панель элементов** .

1. Поместите курсор, который отображается в виде перекрестных крестиков, где должен находиться верхний левый угол нового элемента управления в диалоговом окне.

1. Щелкните и удерживайте кнопку мыши, чтобы закрепить верхний левый угол элемента управления в диалоговом окне. Затем перетащите курсор вправо и вниз, пока элемент управления не примет нужный размер.

   > [!NOTE]
   > Можно привязать любой из четырех углов элемента управления, который вы рисуете. В качестве примера в этой процедуре используется левый верхний угол.

1. Отпустите кнопку мыши. Элемент управления будет сопоставляться с диалоговым окном в указанном размере.

> [!TIP]
> Можно изменить размер элемента управления после его перетаскивания в диалоговое окно, переместив маркеры изменения размера на границу элемента управления. Дополнительные сведения см. в разделе [Определение размера отдельных элементов управления](../windows/sizing-individual-controls.md).

### <a name="to-add-a-custom-control"></a>Добавление пользовательского элемента управления

В диалоговое окно можно добавить пользовательские элементы управления. Выберите значок **настраиваемого элемента управления** на **панели элементов** и перетащите его в диалоговое окно. Чтобы добавить `Syslink` элемент управления, добавьте пользовательский элемент управления, а затем измените свойство **класса** элемента управления на `Syslink` . Это действие приведет к обновлению свойств и отображению `Syslink` свойств элемента управления. Сведения о классе-оболочке MFC см. в разделе [CLinkCtrl](../mfc/reference/clinkctrl-class.md).

## <a name="edit-controls"></a>Изменить элементы управления

### <a name="to-edit-the-properties-of-a-control-or-controls"></a>Изменение свойств элемента управления или элементов управления

1. В диалоговом окне выберите элемент управления, который требуется изменить.

   > [!NOTE]
   > При выборе нескольких элементов управления можно изменять только свойства, общие для выбранных элементов управления.

1. В [окно свойств](/visualstudio/ide/reference/properties-window)измените свойства элемента управления.

   > [!NOTE]
   > При установке свойства **Bitmap** для кнопки, переключателя или элемента управления "флажок", равного **True**, стиль BS_BITMAP реализуется для элемента управления. Дополнительные сведения см. в разделе [стили кнопок](../mfc/reference/styles-used-by-mfc.md#button-styles). Пример связывания точечного рисунка с элементом управления см. в разделе [кбуттон:: сетбитмап](../mfc/reference/cbutton-class.md#setbitmap). Растровые изображения не будут отображаться на элементе управления в **редакторе диалоговых окон**.

### <a name="to-undo-changes-to-the-properties-of-a-control"></a>Отмена изменений свойств элемента управления

1. Убедитесь, что элемент управления имеет фокус в **редакторе диалоговых окон**.

1. Последовательно выберите пункты **Правка**  >  **отменить**. Если фокус не находится на элементе управления, команда **отменить** будет недоступна.

### <a name="to-define-a-member-variable-for-a-non-button-dialog-box-control"></a>Определение переменной-члена для элемента управления диалогового окна (кроме кнопки)

> [!NOTE]
> Этот процесс применяется только к элементам управления диалогового окна в проекте MFC. В проектах ATL следует использовать диалоговое окно **новые сообщения Windows и обработчики событий** . Дополнительные сведения см. в статьях [типы сообщений, связанные с объектами пользовательского интерфейса](../mfc/reference/message-types-associated-with-user-interface-objects.md), [изменение обработчика сообщений](../mfc/reference/editing-a-message-handler.md)и [Определение обработчика сообщений для отраженного сообщения](../mfc/reference/defining-a-message-handler-for-a-reflected-message.md).

1. В [редакторе диалоговых окон](dialog-editor.md)выберите элемент управления.

1. Удерживая нажатой клавишу **CTRL** , дважды щелкните элемент управления диалогового окна.

   Откроется [Мастер добавления переменной члена](../ide/add-member-variable-wizard.md) .

1. Введите соответствующую информацию в мастере **добавления переменной члена** . Дополнительные сведения см. в разделе [Обмен данными в диалоговом окне](../mfc/dialog-data-exchange.md).

1. Нажмите кнопку **ОК** , чтобы вернуться в **Редактор диалоговых окон**.

> [!TIP]
> Чтобы перейти из любого элемента управления диалогового окна к его обработчику, дважды щелкните элемент управления.

Можно также использовать вкладку **переменные-члены** в [мастере классов MFC](../mfc/reference/mfc-class-wizard.md) для добавления новых переменных-членов для указанного класса и просмотра уже определенных переменных-членов.

## <a name="delete-controls"></a>Удаление элементов управления

В диалоговом окне выберите элемент управления, нажмите клавишу **Delete** или выберите меню **Правка**  >  **Удалить**.

## <a name="other-issues"></a>Другие проблемы

### <a name="troubleshooting"></a>Устранение неполадок

После добавления в диалоговое окно стандартного элемента управления или расширенного элемента управления редактирования он не будет отображаться при тестировании диалогового окна. Или само диалоговое окно не отображается. Пример:

1. Создайте проект Win32, изменив параметры приложения, чтобы создать приложение Windows (не консольное приложение).

1. В [представление ресурсов](how-to-create-a-resource-script-file.md#create-resources)дважды щелкните *RC* -файл.

1. В разделе диалогового окна дважды щелкните поле **About (сведения** ).

1. Добавьте в диалоговое окно **элемент управления IP-адрес** .

1. Сохраните и **перестройте все**.

1. Выполните программу.

1. В меню **Справка** диалогового окна выберите команду **About** и убедитесь, что диалоговое окно не отображается.

В настоящее время **Редактор диалоговых окон** не добавляет код в проект автоматически при перетаскивании следующих стандартных элементов управления или элементов управления Rich Edit в диалоговое окно. Кроме того, при возникновении этой проблемы Visual Studio не предоставляет ошибок или предупреждений. Чтобы исправить ошибку, добавьте код для элемента управления вручную.

:::row:::
   :::column span="":::
      Элемент управления анимации \
      Пользовательский элемент управления \
      Выбор даты и времени \
      Расширенное поле со списком
   :::column-end:::
   :::column span="":::
      Горячая клавиша \
      Управление IP-адресами \
      Элемент управления списка \
      Месячный календарь
   :::column-end:::
   :::column span="":::
      Управление ходом выполнения \
      Форматируемый элемент управления 2,0 \
      Элемент управления Rich Edit \
      Элемент управления «Ползунок»
   :::column-end:::
   :::column span="":::
      Элемент управления "Счетчик" \
      Элемент управления вкладки \
      Элемент управления "дерево"
   :::column-end:::
:::row-end:::

Чтобы использовать стандартные элементы управления в диалоговом окне, необходимо вызвать [InitCommonControlsEx](/windows/win32/api/commctrl/nf-commctrl-initcommoncontrolsex) или `AFXInitCommonControls` перед созданием диалогового окна.

Чтобы использовать элементы управления RichEdit, необходимо вызвать `LoadLibrary` . Дополнительные сведения см. в статьях об элементах [управления Rich Edit](/windows/win32/Controls/about-rich-edit-controls) в Windows SDK и [обзоре элемента управления Rich Edit](../mfc/overview-of-the-rich-edit-control.md).

> [!NOTE]
> Чтобы использовать элемент управления RichEdit с MFC, необходимо сначала вызвать [требуется метод afxinitrichedit2](../mfc/reference/application-information-and-management.md#afxinitrichedit2) , чтобы загрузить элемент управления RichEdit 2,0 (RICHED20.DLL), или вызвать [афксинитричедит](../mfc/reference/application-information-and-management.md#afxinitrichedit) , чтобы загрузить старый элемент управления RichEdit 1,0 (RICHED32.DLL).
>
> Вы можете использовать текущий класс [CRichEditCtrl](../mfc/reference/cricheditctrl-class.md) с более старым элементом управления RichEdit 1,0, но `CRichEditCtrl` он предназначен только для поддержки элемента управления RichEdit 2,0. Так как RichEdit 1,0 и RichEdit 2,0 похожи, большинство методов будут работать. Однако между элементами управления 1,0 и 2,0 существуют некоторые различия, поэтому некоторые методы могут работать неправильно или вообще не работать.

### <a name="activex-controls"></a>Элементы управления ActiveX

Среда разработки Visual Studio позволяет вставлять элементы ActiveX в диалоговое окно. Дополнительные сведения см. в разделе [элементы ActiveX MFC](../mfc/mfc-activex-controls.md) и [контейнеры элементов управления ActiveX](../mfc/activex-control-containers.md).

Диалоговое окно **Вставка элемента ActiveX** позволяет вставлять элементы управления ActiveX в диалоговое окно при использовании [редактора диалоговых окон](dialog-editor.md). Это диалоговое окно содержит следующие свойства.

|Свойство|Описание|
|---|---|
|**Элемент управления ActiveX**|Отображает список элементов управления ActiveX.<br/><br/>При вставке элемента управления из этого диалогового окна не создается класс-оболочка. Если требуется класс-оболочка, используйте [представление классов](/visualstudio/ide/viewing-the-structure-of-code) , чтобы создать его, см. раздел [Добавление класса](../ide/adding-a-class-visual-cpp.md).<br/><br/>Если элемент управления ActiveX не отображается в этом диалоговом окне, попробуйте установить элемент управления в соответствии с инструкциями поставщика.|
|**Путь**|Отображает файл, в котором найден элемент управления ActiveX.|

> [!CAUTION]
> Распространение всех элементов ActiveX в системе может быть незаконным. Ознакомьтесь с лицензионным соглашением для программного обеспечения, установившего элементы управления, или обратитесь в компанию Software.

#### <a name="to-add-an-activex-control"></a>Добавление элемента управления ActiveX

1. Откройте диалоговое окно в **редакторе диалоговых окон**.

1. Щелкните правой кнопкой мыши в любом месте текста диалогового окна и выберите пункт **Вставить элемент управления ActiveX**.

   Откроется диалоговое окно **Вставка элемента управления ActiveX** , в котором отображаются все элементы управления ActiveX в системе. В нижней части диалогового окна отображается путь к файлу элемента ActiveX.

1. Выберите элемент управления, который необходимо добавить в диалоговое окно, и нажмите кнопку **ОК**.

   Элемент появится в диалоговом окне, после чего его можно будет изменить или создать для него обработчики, как для любого другого элемента управления.

> [!TIP]
> Контекстное меню в **редакторе диалоговых окон** можно использовать для быстрого добавления зарегистрированных элементов управления ActiveX в диалоговое окно или попытаться добавить элементы управления ActiveX в окно **панели элементов** для удобного доступа.

#### <a name="to-edit-properties-for-an-activex-control"></a>Изменение свойств элемента управления ActiveX

Элементы управления ActiveX, предоставляемые независимыми поставщиками, могут полагаться на собственные свойства и характеристики. Эти свойства отображаются в окне **Свойства** . Все страницы свойств, созданные модулями записи элемента управления ActiveX, отображаются в диалоговом окне **страницы свойств** . (Чтобы просмотреть **страницу свойств** для определенного элемента управления ActiveX, нажмите кнопку со **страницей свойств** в [окно свойств](/visualstudio/ide/reference/properties-window)).

- Выберите элемент **ActiveX** и перейдите на **View**  >  **страницу свойств** представление меню, чтобы просмотреть свойства. Внесите необходимые изменения на странице свойств.

   На странице свойств элемента управления ActiveX отображаются различные вкладки в зависимости от страниц свойств, которые входят в состав элемента управления ActiveX.

> [!NOTE]
> Эта процедура применяется к использованию страницы свойств для изменения элементов управления ActiveX. Можно также просматривать и изменять свойства ActiveX в окне новые **Свойства** .

## <a name="requirements"></a>Требования

Win32

## <a name="see-also"></a>См. также раздел

[Управление элементами управления "диалоговое окно"](controls-in-dialog-boxes.md)<br/>
[Как выполнять действия с элементами управления макета](arrangement-of-controls-on-dialog-boxes.md)<br/>
[Руководство. Определение доступа и значений управления](defining-mnemonics-access-keys.md)

<!-- excluded links
[Mapping Messages to Functions](../mfc/reference/mapping-messages-to-functions.md)<br/>
[Adding Functionality with Code Wizards](../ide/adding-functionality-with-code-wizards-cpp.md)<br/>
[Adding a Class](../ide/adding-a-class-visual-cpp.md)<br/>
[Adding a Member Function](../ide/adding-a-member-function-visual-cpp.md)<br/>
[Adding a Member Variable](../ide/adding-a-member-variable-visual-cpp.md)<br/>
[Overriding a Virtual Function](../ide/overriding-a-virtual-function-visual-cpp.md)<br/>
[MFC Message Handler](../mfc/reference/adding-an-mfc-message-handler.md)
[Declaring a Variable Based on Your New Control Class](../mfc/reference/declaring-a-variable-based-on-your-new-control-class.md)<br/>
-->
